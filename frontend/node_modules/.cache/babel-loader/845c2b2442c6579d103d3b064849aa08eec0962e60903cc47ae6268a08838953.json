{"ast":null,"code":"// @ts-check\n\n/**\n * @param {{\n *   element: HTMLElement;\n *   attribute: string;\n *   onSuccess: (value: string) => void;\n *   onTimeout: () => void;\n *   timeout?: number;\n * }} options\n */\nexport const waitForAttribute = ({\n  element,\n  attribute,\n  onSuccess,\n  onTimeout,\n  timeout = 300\n}) => {\n  const currentAttrValue = element.getAttribute(attribute);\n  if (currentAttrValue !== null) {\n    onSuccess(currentAttrValue);\n    return;\n  }\n  const observer = new MutationObserver(mutations => {\n    const mutation = mutations[mutations.length - 1];\n    handleMutation(mutation);\n  });\n  observer.observe(element, {\n    attributes: true,\n    attributeFilter: [attribute]\n  });\n  const timeoutId = setTimeout(() => {\n    observer.disconnect();\n    onTimeout();\n  }, timeout);\n\n  /** @param {MutationRecord} mutation */\n  const handleMutation = mutation => {\n    const attrValue = element.getAttribute(attribute);\n    if (mutation.type === 'attributes' && mutation.attributeName === attribute && attrValue !== null) {\n      clearTimeout(timeoutId);\n      observer.disconnect();\n      onSuccess(attrValue);\n    }\n  };\n};","map":{"version":3,"names":["waitForAttribute","element","attribute","onSuccess","onTimeout","timeout","currentAttrValue","getAttribute","observer","MutationObserver","mutations","mutation","length","handleMutation","observe","attributes","attributeFilter","timeoutId","setTimeout","disconnect","attrValue","type","attributeName","clearTimeout"],"sources":["/Users/kavinth/Documents/GitHub/Smart-Alert/Smart-Alert-new/frontend/node_modules/@uploadcare/file-uploader/utils/waitForAttribute.js"],"sourcesContent":["// @ts-check\n\n/**\n * @param {{\n *   element: HTMLElement;\n *   attribute: string;\n *   onSuccess: (value: string) => void;\n *   onTimeout: () => void;\n *   timeout?: number;\n * }} options\n */\nexport const waitForAttribute = ({ element, attribute, onSuccess, onTimeout, timeout = 300 }) => {\n  const currentAttrValue = element.getAttribute(attribute);\n  if (currentAttrValue !== null) {\n    onSuccess(currentAttrValue);\n    return;\n  }\n\n  const observer = new MutationObserver((mutations) => {\n    const mutation = mutations[mutations.length - 1];\n    handleMutation(mutation);\n  });\n\n  observer.observe(element, {\n    attributes: true,\n    attributeFilter: [attribute],\n  });\n\n  const timeoutId = setTimeout(() => {\n    observer.disconnect();\n    onTimeout();\n  }, timeout);\n\n  /** @param {MutationRecord} mutation */\n  const handleMutation = (mutation) => {\n    const attrValue = element.getAttribute(attribute);\n    if (mutation.type === 'attributes' && mutation.attributeName === attribute && attrValue !== null) {\n      clearTimeout(timeoutId);\n      observer.disconnect();\n      onSuccess(attrValue);\n    }\n  };\n};\n"],"mappings":"AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMA,gBAAgB,GAAGA,CAAC;EAAEC,OAAO;EAAEC,SAAS;EAAEC,SAAS;EAAEC,SAAS;EAAEC,OAAO,GAAG;AAAI,CAAC,KAAK;EAC/F,MAAMC,gBAAgB,GAAGL,OAAO,CAACM,YAAY,CAACL,SAAS,CAAC;EACxD,IAAII,gBAAgB,KAAK,IAAI,EAAE;IAC7BH,SAAS,CAACG,gBAAgB,CAAC;IAC3B;EACF;EAEA,MAAME,QAAQ,GAAG,IAAIC,gBAAgB,CAAEC,SAAS,IAAK;IACnD,MAAMC,QAAQ,GAAGD,SAAS,CAACA,SAAS,CAACE,MAAM,GAAG,CAAC,CAAC;IAChDC,cAAc,CAACF,QAAQ,CAAC;EAC1B,CAAC,CAAC;EAEFH,QAAQ,CAACM,OAAO,CAACb,OAAO,EAAE;IACxBc,UAAU,EAAE,IAAI;IAChBC,eAAe,EAAE,CAACd,SAAS;EAC7B,CAAC,CAAC;EAEF,MAAMe,SAAS,GAAGC,UAAU,CAAC,MAAM;IACjCV,QAAQ,CAACW,UAAU,CAAC,CAAC;IACrBf,SAAS,CAAC,CAAC;EACb,CAAC,EAAEC,OAAO,CAAC;;EAEX;EACA,MAAMQ,cAAc,GAAIF,QAAQ,IAAK;IACnC,MAAMS,SAAS,GAAGnB,OAAO,CAACM,YAAY,CAACL,SAAS,CAAC;IACjD,IAAIS,QAAQ,CAACU,IAAI,KAAK,YAAY,IAAIV,QAAQ,CAACW,aAAa,KAAKpB,SAAS,IAAIkB,SAAS,KAAK,IAAI,EAAE;MAChGG,YAAY,CAACN,SAAS,CAAC;MACvBT,QAAQ,CAACW,UAAU,CAAC,CAAC;MACrBhB,SAAS,CAACiB,SAAS,CAAC;IACtB;EACF,CAAC;AACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}