{"ast":null,"code":"// @ts-check\nimport { Block } from '../../abstract/Block.js';\nimport { ModalEvents } from '../../abstract/ModalManager.js';\nimport { EventType } from '../UploadCtxProvider/EventEmitter.js';\n\n/** @type {import('../../abstract/ModalManager.js').ModalId | null} */\nlet LAST_ACTIVE_MODAL_ID = null;\nexport class Modal extends Block {\n  static styleAttrs = [...super.styleAttrs, 'uc-modal'];\n  static StateConsumerScope = 'modal';\n  constructor() {\n    super();\n    this.init$ = {\n      ...this.init$,\n      closeClicked: this._handleDialogClose\n    };\n  }\n  _handleBackdropClick = () => {\n    this._closeDialog();\n  };\n  _closeDialog = () => {\n    this.modalManager?.close(this.id);\n    if (!this.modalManager.hasActiveModals) {\n      document.body.style.overflow = '';\n    }\n  };\n  _handleDialogClose = () => {\n    this._closeDialog();\n  };\n\n  /** @param {Event} e */\n  _handleDialogMouseDown = e => {\n    /** @private */\n    this._mouseDownTarget = e.target;\n  };\n\n  /** @param {Event} e */\n  _handleDialogMouseUp = e => {\n    if (e.target === this.ref.dialog && e.target === this._mouseDownTarget) {\n      this._closeDialog();\n    }\n  };\n  show() {\n    if (this.ref.dialog.showModal) {\n      this.setAttribute('aria-modal', 'true');\n      this.ref.dialog.showModal();\n    } else {\n      this.ref.dialog.setAttribute('open', '');\n    }\n    if (this.cfg.modalScrollLock) {\n      document.body.style.overflow = 'hidden';\n    }\n  }\n  hide() {\n    if (this.ref.dialog.close) {\n      this.setAttribute('aria-modal', 'false');\n      this.ref.dialog.close();\n    } else {\n      this.ref.dialog.removeAttribute('open');\n    }\n  }\n\n  /**\n   * @private\n   * @type {import('../../abstract/ModalManager.js').ModalCb}\n   */\n  _handleModalOpen({\n    id\n  }) {\n    if (id === this.id) {\n      LAST_ACTIVE_MODAL_ID = id;\n      this.show();\n    } else {\n      this.hide();\n    }\n    this.emit(EventType.MODAL_OPEN, {\n      modalId: id\n    }, {\n      debounce: true\n    });\n  }\n\n  /**\n   * @private\n   * @type {import('../../abstract/ModalManager.js').ModalCb}\n   */\n  _handleModalClose({\n    id\n  }) {\n    if (id === this.id) {\n      this.hide();\n    }\n    this.emit(EventType.MODAL_CLOSE, {\n      modalId: id,\n      hasActiveModals: this.modalManager.hasActiveModals\n    }, {\n      debounce: true\n    });\n  }\n\n  /** @private */\n  _handleModalCloseAll() {\n    this.hide();\n    if (LAST_ACTIVE_MODAL_ID === this.id) {\n      this.emit(EventType.MODAL_CLOSE, {\n        modalId: LAST_ACTIVE_MODAL_ID,\n        hasActiveModals: this.modalManager.hasActiveModals\n      }, {\n        debounce: true\n      });\n    }\n  }\n  initCallback() {\n    super.initCallback();\n    this.modalManager?.registerModal(this.id, this);\n    this.ref.dialog.addEventListener('close', this._handleDialogClose);\n    this.ref.dialog.addEventListener('mousedown', this._handleDialogMouseDown);\n    this.ref.dialog.addEventListener('mouseup', this._handleDialogMouseUp);\n    this.subConfigValue('modalBackdropStrokes', val => {\n      if (val) {\n        this.setAttribute('strokes', '');\n      } else {\n        this.removeAttribute('strokes');\n      }\n    });\n    this.handleModalOpen = this._handleModalOpen.bind(this);\n    this.handleModalClose = this._handleModalClose.bind(this);\n    this.handleModalCloseAll = this._handleModalCloseAll.bind(this);\n    this.modalManager.subscribe(ModalEvents.OPEN, this.handleModalOpen);\n    this.modalManager.subscribe(ModalEvents.CLOSE, this.handleModalClose);\n    this.modalManager.subscribe(ModalEvents.CLOSE_ALL, this.handleModalCloseAll);\n  }\n  destroyCallback() {\n    super.destroyCallback();\n    document.body.style.overflow = '';\n    this._mouseDownTarget = undefined;\n    this.ref.dialog.removeEventListener('close', this._handleDialogClose);\n    this.ref.dialog.removeEventListener('mousedown', this._handleDialogMouseDown);\n    this.ref.dialog.removeEventListener('mouseup', this._handleDialogMouseUp);\n    this.modalManager.unsubscribe(ModalEvents.OPEN, this.handleModalOpen);\n    this.modalManager.unsubscribe(ModalEvents.CLOSE, this.handleModalClose);\n    this.modalManager.unsubscribe(ModalEvents.CLOSE_ALL, this.handleModalCloseAll);\n  }\n}\nModal.template = /* HTML */`\n  <dialog ref=\"dialog\">\n    <slot></slot>\n  </dialog>\n`;","map":{"version":3,"names":["Block","ModalEvents","EventType","LAST_ACTIVE_MODAL_ID","Modal","styleAttrs","StateConsumerScope","constructor","init$","closeClicked","_handleDialogClose","_handleBackdropClick","_closeDialog","modalManager","close","id","hasActiveModals","document","body","style","overflow","_handleDialogMouseDown","e","_mouseDownTarget","target","_handleDialogMouseUp","ref","dialog","show","showModal","setAttribute","cfg","modalScrollLock","hide","removeAttribute","_handleModalOpen","emit","MODAL_OPEN","modalId","debounce","_handleModalClose","MODAL_CLOSE","_handleModalCloseAll","initCallback","registerModal","addEventListener","subConfigValue","val","handleModalOpen","bind","handleModalClose","handleModalCloseAll","subscribe","OPEN","CLOSE","CLOSE_ALL","destroyCallback","undefined","removeEventListener","unsubscribe","template"],"sources":["/Users/kavinth/Documents/GitHub/Smart-Alert/Smart-Alert-new/frontend/node_modules/@uploadcare/file-uploader/blocks/Modal/Modal.js"],"sourcesContent":["// @ts-check\nimport { Block } from '../../abstract/Block.js';\nimport { ModalEvents } from '../../abstract/ModalManager.js';\nimport { EventType } from '../UploadCtxProvider/EventEmitter.js';\n\n/** @type {import('../../abstract/ModalManager.js').ModalId | null} */\nlet LAST_ACTIVE_MODAL_ID = null;\n\nexport class Modal extends Block {\n  static styleAttrs = [...super.styleAttrs, 'uc-modal'];\n  static StateConsumerScope = 'modal';\n\n  constructor() {\n    super();\n    this.init$ = {\n      ...this.init$,\n      closeClicked: this._handleDialogClose,\n    };\n  }\n\n  _handleBackdropClick = () => {\n    this._closeDialog();\n  };\n\n  _closeDialog = () => {\n    this.modalManager?.close(this.id);\n\n    if (!this.modalManager.hasActiveModals) {\n      document.body.style.overflow = '';\n    }\n  };\n\n  _handleDialogClose = () => {\n    this._closeDialog();\n  };\n\n  /** @param {Event} e */\n  _handleDialogMouseDown = (e) => {\n    /** @private */\n    this._mouseDownTarget = e.target;\n  };\n\n  /** @param {Event} e */\n  _handleDialogMouseUp = (e) => {\n    if (e.target === this.ref.dialog && e.target === this._mouseDownTarget) {\n      this._closeDialog();\n    }\n  };\n\n  show() {\n    if (this.ref.dialog.showModal) {\n      this.setAttribute('aria-modal', 'true');\n      this.ref.dialog.showModal();\n    } else {\n      this.ref.dialog.setAttribute('open', '');\n    }\n\n    if (this.cfg.modalScrollLock) {\n      document.body.style.overflow = 'hidden';\n    }\n  }\n\n  hide() {\n    if (this.ref.dialog.close) {\n      this.setAttribute('aria-modal', 'false');\n      this.ref.dialog.close();\n    } else {\n      this.ref.dialog.removeAttribute('open');\n    }\n  }\n\n  /**\n   * @private\n   * @type {import('../../abstract/ModalManager.js').ModalCb}\n   */\n  _handleModalOpen({ id }) {\n    if (id === this.id) {\n      LAST_ACTIVE_MODAL_ID = id;\n      this.show();\n    } else {\n      this.hide();\n    }\n\n    this.emit(EventType.MODAL_OPEN, { modalId: id }, { debounce: true });\n  }\n\n  /**\n   * @private\n   * @type {import('../../abstract/ModalManager.js').ModalCb}\n   */\n  _handleModalClose({ id }) {\n    if (id === this.id) {\n      this.hide();\n    }\n\n    this.emit(\n      EventType.MODAL_CLOSE,\n      { modalId: id, hasActiveModals: this.modalManager.hasActiveModals },\n      { debounce: true },\n    );\n  }\n\n  /** @private */\n  _handleModalCloseAll() {\n    this.hide();\n\n    if (LAST_ACTIVE_MODAL_ID === this.id) {\n      this.emit(\n        EventType.MODAL_CLOSE,\n        { modalId: LAST_ACTIVE_MODAL_ID, hasActiveModals: this.modalManager.hasActiveModals },\n        { debounce: true },\n      );\n    }\n  }\n\n  initCallback() {\n    super.initCallback();\n\n    this.modalManager?.registerModal(this.id, this);\n\n    this.ref.dialog.addEventListener('close', this._handleDialogClose);\n    this.ref.dialog.addEventListener('mousedown', this._handleDialogMouseDown);\n    this.ref.dialog.addEventListener('mouseup', this._handleDialogMouseUp);\n\n    this.subConfigValue('modalBackdropStrokes', (val) => {\n      if (val) {\n        this.setAttribute('strokes', '');\n      } else {\n        this.removeAttribute('strokes');\n      }\n    });\n\n    this.handleModalOpen = this._handleModalOpen.bind(this);\n    this.handleModalClose = this._handleModalClose.bind(this);\n    this.handleModalCloseAll = this._handleModalCloseAll.bind(this);\n\n    this.modalManager.subscribe(ModalEvents.OPEN, this.handleModalOpen);\n    this.modalManager.subscribe(ModalEvents.CLOSE, this.handleModalClose);\n    this.modalManager.subscribe(ModalEvents.CLOSE_ALL, this.handleModalCloseAll);\n  }\n\n  destroyCallback() {\n    super.destroyCallback();\n    document.body.style.overflow = '';\n    this._mouseDownTarget = undefined;\n    this.ref.dialog.removeEventListener('close', this._handleDialogClose);\n    this.ref.dialog.removeEventListener('mousedown', this._handleDialogMouseDown);\n    this.ref.dialog.removeEventListener('mouseup', this._handleDialogMouseUp);\n\n    this.modalManager.unsubscribe(ModalEvents.OPEN, this.handleModalOpen);\n    this.modalManager.unsubscribe(ModalEvents.CLOSE, this.handleModalClose);\n    this.modalManager.unsubscribe(ModalEvents.CLOSE_ALL, this.handleModalCloseAll);\n  }\n}\n\nModal.template = /* HTML */ `\n  <dialog ref=\"dialog\">\n    <slot></slot>\n  </dialog>\n`;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}