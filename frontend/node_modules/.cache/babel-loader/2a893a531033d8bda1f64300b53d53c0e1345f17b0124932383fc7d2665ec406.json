{"ast":null,"code":"import axios from \"axios\";\nconst baseURL = process.env.REACT_APP_API_BASE_URL || \"http://localhost:5001\";\nexport const api = axios.create({\n  baseURL,\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});\n\n// Request interceptor to add role headers\napi.interceptors.request.use(config => {\n  const role = localStorage.getItem(\"userRole\");\n  const userClass = localStorage.getItem(\"userClass\");\n  if (role) {\n    config.headers[\"x-user-role\"] = role;\n  }\n  if (userClass) {\n    config.headers[\"x-user-class\"] = userClass;\n  }\n  return config;\n});\n\n// Students\nexport const getStudents = params => api.get(\"/students\", {\n  params\n});\nexport const getNextStudentIndex = () => api.get(\"/students/next-index\");\nexport const addStudent = payload => api.post(\"/students\", payload);\nexport const updateStudent = (id, payload) => api.put(`/students/${id}`, payload);\nexport const deleteStudent = idOrIndex => api.delete(`/students/${idOrIndex}`);\n\n// Attendance\nexport const getAllAttendance = params => api.get(\"/attendance\", {\n  params\n});\nexport const markAttendance = payload => api.post(\"/attendance\", payload);\nexport const updateAttendance = (id, payload) => api.put(`/attendance/${id}`, payload);\nexport const deleteAttendance = id => api.delete(`/attendance/${id}`);\nexport const getAttendanceByStudent = idOrIndex => api.get(`/attendance/${idOrIndex}`);\n\n// Notify parents for Absent/Late (WhatsApp)\nexport const notifyParentsForAbsents = items => api.post(\"/attendance/notify-parents\", {\n  items\n});\n\n// Parent View - Get attendance by student index\nexport const getAttendanceByStudentIndex = studentIndex => api.post(\"/attendance/parent-view\", {\n  studentIndex\n});\n\n// Leave Requests\nexport const submitLeaveRequest = payload => api.post(\"/leave-requests\", payload);\nexport const getAllLeaveRequests = status => api.get(\"/leave-requests\", {\n  params: {\n    status\n  }\n});\nexport const getPendingLeaveCount = () => api.get(\"/leave-requests/pending-count\");\nexport const getAcceptedLeave = (studentIndex, date) => api.get(\"/leave-requests/accepted-leave\", {\n  params: {\n    studentIndex,\n    date\n  }\n});\nexport const getAcceptedLeavesForDate = date => api.get(\"/leave-requests/accepted-for-date\", {\n  params: {\n    date\n  }\n});\nexport const acceptLeaveRequest = (id, reviewedBy) => api.put(`/leave-requests/${id}/accept`, {\n  reviewedBy\n});\nexport const rejectLeaveRequest = (id, reviewedBy, rejectionReason) => api.put(`/leave-requests/${id}/reject`, {\n  reviewedBy,\n  rejectionReason\n});\nexport const deleteAllPendingRequests = () => api.delete(\"/leave-requests/pending/all\");\n\n// Notifications\nexport const getNotificationsByStudentIndex = studentIndex => api.get(\"/notifications/student\", {\n  params: {\n    studentIndex\n  }\n});\nexport const getUnreadNotificationCount = studentIndex => api.get(\"/notifications/unread-count\", {\n  params: {\n    studentIndex\n  }\n});\nexport const markNotificationAsRead = id => api.put(`/notifications/${id}/read`);\nexport const markAllNotificationsAsRead = studentIndex => api.put(\"/notifications/mark-all-read\", {\n  studentIndex\n});\n\n// Reports\nexport const generateAttendanceReport = params => api.get(\"/reports/attendance\", {\n  params,\n  responseType: 'blob'\n});\nexport const generateMonthlyReport = params => api.get(\"/reports/monthly\", {\n  params,\n  responseType: 'blob'\n});\nexport const generateStudentReport = params => api.get(\"/reports/student\", {\n  params,\n  responseType: 'blob'\n});\nexport const generateFilteredReport = payload => api.post(\"/reports/generate\", payload, {\n  responseType: 'blob'\n});\nexport const getAvailableSections = () => api.get(\"/reports/sections\");","map":{"version":3,"names":["axios","baseURL","process","env","REACT_APP_API_BASE_URL","api","create","headers","interceptors","request","use","config","role","localStorage","getItem","userClass","getStudents","params","get","getNextStudentIndex","addStudent","payload","post","updateStudent","id","put","deleteStudent","idOrIndex","delete","getAllAttendance","markAttendance","updateAttendance","deleteAttendance","getAttendanceByStudent","notifyParentsForAbsents","items","getAttendanceByStudentIndex","studentIndex","submitLeaveRequest","getAllLeaveRequests","status","getPendingLeaveCount","getAcceptedLeave","date","getAcceptedLeavesForDate","acceptLeaveRequest","reviewedBy","rejectLeaveRequest","rejectionReason","deleteAllPendingRequests","getNotificationsByStudentIndex","getUnreadNotificationCount","markNotificationAsRead","markAllNotificationsAsRead","generateAttendanceReport","responseType","generateMonthlyReport","generateStudentReport","generateFilteredReport","getAvailableSections"],"sources":["/Users/kavinth/Documents/GitHub/Smart-Alert/Smart-Alert-new/frontend/src/api/client.js"],"sourcesContent":["import axios from \"axios\";\n\nconst baseURL = process.env.REACT_APP_API_BASE_URL || \"http://localhost:5001\";\n\nexport const api = axios.create({\n  baseURL,\n  headers: { \"Content-Type\": \"application/json\" }\n});\n\n// Request interceptor to add role headers\napi.interceptors.request.use((config) => {\n  const role = localStorage.getItem(\"userRole\");\n  const userClass = localStorage.getItem(\"userClass\");\n\n  if (role) {\n    config.headers[\"x-user-role\"] = role;\n  }\n  if (userClass) {\n    config.headers[\"x-user-class\"] = userClass;\n  }\n  return config;\n});\n\n// Students\nexport const getStudents = (params) => api.get(\"/students\", { params });\nexport const getNextStudentIndex = () => api.get(\"/students/next-index\");\nexport const addStudent = (payload) => api.post(\"/students\", payload);\nexport const updateStudent = (id, payload) => api.put(`/students/${id}`, payload);\nexport const deleteStudent = (idOrIndex) => api.delete(`/students/${idOrIndex}`);\n\n// Attendance\nexport const getAllAttendance = (params) => api.get(\"/attendance\", { params });\nexport const markAttendance = (payload) => api.post(\"/attendance\", payload);\nexport const updateAttendance = (id, payload) => api.put(`/attendance/${id}`, payload);\nexport const deleteAttendance = (id) => api.delete(`/attendance/${id}`);\nexport const getAttendanceByStudent = (idOrIndex) => api.get(`/attendance/${idOrIndex}`);\n\n// Notify parents for Absent/Late (WhatsApp)\nexport const notifyParentsForAbsents = (items) => api.post(\"/attendance/notify-parents\", { items });\n\n// Parent View - Get attendance by student index\nexport const getAttendanceByStudentIndex = (studentIndex) => api.post(\"/attendance/parent-view\", { studentIndex });\n\n// Leave Requests\nexport const submitLeaveRequest = (payload) => api.post(\"/leave-requests\", payload);\nexport const getAllLeaveRequests = (status) => api.get(\"/leave-requests\", { params: { status } });\nexport const getPendingLeaveCount = () => api.get(\"/leave-requests/pending-count\");\nexport const getAcceptedLeave = (studentIndex, date) => api.get(\"/leave-requests/accepted-leave\", { params: { studentIndex, date } });\nexport const getAcceptedLeavesForDate = (date) => api.get(\"/leave-requests/accepted-for-date\", { params: { date } });\nexport const acceptLeaveRequest = (id, reviewedBy) => api.put(`/leave-requests/${id}/accept`, { reviewedBy });\nexport const rejectLeaveRequest = (id, reviewedBy, rejectionReason) => api.put(`/leave-requests/${id}/reject`, { reviewedBy, rejectionReason });\nexport const deleteAllPendingRequests = () => api.delete(\"/leave-requests/pending/all\");\n\n// Notifications\nexport const getNotificationsByStudentIndex = (studentIndex) => api.get(\"/notifications/student\", { params: { studentIndex } });\nexport const getUnreadNotificationCount = (studentIndex) => api.get(\"/notifications/unread-count\", { params: { studentIndex } });\nexport const markNotificationAsRead = (id) => api.put(`/notifications/${id}/read`);\nexport const markAllNotificationsAsRead = (studentIndex) => api.put(\"/notifications/mark-all-read\", { studentIndex });\n\n// Reports\nexport const generateAttendanceReport = (params) => api.get(\"/reports/attendance\", { params, responseType: 'blob' });\nexport const generateMonthlyReport = (params) => api.get(\"/reports/monthly\", { params, responseType: 'blob' });\nexport const generateStudentReport = (params) => api.get(\"/reports/student\", { params, responseType: 'blob' });\nexport const generateFilteredReport = (payload) => api.post(\"/reports/generate\", payload, { responseType: 'blob' });\nexport const getAvailableSections = () => api.get(\"/reports/sections\");\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}