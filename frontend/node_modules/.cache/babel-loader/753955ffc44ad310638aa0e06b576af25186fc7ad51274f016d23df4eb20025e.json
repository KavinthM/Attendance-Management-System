{"ast":null,"code":"//  @ts-check\n\nconst DEFAULT_DEBOUNCE_TIMEOUT = 20;\nexport const EventType = Object.freeze({\n  FILE_ADDED: 'file-added',\n  FILE_REMOVED: 'file-removed',\n  FILE_UPLOAD_START: 'file-upload-start',\n  FILE_UPLOAD_PROGRESS: 'file-upload-progress',\n  FILE_UPLOAD_SUCCESS: 'file-upload-success',\n  FILE_UPLOAD_FAILED: 'file-upload-failed',\n  FILE_URL_CHANGED: 'file-url-changed',\n  MODAL_OPEN: 'modal-open',\n  MODAL_CLOSE: 'modal-close',\n  DONE_CLICK: 'done-click',\n  UPLOAD_CLICK: 'upload-click',\n  ACTIVITY_CHANGE: 'activity-change',\n  COMMON_UPLOAD_START: 'common-upload-start',\n  COMMON_UPLOAD_PROGRESS: 'common-upload-progress',\n  COMMON_UPLOAD_SUCCESS: 'common-upload-success',\n  COMMON_UPLOAD_FAILED: 'common-upload-failed',\n  CHANGE: 'change',\n  GROUP_CREATED: 'group-created'\n});\n\n/**\n * @typedef {{\n *   [EventType.FILE_ADDED]: import('../../index.js').OutputFileEntry<'idle'>;\n *   [EventType.FILE_REMOVED]: import('../../index.js').OutputFileEntry<'removed'>;\n *   [EventType.FILE_UPLOAD_START]: import('../../index.js').OutputFileEntry<'uploading'>;\n *   [EventType.FILE_UPLOAD_PROGRESS]: import('../../index.js').OutputFileEntry<'uploading'>;\n *   [EventType.FILE_UPLOAD_SUCCESS]: import('../../index.js').OutputFileEntry<'success'>;\n *   [EventType.FILE_UPLOAD_FAILED]: import('../../index.js').OutputFileEntry<'failed'>;\n *   [EventType.FILE_URL_CHANGED]: import('../../index.js').OutputFileEntry<'success'>;\n *   [EventType.MODAL_OPEN]: { modalId: import('../../abstract/ModalManager.js').ModalId };\n *   [EventType.MODAL_CLOSE]: { modalId: import('../../abstract/ModalManager.js').ModalId; hasActiveModals: boolean };\n *   [EventType.ACTIVITY_CHANGE]: {\n *     activity: import('../../abstract/ActivityBlock.js').ActivityType;\n *   };\n *   [EventType.UPLOAD_CLICK]: void;\n *   [EventType.DONE_CLICK]: import('../../index.js').OutputCollectionState;\n *   [EventType.COMMON_UPLOAD_START]: import('../../index.js').OutputCollectionState<'uploading'>;\n *   [EventType.COMMON_UPLOAD_PROGRESS]: import('../../index.js').OutputCollectionState<'uploading'>;\n *   [EventType.COMMON_UPLOAD_SUCCESS]: import('../../index.js').OutputCollectionState<'success'>;\n *   [EventType.COMMON_UPLOAD_FAILED]: import('../../index.js').OutputCollectionState<'failed'>;\n *   [EventType.CHANGE]: import('../../index.js').OutputCollectionState;\n *   [EventType.GROUP_CREATED]: import('../../index.js').OutputCollectionState<'success', 'has-group'>;\n * }} EventPayload\n */\n\nexport class EventEmitter {\n  /**\n   * @private\n   * @type {Map<string, number>}\n   */\n  _timeoutStore = new Map();\n\n  /**\n   * @private\n   * @type {Set<import('../../abstract/Block.js').Block>}\n   */\n  _targets = new Set();\n\n  /**\n   * @private\n   * @type {((...args: unknown[]) => void) | null}\n   */\n  _debugPrint = null;\n\n  /** @param {(...args: unknown[]) => void} debugPrint */\n  constructor(debugPrint) {\n    this._debugPrint = debugPrint;\n  }\n\n  /** @param {import('../../abstract/Block.js').Block} target */\n  bindTarget(target) {\n    this._targets.add(target);\n  }\n\n  /** @param {import('../../abstract/Block.js').Block} target */\n  unbindTarget(target) {\n    this._targets.delete(target);\n  }\n\n  /**\n   * @private\n   * @template {(typeof EventType)[keyof typeof EventType]} T\n   * @param {T} type\n   * @param {unknown} [payload]\n   */\n  _dispatch(type, payload) {\n    for (const target of this._targets) {\n      target.dispatchEvent(new CustomEvent(type, {\n        detail: payload\n      }));\n    }\n    this._debugPrint?.(() => {\n      const copyPayload = !!payload && typeof payload === 'object' ? {\n        ...payload\n      } : payload;\n      return [`event \"${type}\"`, copyPayload];\n    });\n  }\n\n  /**\n   * @template {(typeof EventType)[keyof typeof EventType]} T\n   * @template {boolean | number | undefined} TDebounce\n   * @param {T} type\n   * @param {TDebounce extends false | undefined ? unknown : () => unknown} [payload]\n   * @param {{ debounce?: TDebounce }} [options]\n   */\n  emit(type, payload, {\n    debounce\n  } = {}) {\n    if (typeof debounce !== 'number' && !debounce) {\n      this._dispatch(type, typeof payload === 'function' ? payload() : payload);\n      return;\n    }\n    if (this._timeoutStore.has(type)) {\n      window.clearTimeout(this._timeoutStore.get(type));\n    }\n    const timeout = typeof debounce === 'number' ? debounce : DEFAULT_DEBOUNCE_TIMEOUT;\n    const timeoutId = window.setTimeout(() => {\n      this._dispatch(type, typeof payload === 'function' ? payload() : payload);\n      this._timeoutStore.delete(type);\n    }, timeout);\n    this._timeoutStore.set(type, timeoutId);\n  }\n}","map":{"version":3,"names":["DEFAULT_DEBOUNCE_TIMEOUT","EventType","Object","freeze","FILE_ADDED","FILE_REMOVED","FILE_UPLOAD_START","FILE_UPLOAD_PROGRESS","FILE_UPLOAD_SUCCESS","FILE_UPLOAD_FAILED","FILE_URL_CHANGED","MODAL_OPEN","MODAL_CLOSE","DONE_CLICK","UPLOAD_CLICK","ACTIVITY_CHANGE","COMMON_UPLOAD_START","COMMON_UPLOAD_PROGRESS","COMMON_UPLOAD_SUCCESS","COMMON_UPLOAD_FAILED","CHANGE","GROUP_CREATED","EventEmitter","_timeoutStore","Map","_targets","Set","_debugPrint","constructor","debugPrint","bindTarget","target","add","unbindTarget","delete","_dispatch","type","payload","dispatchEvent","CustomEvent","detail","copyPayload","emit","debounce","has","window","clearTimeout","get","timeout","timeoutId","setTimeout","set"],"sources":["/Users/kavinth/Documents/GitHub/Smart-Alert/Smart-Alert-new/frontend/node_modules/@uploadcare/file-uploader/blocks/UploadCtxProvider/EventEmitter.js"],"sourcesContent":["//  @ts-check\n\nconst DEFAULT_DEBOUNCE_TIMEOUT = 20;\n\nexport const EventType = Object.freeze({\n  FILE_ADDED: 'file-added',\n  FILE_REMOVED: 'file-removed',\n  FILE_UPLOAD_START: 'file-upload-start',\n  FILE_UPLOAD_PROGRESS: 'file-upload-progress',\n  FILE_UPLOAD_SUCCESS: 'file-upload-success',\n  FILE_UPLOAD_FAILED: 'file-upload-failed',\n  FILE_URL_CHANGED: 'file-url-changed',\n\n  MODAL_OPEN: 'modal-open',\n  MODAL_CLOSE: 'modal-close',\n  DONE_CLICK: 'done-click',\n  UPLOAD_CLICK: 'upload-click',\n  ACTIVITY_CHANGE: 'activity-change',\n\n  COMMON_UPLOAD_START: 'common-upload-start',\n  COMMON_UPLOAD_PROGRESS: 'common-upload-progress',\n  COMMON_UPLOAD_SUCCESS: 'common-upload-success',\n  COMMON_UPLOAD_FAILED: 'common-upload-failed',\n\n  CHANGE: 'change',\n  GROUP_CREATED: 'group-created',\n});\n\n/**\n * @typedef {{\n *   [EventType.FILE_ADDED]: import('../../index.js').OutputFileEntry<'idle'>;\n *   [EventType.FILE_REMOVED]: import('../../index.js').OutputFileEntry<'removed'>;\n *   [EventType.FILE_UPLOAD_START]: import('../../index.js').OutputFileEntry<'uploading'>;\n *   [EventType.FILE_UPLOAD_PROGRESS]: import('../../index.js').OutputFileEntry<'uploading'>;\n *   [EventType.FILE_UPLOAD_SUCCESS]: import('../../index.js').OutputFileEntry<'success'>;\n *   [EventType.FILE_UPLOAD_FAILED]: import('../../index.js').OutputFileEntry<'failed'>;\n *   [EventType.FILE_URL_CHANGED]: import('../../index.js').OutputFileEntry<'success'>;\n *   [EventType.MODAL_OPEN]: { modalId: import('../../abstract/ModalManager.js').ModalId };\n *   [EventType.MODAL_CLOSE]: { modalId: import('../../abstract/ModalManager.js').ModalId; hasActiveModals: boolean };\n *   [EventType.ACTIVITY_CHANGE]: {\n *     activity: import('../../abstract/ActivityBlock.js').ActivityType;\n *   };\n *   [EventType.UPLOAD_CLICK]: void;\n *   [EventType.DONE_CLICK]: import('../../index.js').OutputCollectionState;\n *   [EventType.COMMON_UPLOAD_START]: import('../../index.js').OutputCollectionState<'uploading'>;\n *   [EventType.COMMON_UPLOAD_PROGRESS]: import('../../index.js').OutputCollectionState<'uploading'>;\n *   [EventType.COMMON_UPLOAD_SUCCESS]: import('../../index.js').OutputCollectionState<'success'>;\n *   [EventType.COMMON_UPLOAD_FAILED]: import('../../index.js').OutputCollectionState<'failed'>;\n *   [EventType.CHANGE]: import('../../index.js').OutputCollectionState;\n *   [EventType.GROUP_CREATED]: import('../../index.js').OutputCollectionState<'success', 'has-group'>;\n * }} EventPayload\n */\n\nexport class EventEmitter {\n  /**\n   * @private\n   * @type {Map<string, number>}\n   */\n  _timeoutStore = new Map();\n\n  /**\n   * @private\n   * @type {Set<import('../../abstract/Block.js').Block>}\n   */\n  _targets = new Set();\n\n  /**\n   * @private\n   * @type {((...args: unknown[]) => void) | null}\n   */\n  _debugPrint = null;\n\n  /** @param {(...args: unknown[]) => void} debugPrint */\n  constructor(debugPrint) {\n    this._debugPrint = debugPrint;\n  }\n\n  /** @param {import('../../abstract/Block.js').Block} target */\n  bindTarget(target) {\n    this._targets.add(target);\n  }\n\n  /** @param {import('../../abstract/Block.js').Block} target */\n  unbindTarget(target) {\n    this._targets.delete(target);\n  }\n\n  /**\n   * @private\n   * @template {(typeof EventType)[keyof typeof EventType]} T\n   * @param {T} type\n   * @param {unknown} [payload]\n   */\n  _dispatch(type, payload) {\n    for (const target of this._targets) {\n      target.dispatchEvent(\n        new CustomEvent(type, {\n          detail: payload,\n        }),\n      );\n    }\n\n    this._debugPrint?.(() => {\n      const copyPayload = !!payload && typeof payload === 'object' ? { ...payload } : payload;\n      return [`event \"${type}\"`, copyPayload];\n    });\n  }\n\n  /**\n   * @template {(typeof EventType)[keyof typeof EventType]} T\n   * @template {boolean | number | undefined} TDebounce\n   * @param {T} type\n   * @param {TDebounce extends false | undefined ? unknown : () => unknown} [payload]\n   * @param {{ debounce?: TDebounce }} [options]\n   */\n  emit(type, payload, { debounce } = {}) {\n    if (typeof debounce !== 'number' && !debounce) {\n      this._dispatch(type, typeof payload === 'function' ? payload() : payload);\n      return;\n    }\n\n    if (this._timeoutStore.has(type)) {\n      window.clearTimeout(this._timeoutStore.get(type));\n    }\n    const timeout = typeof debounce === 'number' ? debounce : DEFAULT_DEBOUNCE_TIMEOUT;\n    const timeoutId = window.setTimeout(() => {\n      this._dispatch(type, typeof payload === 'function' ? payload() : payload);\n      this._timeoutStore.delete(type);\n    }, timeout);\n    this._timeoutStore.set(type, timeoutId);\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}