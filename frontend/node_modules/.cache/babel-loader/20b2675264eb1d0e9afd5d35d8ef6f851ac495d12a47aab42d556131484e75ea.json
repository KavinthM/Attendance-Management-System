{"ast":null,"code":"// @ts-check\nimport { BaseComponent, Data } from '@symbiotejs/symbiote';\nimport { initialConfig } from '../blocks/Config/initialConfig.js';\nimport { EventEmitter } from '../blocks/UploadCtxProvider/EventEmitter.js';\nimport { WindowHeightTracker } from '../utils/WindowHeightTracker.js';\nimport { extractFilename, extractCdnUrlModifiers, extractUuid } from '../utils/cdn-utils.js';\nimport { getLocaleDirection } from '../utils/getLocaleDirection.js';\nimport { getPluralForm } from '../utils/getPluralForm.js';\nimport { applyTemplateData, getPluralObjects } from '../utils/template-utils.js';\nimport { waitForAttribute } from '../utils/waitForAttribute.js';\nimport { blockCtx } from './CTX.js';\nimport { LocaleManager, localeStateKey } from './LocaleManager.js';\nimport { l10nProcessor } from './l10nProcessor.js';\nimport { sharedConfigKey } from './sharedConfigKey.js';\nimport { A11y } from './a11y.js';\nimport { ModalManager } from './ModalManager.js';\nimport { testModeProcessor } from './testModeProcessor.js';\nconst TAG_PREFIX = 'uc-';\n\n// @ts-ignore TODO: fix this\nexport class Block extends BaseComponent {\n  /** @type {string | null} */\n  static StateConsumerScope = null;\n\n  /** @type {string[]} */\n  static styleAttrs = [];\n\n  /** @protected */\n  requireCtxName = false;\n\n  /** @type {import('./ActivityBlock.js').ActivityType} */\n  activityType = null;\n  init$ = blockCtx();\n\n  /**\n   * @param {String} str\n   * @param {{ [key: string]: string | number }} variables\n   * @returns {String}\n   */\n  l10n(str, variables = {}) {\n    if (!str) {\n      return '';\n    }\n    let template = this.$[localeStateKey(str)] || str;\n    let pluralObjects = getPluralObjects(template);\n    for (let pluralObject of pluralObjects) {\n      variables[pluralObject.variable] = this.pluralize(pluralObject.pluralKey, Number(variables[pluralObject.countVariable]));\n    }\n    let result = applyTemplateData(template, variables);\n    return result;\n  }\n\n  /**\n   * @private\n   * @param {string} key\n   * @param {number} count\n   * @returns {string}\n   */\n  pluralize(key, count) {\n    const locale = this.l10n('locale-id') || 'en';\n    const pluralForm = getPluralForm(locale, count);\n    return this.l10n(`${key}__${pluralForm}`);\n  }\n\n  /**\n   * @param {string} key\n   * @param {() => void} resolver\n   * @protected\n   */\n  bindL10n(key, resolver) {\n    this.localeManager?.bindL10n(this, key, resolver);\n  }\n  constructor() {\n    super();\n    /** @type {Map<string, Set<{ remove: () => void }>>} */\n    this.l10nProcessorSubs = new Map();\n    // @ts-ignore TODO: fix this\n    this.addTemplateProcessor(l10nProcessor);\n    // @ts-ignore TODO: fix this\n    this.addTemplateProcessor(testModeProcessor);\n  }\n\n  /**\n   * @param {Parameters<import('../blocks/UploadCtxProvider/EventEmitter.js').EventEmitter['emit']>[0]} type\n   * @param {Parameters<import('../blocks/UploadCtxProvider/EventEmitter.js').EventEmitter['emit']>[1]} [payload]\n   * @param {Parameters<import('../blocks/UploadCtxProvider/EventEmitter.js').EventEmitter['emit']>[2]} [options]\n   */\n  emit(type, payload, options) {\n    /** @type {import('../blocks/UploadCtxProvider/EventEmitter.js').EventEmitter} */\n    const eventEmitter = this.has('*eventEmitter') && this.$['*eventEmitter'];\n    if (!eventEmitter) {\n      return;\n    }\n    eventEmitter.emit(type, payload, options);\n  }\n\n  /**\n   * @param {(block: Block) => boolean} callback\n   * @returns {Boolean}\n   */\n  hasBlockInCtx(callback) {\n    for (let block of this.blocksRegistry) {\n      if (callback(block)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * @param {String} prop\n   * @param {any} newVal\n   */\n  setOrAddState(prop, newVal) {\n    this.add$({\n      [prop]: newVal\n    }, true);\n  }\n\n  /** @protected */\n  connectedCallback() {\n    const styleAttrs = /** @type {typeof Block} */this.constructor.styleAttrs;\n    styleAttrs.forEach(attr => {\n      this.setAttribute(attr, '');\n    });\n    if (this.hasAttribute('retpl')) {\n      // @ts-ignore TODO: fix this\n      this.constructor['template'] = null;\n      this.processInnerHtml = true;\n    }\n    if (this.requireCtxName) {\n      waitForAttribute({\n        element: this,\n        attribute: 'ctx-name',\n        onSuccess: () => {\n          // async wait for ctx-name attribute to be set, needed for Angular because it sets attributes after mount\n          // TODO: should be moved to the symbiote core\n          super.connectedCallback();\n        },\n        onTimeout: () => {\n          console.error('Attribute `ctx-name` is required and it is not set.');\n        }\n      });\n    } else {\n      super.connectedCallback();\n    }\n    WindowHeightTracker.registerClient(this);\n  }\n\n  /** @protected */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    WindowHeightTracker.unregisterClient(this);\n  }\n\n  /** @protected */\n  initCallback() {\n    if (!this.has('*blocksRegistry')) {\n      this.add('*blocksRegistry', new Set());\n    }\n    let blocksRegistry = this.$['*blocksRegistry'];\n    blocksRegistry.add(this);\n    if (!this.has('*eventEmitter')) {\n      this.add('*eventEmitter', new EventEmitter(this.debugPrint.bind(this)));\n    }\n    if (!this.has('*localeManager')) {\n      this.add('*localeManager', new LocaleManager(this));\n    }\n    if (!this.has('*a11y')) {\n      this.add('*a11y', new A11y());\n    }\n    if (!this.has('*modalManager')) {\n      this.add('*modalManager', new ModalManager(this));\n    }\n    this.sub(localeStateKey('locale-id'), localeId => {\n      const direction = getLocaleDirection(localeId);\n      this.style.direction = direction === 'ltr' ? '' : direction;\n    });\n    this.subConfigValue('testMode', testMode => {\n      if (!testMode || !this.testId) {\n        this.removeAttribute('data-testid');\n        return;\n      }\n      this.setAttribute('data-testid', this.testId);\n    });\n  }\n  get testId() {\n    const testId = window.customElements.getName(/** @type {CustomElementConstructor} */this.constructor);\n    return testId;\n  }\n\n  /**\n   * @returns {ModalManager}\n   * @public\n   */\n  get modalManager() {\n    return this.has('*modalManager') && this.$['*modalManager'];\n  }\n\n  /**\n   * @private\n   * @returns {LocaleManager | null}\n   */\n  get localeManager() {\n    return this.has('*localeManager') ? this.$['*localeManager'] : null;\n  }\n\n  /**\n   * @returns {A11y | null}\n   * @protected\n   */\n  get a11y() {\n    return this.has('*a11y') ? this.$['*a11y'] : null;\n  }\n\n  /** @type {Set<Block>} */\n  get blocksRegistry() {\n    return this.$['*blocksRegistry'];\n  }\n\n  /** @protected */\n  destroyCallback() {\n    super.destroyCallback();\n    let blocksRegistry = this.blocksRegistry;\n    blocksRegistry?.delete(this);\n    this.localeManager?.destroyL10nBindings(this);\n    this.l10nProcessorSubs = new Map();\n\n    // Destroy local context\n    // TODO: this should be done inside symbiote\n    Data.deleteCtx(this);\n    if (blocksRegistry?.size === 0) {\n      setTimeout(() => {\n        // Destroy global context after all blocks are destroyed and all callbacks are run\n        this.destroyCtxCallback();\n      }, 0);\n    }\n  }\n\n  /**\n   * Called when the last block is removed from the context. Note that inheritors must run their callback before that.\n   *\n   * @protected\n   */\n  destroyCtxCallback() {\n    Data.deleteCtx(this.ctxName);\n    this.localeManager?.destroy();\n    this.modalManager && this.modalManager?.destroy();\n  }\n\n  /**\n   * @param {String} url\n   * @returns {Promise<String>}\n   * @protected\n   */\n  async proxyUrl(url) {\n    if (this.cfg.secureDeliveryProxy && this.cfg.secureDeliveryProxyUrlResolver) {\n      console.warn('Both secureDeliveryProxy and secureDeliveryProxyUrlResolver are set. The secureDeliveryProxyUrlResolver will be used.');\n    }\n    if (this.cfg.secureDeliveryProxyUrlResolver) {\n      try {\n        return await this.cfg.secureDeliveryProxyUrlResolver(url, {\n          uuid: extractUuid(url),\n          cdnUrlModifiers: extractCdnUrlModifiers(url),\n          fileName: extractFilename(url)\n        });\n      } catch (err) {\n        console.error('Failed to resolve secure delivery proxy URL. Falling back to the default URL.', err);\n        return url;\n      }\n    }\n    if (this.cfg.secureDeliveryProxy) {\n      return applyTemplateData(this.cfg.secureDeliveryProxy, {\n        previewUrl: url\n      }, {\n        transform: value => window.encodeURIComponent(value)\n      });\n    }\n    return url;\n  }\n\n  /** @returns {import('../types').ConfigType} } */\n  get cfg() {\n    if (!this.__cfgProxy) {\n      let o = Object.create(null);\n      /** @private */\n      this.__cfgProxy = new Proxy(o, {\n        set: (obj, key, value) => {\n          if (typeof key !== 'string') {\n            return false;\n          }\n          const sharedKey = sharedConfigKey(/** @type {keyof import('../types').ConfigType} */key);\n          if (!this.has(sharedKey)) {\n            this.add(sharedKey, initialConfig[(/** @type {keyof import('../types').ConfigType} */key)]);\n          }\n          this.$[sharedKey] = value;\n          return true;\n        },\n        /**\n         * @param {never} obj\n         * @param {keyof import('../types').ConfigType} key\n         */\n        get: (obj, key) => {\n          const sharedKey = sharedConfigKey(key);\n          if (!this.has(sharedKey)) {\n            this.add(sharedKey, initialConfig[key]);\n          }\n          return this.$[sharedConfigKey(key)];\n        }\n      });\n    }\n    return this.__cfgProxy;\n  }\n\n  /**\n   * @template {keyof import('../types').ConfigType} T\n   * @param {T} key\n   * @param {(value: import('../types').ConfigType[T]) => void} callback\n   */\n  subConfigValue(key, callback) {\n    const sharedKey = sharedConfigKey(key);\n    if (!this.has(sharedKey)) {\n      this.add(sharedKey, initialConfig[key]);\n    }\n    this.sub(sharedKey, callback);\n  }\n\n  /** @param {unknown[]} args */\n  debugPrint(...args) {\n    if (!this.cfg.debug) {\n      return;\n    }\n    let consoleArgs = args;\n    if (typeof args?.[0] === 'function') {\n      const resolver = args[0];\n      consoleArgs = resolver();\n    }\n    console.log(`[${this.ctxName}]`, ...consoleArgs);\n  }\n\n  /** @param {String} [name] */\n  static reg(name) {\n    if (!name) {\n      super.reg();\n      return;\n    }\n    if (name.startsWith(TAG_PREFIX)) {\n      super.reg(name);\n    }\n  }\n}\nexport { BaseComponent };","map":{"version":3,"names":["BaseComponent","Data","initialConfig","EventEmitter","WindowHeightTracker","extractFilename","extractCdnUrlModifiers","extractUuid","getLocaleDirection","getPluralForm","applyTemplateData","getPluralObjects","waitForAttribute","blockCtx","LocaleManager","localeStateKey","l10nProcessor","sharedConfigKey","A11y","ModalManager","testModeProcessor","TAG_PREFIX","Block","StateConsumerScope","styleAttrs","requireCtxName","activityType","init$","l10n","str","variables","template","$","pluralObjects","pluralObject","variable","pluralize","pluralKey","Number","countVariable","result","key","count","locale","pluralForm","bindL10n","resolver","localeManager","constructor","l10nProcessorSubs","Map","addTemplateProcessor","emit","type","payload","options","eventEmitter","has","hasBlockInCtx","callback","block","blocksRegistry","setOrAddState","prop","newVal","add$","connectedCallback","forEach","attr","setAttribute","hasAttribute","processInnerHtml","element","attribute","onSuccess","onTimeout","console","error","registerClient","disconnectedCallback","unregisterClient","initCallback","add","Set","debugPrint","bind","sub","localeId","direction","style","subConfigValue","testMode","testId","removeAttribute","window","customElements","getName","modalManager","a11y","destroyCallback","delete","destroyL10nBindings","deleteCtx","size","setTimeout","destroyCtxCallback","ctxName","destroy","proxyUrl","url","cfg","secureDeliveryProxy","secureDeliveryProxyUrlResolver","warn","uuid","cdnUrlModifiers","fileName","err","previewUrl","transform","value","encodeURIComponent","__cfgProxy","o","Object","create","Proxy","set","obj","sharedKey","get","args","debug","consoleArgs","log","reg","name","startsWith"],"sources":["/Users/kavinth/Documents/GitHub/Smart-Alert/Smart-Alert-new/frontend/node_modules/@uploadcare/file-uploader/abstract/Block.js"],"sourcesContent":["// @ts-check\nimport { BaseComponent, Data } from '@symbiotejs/symbiote';\nimport { initialConfig } from '../blocks/Config/initialConfig.js';\nimport { EventEmitter } from '../blocks/UploadCtxProvider/EventEmitter.js';\nimport { WindowHeightTracker } from '../utils/WindowHeightTracker.js';\nimport { extractFilename, extractCdnUrlModifiers, extractUuid } from '../utils/cdn-utils.js';\nimport { getLocaleDirection } from '../utils/getLocaleDirection.js';\nimport { getPluralForm } from '../utils/getPluralForm.js';\nimport { applyTemplateData, getPluralObjects } from '../utils/template-utils.js';\nimport { waitForAttribute } from '../utils/waitForAttribute.js';\nimport { blockCtx } from './CTX.js';\nimport { LocaleManager, localeStateKey } from './LocaleManager.js';\nimport { l10nProcessor } from './l10nProcessor.js';\nimport { sharedConfigKey } from './sharedConfigKey.js';\nimport { A11y } from './a11y.js';\nimport { ModalManager } from './ModalManager.js';\nimport { testModeProcessor } from './testModeProcessor.js';\n\nconst TAG_PREFIX = 'uc-';\n\n// @ts-ignore TODO: fix this\nexport class Block extends BaseComponent {\n  /** @type {string | null} */\n  static StateConsumerScope = null;\n\n  /** @type {string[]} */\n  static styleAttrs = [];\n\n  /** @protected */\n  requireCtxName = false;\n\n  /** @type {import('./ActivityBlock.js').ActivityType} */\n  activityType = null;\n\n  init$ = blockCtx();\n\n  /**\n   * @param {String} str\n   * @param {{ [key: string]: string | number }} variables\n   * @returns {String}\n   */\n  l10n(str, variables = {}) {\n    if (!str) {\n      return '';\n    }\n    let template = this.$[localeStateKey(str)] || str;\n    let pluralObjects = getPluralObjects(template);\n    for (let pluralObject of pluralObjects) {\n      variables[pluralObject.variable] = this.pluralize(\n        pluralObject.pluralKey,\n        Number(variables[pluralObject.countVariable]),\n      );\n    }\n    let result = applyTemplateData(template, variables);\n    return result;\n  }\n\n  /**\n   * @private\n   * @param {string} key\n   * @param {number} count\n   * @returns {string}\n   */\n  pluralize(key, count) {\n    const locale = this.l10n('locale-id') || 'en';\n    const pluralForm = getPluralForm(locale, count);\n    return this.l10n(`${key}__${pluralForm}`);\n  }\n\n  /**\n   * @param {string} key\n   * @param {() => void} resolver\n   * @protected\n   */\n  bindL10n(key, resolver) {\n    this.localeManager?.bindL10n(this, key, resolver);\n  }\n\n  constructor() {\n    super();\n    /** @type {Map<string, Set<{ remove: () => void }>>} */\n    this.l10nProcessorSubs = new Map();\n    // @ts-ignore TODO: fix this\n    this.addTemplateProcessor(l10nProcessor);\n    // @ts-ignore TODO: fix this\n    this.addTemplateProcessor(testModeProcessor);\n  }\n\n  /**\n   * @param {Parameters<import('../blocks/UploadCtxProvider/EventEmitter.js').EventEmitter['emit']>[0]} type\n   * @param {Parameters<import('../blocks/UploadCtxProvider/EventEmitter.js').EventEmitter['emit']>[1]} [payload]\n   * @param {Parameters<import('../blocks/UploadCtxProvider/EventEmitter.js').EventEmitter['emit']>[2]} [options]\n   */\n  emit(type, payload, options) {\n    /** @type {import('../blocks/UploadCtxProvider/EventEmitter.js').EventEmitter} */\n    const eventEmitter = this.has('*eventEmitter') && this.$['*eventEmitter'];\n    if (!eventEmitter) {\n      return;\n    }\n    eventEmitter.emit(type, payload, options);\n  }\n\n  /**\n   * @param {(block: Block) => boolean} callback\n   * @returns {Boolean}\n   */\n  hasBlockInCtx(callback) {\n    for (let block of this.blocksRegistry) {\n      if (callback(block)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * @param {String} prop\n   * @param {any} newVal\n   */\n  setOrAddState(prop, newVal) {\n    this.add$(\n      {\n        [prop]: newVal,\n      },\n      true,\n    );\n  }\n\n  /** @protected */\n  connectedCallback() {\n    const styleAttrs = /** @type {typeof Block} */ (this.constructor).styleAttrs;\n    styleAttrs.forEach((attr) => {\n      this.setAttribute(attr, '');\n    });\n\n    if (this.hasAttribute('retpl')) {\n      // @ts-ignore TODO: fix this\n      this.constructor['template'] = null;\n      this.processInnerHtml = true;\n    }\n    if (this.requireCtxName) {\n      waitForAttribute({\n        element: this,\n        attribute: 'ctx-name',\n        onSuccess: () => {\n          // async wait for ctx-name attribute to be set, needed for Angular because it sets attributes after mount\n          // TODO: should be moved to the symbiote core\n          super.connectedCallback();\n        },\n        onTimeout: () => {\n          console.error('Attribute `ctx-name` is required and it is not set.');\n        },\n      });\n    } else {\n      super.connectedCallback();\n    }\n\n    WindowHeightTracker.registerClient(this);\n  }\n\n  /** @protected */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    WindowHeightTracker.unregisterClient(this);\n  }\n\n  /** @protected */\n  initCallback() {\n    if (!this.has('*blocksRegistry')) {\n      this.add('*blocksRegistry', new Set());\n    }\n\n    let blocksRegistry = this.$['*blocksRegistry'];\n    blocksRegistry.add(this);\n\n    if (!this.has('*eventEmitter')) {\n      this.add('*eventEmitter', new EventEmitter(this.debugPrint.bind(this)));\n    }\n    if (!this.has('*localeManager')) {\n      this.add('*localeManager', new LocaleManager(this));\n    }\n\n    if (!this.has('*a11y')) {\n      this.add('*a11y', new A11y());\n    }\n\n    if (!this.has('*modalManager')) {\n      this.add('*modalManager', new ModalManager(this));\n    }\n\n    this.sub(localeStateKey('locale-id'), (localeId) => {\n      const direction = getLocaleDirection(localeId);\n      this.style.direction = direction === 'ltr' ? '' : direction;\n    });\n\n    this.subConfigValue('testMode', (testMode) => {\n      if (!testMode || !this.testId) {\n        this.removeAttribute('data-testid');\n        return;\n      }\n      this.setAttribute('data-testid', this.testId);\n    });\n  }\n\n  get testId() {\n    const testId = window.customElements.getName(/** @type {CustomElementConstructor} */ (this.constructor));\n    return testId;\n  }\n\n  /**\n   * @returns {ModalManager}\n   * @public\n   */\n  get modalManager() {\n    return this.has('*modalManager') && this.$['*modalManager'];\n  }\n\n  /**\n   * @private\n   * @returns {LocaleManager | null}\n   */\n  get localeManager() {\n    return this.has('*localeManager') ? this.$['*localeManager'] : null;\n  }\n\n  /**\n   * @returns {A11y | null}\n   * @protected\n   */\n  get a11y() {\n    return this.has('*a11y') ? this.$['*a11y'] : null;\n  }\n\n  /** @type {Set<Block>} */\n  get blocksRegistry() {\n    return this.$['*blocksRegistry'];\n  }\n\n  /** @protected */\n  destroyCallback() {\n    super.destroyCallback();\n\n    let blocksRegistry = this.blocksRegistry;\n    blocksRegistry?.delete(this);\n\n    this.localeManager?.destroyL10nBindings(this);\n    this.l10nProcessorSubs = new Map();\n\n    // Destroy local context\n    // TODO: this should be done inside symbiote\n    Data.deleteCtx(this);\n\n    if (blocksRegistry?.size === 0) {\n      setTimeout(() => {\n        // Destroy global context after all blocks are destroyed and all callbacks are run\n        this.destroyCtxCallback();\n      }, 0);\n    }\n  }\n\n  /**\n   * Called when the last block is removed from the context. Note that inheritors must run their callback before that.\n   *\n   * @protected\n   */\n  destroyCtxCallback() {\n    Data.deleteCtx(this.ctxName);\n\n    this.localeManager?.destroy();\n\n    this.modalManager && this.modalManager?.destroy();\n  }\n\n  /**\n   * @param {String} url\n   * @returns {Promise<String>}\n   * @protected\n   */\n  async proxyUrl(url) {\n    if (this.cfg.secureDeliveryProxy && this.cfg.secureDeliveryProxyUrlResolver) {\n      console.warn(\n        'Both secureDeliveryProxy and secureDeliveryProxyUrlResolver are set. The secureDeliveryProxyUrlResolver will be used.',\n      );\n    }\n    if (this.cfg.secureDeliveryProxyUrlResolver) {\n      try {\n        return await this.cfg.secureDeliveryProxyUrlResolver(url, {\n          uuid: extractUuid(url),\n          cdnUrlModifiers: extractCdnUrlModifiers(url),\n          fileName: extractFilename(url),\n        });\n      } catch (err) {\n        console.error('Failed to resolve secure delivery proxy URL. Falling back to the default URL.', err);\n        return url;\n      }\n    }\n    if (this.cfg.secureDeliveryProxy) {\n      return applyTemplateData(\n        this.cfg.secureDeliveryProxy,\n        { previewUrl: url },\n        { transform: (value) => window.encodeURIComponent(value) },\n      );\n    }\n    return url;\n  }\n\n  /** @returns {import('../types').ConfigType} } */\n  get cfg() {\n    if (!this.__cfgProxy) {\n      let o = Object.create(null);\n      /** @private */\n      this.__cfgProxy = new Proxy(o, {\n        set: (obj, key, value) => {\n          if (typeof key !== 'string') {\n            return false;\n          }\n          const sharedKey = sharedConfigKey(/** @type {keyof import('../types').ConfigType} */ (key));\n          if (!this.has(sharedKey)) {\n            this.add(sharedKey, initialConfig[/** @type {keyof import('../types').ConfigType} */ (key)]);\n          }\n          this.$[sharedKey] = value;\n          return true;\n        },\n        /**\n         * @param {never} obj\n         * @param {keyof import('../types').ConfigType} key\n         */\n        get: (obj, key) => {\n          const sharedKey = sharedConfigKey(key);\n          if (!this.has(sharedKey)) {\n            this.add(sharedKey, initialConfig[key]);\n          }\n          return this.$[sharedConfigKey(key)];\n        },\n      });\n    }\n    return this.__cfgProxy;\n  }\n\n  /**\n   * @template {keyof import('../types').ConfigType} T\n   * @param {T} key\n   * @param {(value: import('../types').ConfigType[T]) => void} callback\n   */\n  subConfigValue(key, callback) {\n    const sharedKey = sharedConfigKey(key);\n    if (!this.has(sharedKey)) {\n      this.add(sharedKey, initialConfig[key]);\n    }\n    this.sub(sharedKey, callback);\n  }\n\n  /** @param {unknown[]} args */\n  debugPrint(...args) {\n    if (!this.cfg.debug) {\n      return;\n    }\n    let consoleArgs = args;\n    if (typeof args?.[0] === 'function') {\n      const resolver = args[0];\n      consoleArgs = resolver();\n    }\n    console.log(`[${this.ctxName}]`, ...consoleArgs);\n  }\n\n  /** @param {String} [name] */\n  static reg(name) {\n    if (!name) {\n      super.reg();\n      return;\n    }\n    if (name.startsWith(TAG_PREFIX)) {\n      super.reg(name);\n    }\n  }\n}\n\nexport { BaseComponent };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}