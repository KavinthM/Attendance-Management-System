{"ast":null,"code":"// @ts-check\nimport { ActivityBlock } from '../../abstract/ActivityBlock.js';\nimport { UploaderBlock } from '../../abstract/UploaderBlock.js';\nimport { EventType } from '../UploadCtxProvider/EventEmitter.js';\nimport { throttle } from '../utils/throttle.js';\n\n/** @typedef {'grid' | 'list'} FilesViewMode */\n\n/**\n * @typedef {{\n *   total: number;\n *   succeed: number;\n *   uploading: number;\n *   failed: number;\n * }} Summary\n */\n\nexport class UploadList extends UploaderBlock {\n  // Context owner should have access to CSS l10n\n  // TODO: We need to move away l10n from CSS\n  couldBeCtxOwner = true;\n  historyTracked = true;\n  activityType = ActivityBlock.activities.UPLOAD_LIST;\n  constructor() {\n    super();\n    this.init$ = {\n      ...this.init$,\n      doneBtnVisible: false,\n      doneBtnEnabled: false,\n      uploadBtnVisible: false,\n      addMoreBtnVisible: false,\n      addMoreBtnEnabled: false,\n      headerText: '',\n      commonErrorMessage: '',\n      hasFiles: false,\n      onAdd: () => {\n        this.api.initFlow(true);\n      },\n      onUpload: () => {\n        this.emit(EventType.UPLOAD_CLICK);\n        this.api.uploadAll();\n        this._throttledHandleCollectionUpdate();\n      },\n      onDone: () => {\n        this.emit(EventType.DONE_CLICK, this.api.getOutputCollectionState());\n        this.api.doneFlow();\n      },\n      onCancel: () => {\n        this.uploadCollection.clearAll();\n      }\n    };\n  }\n\n  /** @private */\n  _throttledHandleCollectionUpdate = throttle(() => {\n    if (!this.isConnected) {\n      return;\n    }\n    this._updateUploadsState();\n    if (!this.couldOpenActivity && this.$['*currentActivity'] === this.activityType) {\n      this.historyBack();\n    }\n  }, 300);\n\n  /** @private */\n  _updateUploadsState() {\n    const collectionState = this.api.getOutputCollectionState();\n    /** @type {Summary} */\n    const summary = {\n      total: collectionState.totalCount,\n      succeed: collectionState.successCount,\n      uploading: collectionState.uploadingCount,\n      failed: collectionState.failedCount\n    };\n    const fitCountRestrictions = !collectionState.errors.some(err => err.type === 'TOO_MANY_FILES' || err.type === 'TOO_FEW_FILES');\n    const tooMany = collectionState.errors.some(err => err.type === 'TOO_MANY_FILES');\n    const exact = collectionState.totalCount === (this.cfg.multiple ? this.cfg.multipleMax : 1);\n    const validationOk = summary.failed === 0 && collectionState.errors.length === 0;\n    let uploadBtnVisible = false;\n    let allDone = false;\n    let doneBtnEnabled = false;\n    const readyToUpload = summary.total - summary.succeed - summary.uploading - summary.failed;\n    if (readyToUpload > 0 && fitCountRestrictions) {\n      uploadBtnVisible = true;\n    } else {\n      allDone = true;\n      const groupOk = this.cfg.groupOutput ? !!collectionState.group : true;\n      doneBtnEnabled = summary.total === summary.succeed && fitCountRestrictions && validationOk && groupOk;\n    }\n    this.set$({\n      doneBtnVisible: allDone,\n      doneBtnEnabled: doneBtnEnabled,\n      uploadBtnVisible,\n      addMoreBtnEnabled: summary.total === 0 || !tooMany && !exact,\n      addMoreBtnVisible: !exact || this.cfg.multiple\n    });\n    this.bindL10n('headerText', () => this._getHeaderText(summary));\n  }\n\n  /**\n   * @private\n   * @param {Summary} summary\n   */\n  _getHeaderText(summary) {\n    /** @param {keyof Summary} status */\n    const localizedText = status => {\n      const count = summary[status];\n      return this.l10n(`header-${status}`, {\n        count: count\n      });\n    };\n    if (summary.uploading > 0) {\n      return localizedText('uploading');\n    }\n    if (summary.failed > 0) {\n      return localizedText('failed');\n    }\n    if (summary.succeed > 0) {\n      return localizedText('succeed');\n    }\n    return localizedText('total');\n  }\n  get couldOpenActivity() {\n    return this.cfg.showEmptyList || this.uploadCollection.size > 0;\n  }\n  initCallback() {\n    super.initCallback();\n    this.registerActivity(this.activityType);\n    this.subConfigValue('multiple', this._throttledHandleCollectionUpdate);\n    this.subConfigValue('multipleMin', this._throttledHandleCollectionUpdate);\n    this.subConfigValue('multipleMax', this._throttledHandleCollectionUpdate);\n    this.sub('*groupInfo', groupInfo => {\n      if (groupInfo) {\n        this._throttledHandleCollectionUpdate();\n      }\n    });\n    this.subConfigValue('filesViewMode', mode => {\n      this.setAttribute('mode', mode);\n    });\n    this.sub('*currentActivity', currentActivity => {\n      if (!this.couldOpenActivity && currentActivity === this.activityType) {\n        this.$['*currentActivity'] = this.initActivity;\n      }\n    });\n\n    // TODO: could be performance issue on many files\n    // there is no need to update buttons state on every progress tick\n    this.uploadCollection.observeProperties(this._throttledHandleCollectionUpdate);\n    this.sub('*uploadList', list => {\n      this._throttledHandleCollectionUpdate();\n      this.set$({\n        hasFiles: list.length > 0\n      });\n      if (!this.cfg.confirmUpload) {\n        this.api.uploadAll();\n      }\n    }, false);\n    this.sub('*collectionErrors', /** @param {import('../../types').OutputError<import('../../types').OutputCollectionErrorType>[]} errors */\n    errors => {\n      const firstError = errors.filter(err => err.type !== 'SOME_FILES_HAS_ERRORS')[0];\n      if (!firstError) {\n        this.set$({\n          commonErrorMessage: null\n        });\n        return;\n      }\n      this.set$({\n        commonErrorMessage: firstError.message\n      });\n    });\n  }\n  destroyCallback() {\n    super.destroyCallback();\n    this.uploadCollection.unobserveProperties(this._throttledHandleCollectionUpdate);\n  }\n}\nUploadList.template = /* HTML */`\n  <uc-activity-header>\n    <span aria-live=\"polite\" class=\"uc-header-text\">{{headerText}}</span>\n    <button\n      type=\"button\"\n      class=\"uc-mini-btn uc-close-btn\"\n      set=\"onclick: *closeModal\"\n      l10n=\"@title:a11y-activity-header-button-close;@aria-label:a11y-activity-header-button-close\"\n    >\n      <uc-icon name=\"close\"></uc-icon>\n    </button>\n  </uc-activity-header>\n\n  <div class=\"uc-no-files\" set=\"@hidden: hasFiles\">\n    <slot name=\"empty\"><span l10n=\"no-files\"></span></slot>\n  </div>\n\n  <div class=\"uc-files\">\n    <div class=\"uc-files-wrapper\" repeat=\"*uploadList\" repeat-item-tag=\"uc-file-item\"></div>\n    <button\n      type=\"button\"\n      class=\"uc-add-more-btn uc-secondary-btn\"\n      set=\"onclick: onAdd; @disabled: !addMoreBtnEnabled; @hidden: !addMoreBtnVisible\"\n    >\n      <uc-icon name=\"add\"></uc-icon><span l10n=\"add-more\"></span>\n    </button>\n  </div>\n\n  <div class=\"uc-common-error\" set=\"@hidden: !commonErrorMessage; textContent: commonErrorMessage;\"></div>\n\n  <div class=\"uc-toolbar\">\n    <button type=\"button\" class=\"uc-cancel-btn uc-secondary-btn\" set=\"onclick: onCancel;\" l10n=\"clear\"></button>\n    <div class=\"uc-toolbar-spacer\"></div>\n    <button\n      type=\"button\"\n      class=\"uc-add-more-btn uc-secondary-btn\"\n      set=\"onclick: onAdd; @disabled: !addMoreBtnEnabled; @hidden: !addMoreBtnVisible\"\n    >\n      <uc-icon name=\"add\"></uc-icon><span l10n=\"add-more\"></span>\n    </button>\n    <button\n      type=\"button\"\n      class=\"uc-upload-btn uc-primary-btn\"\n      set=\"@hidden: !uploadBtnVisible; onclick: onUpload;\"\n      l10n=\"upload\"\n    ></button>\n    <button\n      type=\"button\"\n      class=\"uc-done-btn uc-primary-btn\"\n      set=\"@hidden: !doneBtnVisible; onclick: onDone;  @disabled: !doneBtnEnabled\"\n      l10n=\"done\"\n    ></button>\n  </div>\n\n  <uc-drop-area ghost></uc-drop-area>\n`;","map":{"version":3,"names":["ActivityBlock","UploaderBlock","EventType","throttle","UploadList","couldBeCtxOwner","historyTracked","activityType","activities","UPLOAD_LIST","constructor","init$","doneBtnVisible","doneBtnEnabled","uploadBtnVisible","addMoreBtnVisible","addMoreBtnEnabled","headerText","commonErrorMessage","hasFiles","onAdd","api","initFlow","onUpload","emit","UPLOAD_CLICK","uploadAll","_throttledHandleCollectionUpdate","onDone","DONE_CLICK","getOutputCollectionState","doneFlow","onCancel","uploadCollection","clearAll","isConnected","_updateUploadsState","couldOpenActivity","$","historyBack","collectionState","summary","total","totalCount","succeed","successCount","uploading","uploadingCount","failed","failedCount","fitCountRestrictions","errors","some","err","type","tooMany","exact","cfg","multiple","multipleMax","validationOk","length","allDone","readyToUpload","groupOk","groupOutput","group","set$","bindL10n","_getHeaderText","localizedText","status","count","l10n","showEmptyList","size","initCallback","registerActivity","subConfigValue","sub","groupInfo","mode","setAttribute","currentActivity","initActivity","observeProperties","list","confirmUpload","firstError","filter","message","destroyCallback","unobserveProperties","template"],"sources":["/Users/kavinth/Documents/GitHub/Smart-Alert/Smart-Alert-new/frontend/node_modules/@uploadcare/file-uploader/blocks/UploadList/UploadList.js"],"sourcesContent":["// @ts-check\nimport { ActivityBlock } from '../../abstract/ActivityBlock.js';\nimport { UploaderBlock } from '../../abstract/UploaderBlock.js';\nimport { EventType } from '../UploadCtxProvider/EventEmitter.js';\nimport { throttle } from '../utils/throttle.js';\n\n/** @typedef {'grid' | 'list'} FilesViewMode */\n\n/**\n * @typedef {{\n *   total: number;\n *   succeed: number;\n *   uploading: number;\n *   failed: number;\n * }} Summary\n */\n\nexport class UploadList extends UploaderBlock {\n  // Context owner should have access to CSS l10n\n  // TODO: We need to move away l10n from CSS\n  couldBeCtxOwner = true;\n  historyTracked = true;\n  activityType = ActivityBlock.activities.UPLOAD_LIST;\n\n  constructor() {\n    super();\n\n    this.init$ = {\n      ...this.init$,\n      doneBtnVisible: false,\n      doneBtnEnabled: false,\n      uploadBtnVisible: false,\n      addMoreBtnVisible: false,\n      addMoreBtnEnabled: false,\n      headerText: '',\n      commonErrorMessage: '',\n\n      hasFiles: false,\n      onAdd: () => {\n        this.api.initFlow(true);\n      },\n      onUpload: () => {\n        this.emit(EventType.UPLOAD_CLICK);\n        this.api.uploadAll();\n        this._throttledHandleCollectionUpdate();\n      },\n      onDone: () => {\n        this.emit(EventType.DONE_CLICK, this.api.getOutputCollectionState());\n        this.api.doneFlow();\n      },\n      onCancel: () => {\n        this.uploadCollection.clearAll();\n      },\n    };\n  }\n\n  /** @private */\n  _throttledHandleCollectionUpdate = throttle(() => {\n    if (!this.isConnected) {\n      return;\n    }\n    this._updateUploadsState();\n\n    if (!this.couldOpenActivity && this.$['*currentActivity'] === this.activityType) {\n      this.historyBack();\n    }\n  }, 300);\n\n  /** @private */\n  _updateUploadsState() {\n    const collectionState = this.api.getOutputCollectionState();\n    /** @type {Summary} */\n    const summary = {\n      total: collectionState.totalCount,\n      succeed: collectionState.successCount,\n      uploading: collectionState.uploadingCount,\n      failed: collectionState.failedCount,\n    };\n    const fitCountRestrictions = !collectionState.errors.some(\n      (err) => err.type === 'TOO_MANY_FILES' || err.type === 'TOO_FEW_FILES',\n    );\n    const tooMany = collectionState.errors.some((err) => err.type === 'TOO_MANY_FILES');\n    const exact = collectionState.totalCount === (this.cfg.multiple ? this.cfg.multipleMax : 1);\n    const validationOk = summary.failed === 0 && collectionState.errors.length === 0;\n    let uploadBtnVisible = false;\n    let allDone = false;\n    let doneBtnEnabled = false;\n\n    const readyToUpload = summary.total - summary.succeed - summary.uploading - summary.failed;\n    if (readyToUpload > 0 && fitCountRestrictions) {\n      uploadBtnVisible = true;\n    } else {\n      allDone = true;\n      const groupOk = this.cfg.groupOutput ? !!collectionState.group : true;\n      doneBtnEnabled = summary.total === summary.succeed && fitCountRestrictions && validationOk && groupOk;\n    }\n\n    this.set$({\n      doneBtnVisible: allDone,\n      doneBtnEnabled: doneBtnEnabled,\n\n      uploadBtnVisible,\n\n      addMoreBtnEnabled: summary.total === 0 || (!tooMany && !exact),\n      addMoreBtnVisible: !exact || this.cfg.multiple,\n    });\n\n    this.bindL10n('headerText', () => this._getHeaderText(summary));\n  }\n\n  /**\n   * @private\n   * @param {Summary} summary\n   */\n  _getHeaderText(summary) {\n    /** @param {keyof Summary} status */\n    const localizedText = (status) => {\n      const count = summary[status];\n      return this.l10n(`header-${status}`, {\n        count: count,\n      });\n    };\n    if (summary.uploading > 0) {\n      return localizedText('uploading');\n    }\n    if (summary.failed > 0) {\n      return localizedText('failed');\n    }\n    if (summary.succeed > 0) {\n      return localizedText('succeed');\n    }\n\n    return localizedText('total');\n  }\n\n  get couldOpenActivity() {\n    return this.cfg.showEmptyList || this.uploadCollection.size > 0;\n  }\n\n  initCallback() {\n    super.initCallback();\n\n    this.registerActivity(this.activityType);\n\n    this.subConfigValue('multiple', this._throttledHandleCollectionUpdate);\n    this.subConfigValue('multipleMin', this._throttledHandleCollectionUpdate);\n    this.subConfigValue('multipleMax', this._throttledHandleCollectionUpdate);\n    this.sub('*groupInfo', (groupInfo) => {\n      if (groupInfo) {\n        this._throttledHandleCollectionUpdate();\n      }\n    });\n\n    this.subConfigValue('filesViewMode', (mode) => {\n      this.setAttribute('mode', mode);\n    });\n\n    this.sub('*currentActivity', (currentActivity) => {\n      if (!this.couldOpenActivity && currentActivity === this.activityType) {\n        this.$['*currentActivity'] = this.initActivity;\n      }\n    });\n\n    // TODO: could be performance issue on many files\n    // there is no need to update buttons state on every progress tick\n    this.uploadCollection.observeProperties(this._throttledHandleCollectionUpdate);\n\n    this.sub(\n      '*uploadList',\n      (list) => {\n        this._throttledHandleCollectionUpdate();\n\n        this.set$({\n          hasFiles: list.length > 0,\n        });\n\n        if (!this.cfg.confirmUpload) {\n          this.api.uploadAll();\n        }\n      },\n      false,\n    );\n\n    this.sub(\n      '*collectionErrors',\n      /** @param {import('../../types').OutputError<import('../../types').OutputCollectionErrorType>[]} errors */\n      (errors) => {\n        const firstError = errors.filter((err) => err.type !== 'SOME_FILES_HAS_ERRORS')[0];\n        if (!firstError) {\n          this.set$({\n            commonErrorMessage: null,\n          });\n          return;\n        }\n        this.set$({\n          commonErrorMessage: firstError.message,\n        });\n      },\n    );\n  }\n\n  destroyCallback() {\n    super.destroyCallback();\n    this.uploadCollection.unobserveProperties(this._throttledHandleCollectionUpdate);\n  }\n}\n\nUploadList.template = /* HTML */ `\n  <uc-activity-header>\n    <span aria-live=\"polite\" class=\"uc-header-text\">{{headerText}}</span>\n    <button\n      type=\"button\"\n      class=\"uc-mini-btn uc-close-btn\"\n      set=\"onclick: *closeModal\"\n      l10n=\"@title:a11y-activity-header-button-close;@aria-label:a11y-activity-header-button-close\"\n    >\n      <uc-icon name=\"close\"></uc-icon>\n    </button>\n  </uc-activity-header>\n\n  <div class=\"uc-no-files\" set=\"@hidden: hasFiles\">\n    <slot name=\"empty\"><span l10n=\"no-files\"></span></slot>\n  </div>\n\n  <div class=\"uc-files\">\n    <div class=\"uc-files-wrapper\" repeat=\"*uploadList\" repeat-item-tag=\"uc-file-item\"></div>\n    <button\n      type=\"button\"\n      class=\"uc-add-more-btn uc-secondary-btn\"\n      set=\"onclick: onAdd; @disabled: !addMoreBtnEnabled; @hidden: !addMoreBtnVisible\"\n    >\n      <uc-icon name=\"add\"></uc-icon><span l10n=\"add-more\"></span>\n    </button>\n  </div>\n\n  <div class=\"uc-common-error\" set=\"@hidden: !commonErrorMessage; textContent: commonErrorMessage;\"></div>\n\n  <div class=\"uc-toolbar\">\n    <button type=\"button\" class=\"uc-cancel-btn uc-secondary-btn\" set=\"onclick: onCancel;\" l10n=\"clear\"></button>\n    <div class=\"uc-toolbar-spacer\"></div>\n    <button\n      type=\"button\"\n      class=\"uc-add-more-btn uc-secondary-btn\"\n      set=\"onclick: onAdd; @disabled: !addMoreBtnEnabled; @hidden: !addMoreBtnVisible\"\n    >\n      <uc-icon name=\"add\"></uc-icon><span l10n=\"add-more\"></span>\n    </button>\n    <button\n      type=\"button\"\n      class=\"uc-upload-btn uc-primary-btn\"\n      set=\"@hidden: !uploadBtnVisible; onclick: onUpload;\"\n      l10n=\"upload\"\n    ></button>\n    <button\n      type=\"button\"\n      class=\"uc-done-btn uc-primary-btn\"\n      set=\"@hidden: !doneBtnVisible; onclick: onDone;  @disabled: !doneBtnEnabled\"\n      l10n=\"done\"\n    ></button>\n  </div>\n\n  <uc-drop-area ghost></uc-drop-area>\n`;\n"],"mappings":"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AAC,CAAC,CAAC,CAAC;MAClF,IAAI,CAACkC,UAAU,EAAE;QACf,IAAI,CAACrB,IAAI,CAAC;UACRjD,kBAAkB,EAAE;QACtB,CAAC,CAAC;QACF;MACF;MACA,IAAI,CAACiD,IAAI,CAAC;QACRjD,kBAAkB,EAAEsE,UAAU,CAACE;MACjC,CAAC,CAAC;IACJ,CACF,CAAC;EACH;EAEAC,eAAeA,CAAA,EAAG;IAChB,KAAK,CAACA,eAAe,CAAC,CAAC;IACvB,IAAI,CAAC1D,gBAAgB,CAAC2D,mBAAmB,CAAC,IAAI,CAACjE,gCAAgC,CAAC;EAClF;AACF;AAEAvB,UAAU,CAACyF,QAAQ,GAAG,UAAW;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}