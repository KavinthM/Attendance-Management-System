{"ast":null,"code":"const ROLES = {\n  button: ['toolbar'],\n  checkbox: ['toolbar'],\n  menuitem: ['menu', 'menubar'],\n  option: ['listbox'],\n  tab: ['tablist']\n};\nfunction focus(current, next) {\n  next.tabIndex = 0;\n  next.focus();\n  current.tabIndex = -1;\n}\nfunction findGroupNodeByEventTarget(target) {\n  let itemRole = target.role || target.type || target.tagName;\n  if (!itemRole) return null;\n  let groupRoles = ROLES[itemRole.toLowerCase()];\n  if (!groupRoles) return null;\n  for (let role of groupRoles) {\n    let node = target.closest(`[role=${role}]`);\n    if (node) return node;\n  }\n}\nfunction getItems(target, group) {\n  if (group.role === 'toolbar') return getToolbarItems(group);\n  return group.querySelectorAll(`[role=${target.role}]`);\n}\nfunction getToolbarItems(group) {\n  let items = [...group.querySelectorAll('*')];\n  return items.filter(item => {\n    return item.role === 'button' || item.type === 'button' || item.role === 'checkbox' || item.type === 'checkbox';\n  });\n}\nfunction isHorizontalOrientation(group) {\n  let ariaOrientation = group.getAttribute('aria-orientation');\n  if (ariaOrientation === 'vertical') return false;\n  if (ariaOrientation === 'horizontal') return true;\n  let role = group.role;\n  return role === 'menubar' || role === 'tablist' || role === 'toolbar';\n}\nexport function focusGroupKeyUX(options) {\n  return window => {\n    let inGroup = false;\n    let typingDelayMs = options?.searchDelayMs || 300;\n    let lastTyped = 0;\n    let searchPrefix = '';\n    function keyDown(event) {\n      let group = findGroupNodeByEventTarget(event.target);\n      if (!group) {\n        stop();\n        return;\n      }\n      let items = getItems(event.target, group);\n      let index = Array.from(items).indexOf(event.target);\n      let nextKey = 'ArrowDown';\n      let prevKey = 'ArrowUp';\n      if (isHorizontalOrientation(group)) {\n        if (window.document.dir === 'rtl') {\n          nextKey = 'ArrowLeft';\n          prevKey = 'ArrowRight';\n        } else {\n          nextKey = 'ArrowRight';\n          prevKey = 'ArrowLeft';\n        }\n      }\n      if (event.key === nextKey) {\n        event.preventDefault();\n        focus(event.target, items[index + 1] || items[0]);\n      } else if (event.key === prevKey) {\n        event.preventDefault();\n        focus(event.target, items[index - 1] || items[items.length - 1]);\n      } else if (event.key === 'Home') {\n        event.preventDefault();\n        focus(event.target, items[0]);\n      } else if (event.key === 'End') {\n        event.preventDefault();\n        focus(event.target, items[items.length - 1]);\n      } else if (event.key.length === 1 && group.role !== 'tablist') {\n        let now = Date.now();\n        if (now - lastTyped <= typingDelayMs) {\n          searchPrefix += event.key.toLowerCase();\n        } else {\n          searchPrefix = event.key.toLowerCase();\n        }\n        lastTyped = now;\n        let found = Array.from(items).find(item => {\n          return item.textContent?.trim()?.toLowerCase()?.startsWith(searchPrefix);\n        });\n        if (found) {\n          event.preventDefault();\n          focus(event.target, found);\n        }\n      }\n    }\n    function stop() {\n      inGroup = false;\n      window.removeEventListener('keydown', keyDown);\n    }\n    function focusIn(event) {\n      let group = findGroupNodeByEventTarget(event.target);\n      if (group) {\n        if (!inGroup) {\n          inGroup = true;\n          window.addEventListener('keydown', keyDown);\n        }\n        let items = getItems(event.target, group);\n        for (let item of items) {\n          if (item !== event.target) {\n            item.setAttribute('tabindex', -1);\n          }\n        }\n      } else if (inGroup) {\n        stop();\n      }\n    }\n    function focusOut(event) {\n      if (!event.relatedTarget || event.relatedTarget === window.document) {\n        stop();\n      }\n    }\n    function click(event) {\n      let group = findGroupNodeByEventTarget(event.target);\n      if (group) {\n        let items = getItems(event.target, group);\n        for (let item of items) {\n          if (item !== event.target) {\n            item.setAttribute('tabindex', -1);\n          }\n        }\n        event.target.setAttribute('tabindex', 0);\n      }\n    }\n    window.addEventListener('click', click);\n    window.addEventListener('focusin', focusIn);\n    window.addEventListener('focusout', focusOut);\n    return () => {\n      stop();\n      window.removeEventListener('click', click);\n      window.removeEventListener('focusin', focusIn);\n      window.removeEventListener('focusout', focusOut);\n    };\n  };\n}","map":{"version":3,"names":["ROLES","button","checkbox","menuitem","option","tab","focus","current","next","tabIndex","findGroupNodeByEventTarget","target","itemRole","role","type","tagName","groupRoles","toLowerCase","node","closest","getItems","group","getToolbarItems","querySelectorAll","items","filter","item","isHorizontalOrientation","ariaOrientation","getAttribute","focusGroupKeyUX","options","window","inGroup","typingDelayMs","searchDelayMs","lastTyped","searchPrefix","keyDown","event","stop","index","Array","from","indexOf","nextKey","prevKey","document","dir","key","preventDefault","length","now","Date","found","find","textContent","trim","startsWith","removeEventListener","focusIn","addEventListener","setAttribute","focusOut","relatedTarget","click"],"sources":["/Users/kavinth/Documents/GitHub/Smart-Alert/Smart-Alert-new/frontend/node_modules/keyux/focus-group.js"],"sourcesContent":["const ROLES = {\n  button: ['toolbar'],\n  checkbox: ['toolbar'],\n  menuitem: ['menu', 'menubar'],\n  option: ['listbox'],\n  tab: ['tablist']\n}\n\nfunction focus(current, next) {\n  next.tabIndex = 0\n  next.focus()\n  current.tabIndex = -1\n}\n\nfunction findGroupNodeByEventTarget(target) {\n  let itemRole = target.role || target.type || target.tagName\n  if (!itemRole) return null\n\n  let groupRoles = ROLES[itemRole.toLowerCase()]\n  if (!groupRoles) return null\n\n  for (let role of groupRoles) {\n    let node = target.closest(`[role=${role}]`)\n    if (node) return node\n  }\n}\n\nfunction getItems(target, group) {\n  if (group.role === 'toolbar') return getToolbarItems(group)\n  return group.querySelectorAll(`[role=${target.role}]`)\n}\n\nfunction getToolbarItems(group) {\n  let items = [...group.querySelectorAll('*')]\n  return items.filter(item => {\n    return (\n      item.role === 'button' ||\n      item.type === 'button' ||\n      item.role === 'checkbox' ||\n      item.type === 'checkbox'\n    )\n  })\n}\n\nfunction isHorizontalOrientation(group) {\n  let ariaOrientation = group.getAttribute('aria-orientation')\n  if (ariaOrientation === 'vertical') return false\n  if (ariaOrientation === 'horizontal') return true\n\n  let role = group.role\n  return role === 'menubar' || role === 'tablist' || role === 'toolbar'\n}\n\nexport function focusGroupKeyUX(options) {\n  return window => {\n    let inGroup = false\n    let typingDelayMs = options?.searchDelayMs || 300\n    let lastTyped = 0\n    let searchPrefix = ''\n\n    function keyDown(event) {\n      let group = findGroupNodeByEventTarget(event.target)\n\n      if (!group) {\n        stop()\n        return\n      }\n\n      let items = getItems(event.target, group)\n      let index = Array.from(items).indexOf(event.target)\n\n      let nextKey = 'ArrowDown'\n      let prevKey = 'ArrowUp'\n      if (isHorizontalOrientation(group)) {\n        if (window.document.dir === 'rtl') {\n          nextKey = 'ArrowLeft'\n          prevKey = 'ArrowRight'\n        } else {\n          nextKey = 'ArrowRight'\n          prevKey = 'ArrowLeft'\n        }\n      }\n\n      if (event.key === nextKey) {\n        event.preventDefault()\n        focus(event.target, items[index + 1] || items[0])\n      } else if (event.key === prevKey) {\n        event.preventDefault()\n        focus(event.target, items[index - 1] || items[items.length - 1])\n      } else if (event.key === 'Home') {\n        event.preventDefault()\n        focus(event.target, items[0])\n      } else if (event.key === 'End') {\n        event.preventDefault()\n        focus(event.target, items[items.length - 1])\n      } else if (event.key.length === 1 && group.role !== 'tablist') {\n        let now = Date.now()\n        if (now - lastTyped <= typingDelayMs) {\n          searchPrefix += event.key.toLowerCase()\n        } else {\n          searchPrefix = event.key.toLowerCase()\n        }\n        lastTyped = now\n\n        let found = Array.from(items).find(item => {\n          return item.textContent\n            ?.trim()\n            ?.toLowerCase()\n            ?.startsWith(searchPrefix)\n        })\n        if (found) {\n          event.preventDefault()\n          focus(event.target, found)\n        }\n      }\n    }\n\n    function stop() {\n      inGroup = false\n      window.removeEventListener('keydown', keyDown)\n    }\n\n    function focusIn(event) {\n      let group = findGroupNodeByEventTarget(event.target)\n      if (group) {\n        if (!inGroup) {\n          inGroup = true\n          window.addEventListener('keydown', keyDown)\n        }\n        let items = getItems(event.target, group)\n        for (let item of items) {\n          if (item !== event.target) {\n            item.setAttribute('tabindex', -1)\n          }\n        }\n      } else if (inGroup) {\n        stop()\n      }\n    }\n\n    function focusOut(event) {\n      if (!event.relatedTarget || event.relatedTarget === window.document) {\n        stop()\n      }\n    }\n\n    function click(event) {\n      let group = findGroupNodeByEventTarget(event.target)\n      if (group) {\n        let items = getItems(event.target, group)\n        for (let item of items) {\n          if (item !== event.target) {\n            item.setAttribute('tabindex', -1)\n          }\n        }\n        event.target.setAttribute('tabindex', 0)\n      }\n    }\n\n    window.addEventListener('click', click)\n    window.addEventListener('focusin', focusIn)\n    window.addEventListener('focusout', focusOut)\n    return () => {\n      stop()\n      window.removeEventListener('click', click)\n      window.removeEventListener('focusin', focusIn)\n      window.removeEventListener('focusout', focusOut)\n    }\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}