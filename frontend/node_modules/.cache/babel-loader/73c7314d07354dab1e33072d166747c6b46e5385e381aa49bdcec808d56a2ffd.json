{"ast":null,"code":"//@ts-check\n\nimport { createCdnUrl, createCdnUrlModifiers, createOriginalUrl } from '../../utils/cdn-utils.js';\nimport { preloadImage } from '../utils/preloadImage.js';\nimport { FileItemConfig } from '../FileItem/FileItemConfig.js';\nimport { fileCssBg } from '../svg-backgrounds/svg-backgrounds.js';\nimport { debounce } from '../utils/debounce.js';\nimport { generateThumb } from '../utils/resizeImage.js';\nconst CDN_MAX_OUTPUT_DIMENSION = 3000;\nexport class Thumb extends FileItemConfig {\n  /** @private */\n  _renderedGridOnce = false;\n\n  /**\n   * @private\n   * @type {IntersectionObserverEntry['boundingClientRect'] | null}\n   */\n  _thumbRect = null;\n  _isIntersecting = false;\n  _firstViewMode = this.cfg.filesViewMode;\n  constructor() {\n    super();\n    this.init$ = {\n      ...this.init$,\n      thumbUrl: '',\n      badgeIcon: '',\n      uid: ''\n    };\n  }\n  _calculateThumbSize(force = false) {\n    if (force) {\n      this._thumbRect = this.getBoundingClientRect();\n    }\n    let size = Math.max(parseInt(String(this?._thumbRect?.height || 0)), parseInt(String(this?._thumbRect?.width || 0)), this.cfg.thumbSize);\n    if (window.devicePixelRatio > 1) {\n      size *= window.devicePixelRatio;\n    }\n    return Math.min(size, CDN_MAX_OUTPUT_DIMENSION);\n  }\n\n  /** @private */\n  _generateThumbnail = this._withEntry(async (entry, force = false) => {\n    const fileInfo = entry.getValue('fileInfo');\n    const isImage = entry.getValue('isImage');\n    const uuid = entry.getValue('uuid');\n    const currentThumbUrl = entry.getValue('thumbUrl');\n    let size = this._calculateThumbSize(force);\n    if (fileInfo && isImage && uuid) {\n      let thumbUrl = await this.proxyUrl(createCdnUrl(createOriginalUrl(this.cfg.cdnCname, uuid), createCdnUrlModifiers(entry.getValue('cdnUrlModifiers'), `stretch/off`, `scale_crop/${size}x${size}/center`)));\n      if (currentThumbUrl === thumbUrl) {\n        return;\n      }\n      const {\n        promise\n      } = preloadImage(thumbUrl);\n      promise.then(() => {\n        entry.setValue('thumbUrl', thumbUrl);\n        currentThumbUrl?.startsWith('blob:') && URL.revokeObjectURL(currentThumbUrl);\n      }).catch(async () => {\n        if (currentThumbUrl?.startsWith('blob:')) return;\n        try {\n          const file = entry.getValue('file');\n          if (!file) return;\n          const blobThumbUrl = await generateThumb(file, size);\n          entry.setValue('thumbUrl', blobThumbUrl);\n        } catch (err) {\n          const color = window.getComputedStyle(this).getPropertyValue('--uc-muted-foreground');\n          entry.setValue('thumbUrl', fileCssBg(color));\n        }\n      });\n      return;\n    }\n    if (entry.getValue('thumbUrl')) {\n      return;\n    }\n    const file = entry.getValue('file');\n    if (file?.type.includes('image')) {\n      try {\n        let thumbUrl = await generateThumb(file, size);\n        entry.setValue('thumbUrl', thumbUrl);\n      } catch (err) {\n        let color = window.getComputedStyle(this).getPropertyValue('--uc-muted-foreground');\n        entry.setValue('thumbUrl', fileCssBg(color));\n      }\n    } else {\n      let color = window.getComputedStyle(this).getPropertyValue('--uc-muted-foreground');\n      entry.setValue('thumbUrl', fileCssBg(color));\n    }\n  });\n  _debouncedGenerateThumb = debounce(this._generateThumbnail.bind(this), 100);\n\n  /**\n   * @private\n   * @param {IntersectionObserverEntry[]} entries\n   */\n  _observerCallback(entries) {\n    const [entry] = entries;\n    this._isIntersecting = entry.isIntersecting;\n    if (entry.isIntersecting) {\n      this._thumbRect = entry.boundingClientRect;\n      this._debouncedGenerateThumb();\n      this._observer?.disconnect();\n    }\n    if (entry.intersectionRatio === 0) {\n      this._debouncedGenerateThumb.cancel();\n    }\n  }\n  _reset() {\n    super._reset();\n    this._debouncedGenerateThumb.cancel();\n  }\n\n  /**\n   * @private\n   * @param {String} id\n   */\n  _handleEntryId(id) {\n    this._reset();\n    let entry = this.uploadCollection?.read(id);\n    this._entry = entry;\n    if (!entry) {\n      return;\n    }\n    this._subEntry('fileInfo', fileInfo => {\n      if (fileInfo?.isImage && this._isIntersecting) {\n        this._debouncedGenerateThumb();\n      }\n    });\n    this._subEntry('thumbUrl', thumbUrl => {\n      this.$.thumbUrl = thumbUrl ? `url(${thumbUrl})` : '';\n    });\n    this._subEntry('cdnUrlModifiers', () => {\n      if (this._isIntersecting) {\n        this._debouncedGenerateThumb();\n      }\n    });\n    if (this._isIntersecting) {\n      this._debouncedGenerateThumb();\n    }\n  }\n  initCallback() {\n    super.initCallback();\n    this.defineAccessor('badgeIcon', (/** @type {string} */val) => this.$.badgeIcon = val);\n    this.defineAccessor('uid', (/** @type {string} */value) => {\n      this.set$({\n        uid: value\n      });\n    });\n    this.sub('uid', uid => {\n      this._handleEntryId(uid);\n    });\n    this.subConfigValue('filesViewMode', viewMode => {\n      if (viewMode === 'grid' && !this._renderedGridOnce) {\n        if (this._firstViewMode === 'list') {\n          this._debouncedGenerateThumb(true);\n        }\n        this._renderedGridOnce = true;\n      }\n    });\n    this.setAttribute('role', 'img');\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this._observer = new window.IntersectionObserver(this._observerCallback.bind(this), {\n      threshold: 0.1\n    });\n    this._observer.observe(this);\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this._entrySubs = new Set();\n    this._debouncedGenerateThumb.cancel();\n    this._observer?.disconnect();\n  }\n}\nThumb.template = /* html */`\n  <div class=\"uc-thumb\" set=\"style.backgroundImage: thumbUrl\">\n    <div class=\"uc-badge\">\n      <uc-icon set=\"@name: badgeIcon\"></uc-icon>\n    </div>\n  </div>\n`;\nThumb.bindAttributes({\n  // @ts-expect-error TODO: fix types inside symbiote\n  badgeIcon: null,\n  // @ts-expect-error TODO: fix types inside symbiote\n  uid: null\n});","map":{"version":3,"names":["createCdnUrl","createCdnUrlModifiers","createOriginalUrl","preloadImage","FileItemConfig","fileCssBg","debounce","generateThumb","CDN_MAX_OUTPUT_DIMENSION","Thumb","_renderedGridOnce","_thumbRect","_isIntersecting","_firstViewMode","cfg","filesViewMode","constructor","init$","thumbUrl","badgeIcon","uid","_calculateThumbSize","force","getBoundingClientRect","size","Math","max","parseInt","String","height","width","thumbSize","window","devicePixelRatio","min","_generateThumbnail","_withEntry","entry","fileInfo","getValue","isImage","uuid","currentThumbUrl","proxyUrl","cdnCname","promise","then","setValue","startsWith","URL","revokeObjectURL","catch","file","blobThumbUrl","err","color","getComputedStyle","getPropertyValue","type","includes","_debouncedGenerateThumb","bind","_observerCallback","entries","isIntersecting","boundingClientRect","_observer","disconnect","intersectionRatio","cancel","_reset","_handleEntryId","id","uploadCollection","read","_entry","_subEntry","$","initCallback","defineAccessor","val","value","set$","sub","subConfigValue","viewMode","setAttribute","connectedCallback","IntersectionObserver","threshold","observe","disconnectedCallback","_entrySubs","Set","template","bindAttributes"],"sources":["/Users/kavinth/Documents/GitHub/Smart-Alert/Smart-Alert-new/frontend/node_modules/@uploadcare/file-uploader/blocks/Thumb/Thumb.js"],"sourcesContent":["//@ts-check\n\nimport { createCdnUrl, createCdnUrlModifiers, createOriginalUrl } from '../../utils/cdn-utils.js';\nimport { preloadImage } from '../utils/preloadImage.js';\nimport { FileItemConfig } from '../FileItem/FileItemConfig.js';\nimport { fileCssBg } from '../svg-backgrounds/svg-backgrounds.js';\nimport { debounce } from '../utils/debounce.js';\nimport { generateThumb } from '../utils/resizeImage.js';\n\nconst CDN_MAX_OUTPUT_DIMENSION = 3000;\nexport class Thumb extends FileItemConfig {\n  /** @private */\n  _renderedGridOnce = false;\n\n  /**\n   * @private\n   * @type {IntersectionObserverEntry['boundingClientRect'] | null}\n   */\n  _thumbRect = null;\n\n  _isIntersecting = false;\n\n  _firstViewMode = this.cfg.filesViewMode;\n\n  constructor() {\n    super();\n\n    this.init$ = {\n      ...this.init$,\n      thumbUrl: '',\n      badgeIcon: '',\n      uid: '',\n    };\n  }\n\n  _calculateThumbSize(force = false) {\n    if (force) {\n      this._thumbRect = this.getBoundingClientRect();\n    }\n\n    let size = Math.max(\n      parseInt(String(this?._thumbRect?.height || 0)),\n      parseInt(String(this?._thumbRect?.width || 0)),\n      this.cfg.thumbSize,\n    );\n\n    if (window.devicePixelRatio > 1) {\n      size *= window.devicePixelRatio;\n    }\n\n    return Math.min(size, CDN_MAX_OUTPUT_DIMENSION);\n  }\n\n  /** @private */\n  _generateThumbnail = this._withEntry(async (entry, force = false) => {\n    const fileInfo = entry.getValue('fileInfo');\n    const isImage = entry.getValue('isImage');\n    const uuid = entry.getValue('uuid');\n    const currentThumbUrl = entry.getValue('thumbUrl');\n\n    let size = this._calculateThumbSize(force);\n\n    if (fileInfo && isImage && uuid) {\n      let thumbUrl = await this.proxyUrl(\n        createCdnUrl(\n          createOriginalUrl(this.cfg.cdnCname, uuid),\n          createCdnUrlModifiers(entry.getValue('cdnUrlModifiers'), `stretch/off`, `scale_crop/${size}x${size}/center`),\n        ),\n      );\n\n      if (currentThumbUrl === thumbUrl) {\n        return;\n      }\n\n      const { promise } = preloadImage(thumbUrl);\n\n      promise\n        .then(() => {\n          entry.setValue('thumbUrl', thumbUrl);\n          currentThumbUrl?.startsWith('blob:') && URL.revokeObjectURL(currentThumbUrl);\n        })\n        .catch(async () => {\n          if (currentThumbUrl?.startsWith('blob:')) return;\n          try {\n            const file = entry.getValue('file');\n            if (!file) return;\n            const blobThumbUrl = await generateThumb(file, size);\n            entry.setValue('thumbUrl', blobThumbUrl);\n          } catch (err) {\n            const color = window.getComputedStyle(this).getPropertyValue('--uc-muted-foreground');\n            entry.setValue('thumbUrl', fileCssBg(color));\n          }\n        });\n\n      return;\n    }\n\n    if (entry.getValue('thumbUrl')) {\n      return;\n    }\n\n    const file = entry.getValue('file');\n    if (file?.type.includes('image')) {\n      try {\n        let thumbUrl = await generateThumb(file, size);\n        entry.setValue('thumbUrl', thumbUrl);\n      } catch (err) {\n        let color = window.getComputedStyle(this).getPropertyValue('--uc-muted-foreground');\n        entry.setValue('thumbUrl', fileCssBg(color));\n      }\n    } else {\n      let color = window.getComputedStyle(this).getPropertyValue('--uc-muted-foreground');\n      entry.setValue('thumbUrl', fileCssBg(color));\n    }\n  });\n\n  _debouncedGenerateThumb = debounce(this._generateThumbnail.bind(this), 100);\n\n  /**\n   * @private\n   * @param {IntersectionObserverEntry[]} entries\n   */\n  _observerCallback(entries) {\n    const [entry] = entries;\n    this._isIntersecting = entry.isIntersecting;\n\n    if (entry.isIntersecting) {\n      this._thumbRect = entry.boundingClientRect;\n      this._debouncedGenerateThumb();\n      this._observer?.disconnect();\n    }\n\n    if (entry.intersectionRatio === 0) {\n      this._debouncedGenerateThumb.cancel();\n    }\n  }\n\n  _reset() {\n    super._reset();\n    this._debouncedGenerateThumb.cancel();\n  }\n\n  /**\n   * @private\n   * @param {String} id\n   */\n  _handleEntryId(id) {\n    this._reset();\n\n    let entry = this.uploadCollection?.read(id);\n    this._entry = entry;\n\n    if (!entry) {\n      return;\n    }\n\n    this._subEntry('fileInfo', (fileInfo) => {\n      if (fileInfo?.isImage && this._isIntersecting) {\n        this._debouncedGenerateThumb();\n      }\n    });\n\n    this._subEntry('thumbUrl', (thumbUrl) => {\n      this.$.thumbUrl = thumbUrl ? `url(${thumbUrl})` : '';\n    });\n\n    this._subEntry('cdnUrlModifiers', () => {\n      if (this._isIntersecting) {\n        this._debouncedGenerateThumb();\n      }\n    });\n\n    if (this._isIntersecting) {\n      this._debouncedGenerateThumb();\n    }\n  }\n\n  initCallback() {\n    super.initCallback();\n\n    this.defineAccessor('badgeIcon', (/** @type {string} */ val) => (this.$.badgeIcon = val));\n\n    this.defineAccessor('uid', (/** @type {string} */ value) => {\n      this.set$({ uid: value });\n    });\n\n    this.sub('uid', (uid) => {\n      this._handleEntryId(uid);\n    });\n\n    this.subConfigValue('filesViewMode', (viewMode) => {\n      if (viewMode === 'grid' && !this._renderedGridOnce) {\n        if (this._firstViewMode === 'list') {\n          this._debouncedGenerateThumb(true);\n        }\n        this._renderedGridOnce = true;\n      }\n    });\n\n    this.setAttribute('role', 'img');\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this._observer = new window.IntersectionObserver(this._observerCallback.bind(this), { threshold: 0.1 });\n\n    this._observer.observe(this);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    this._entrySubs = new Set();\n    this._debouncedGenerateThumb.cancel();\n    this._observer?.disconnect();\n  }\n}\n\nThumb.template = /* html */ `\n  <div class=\"uc-thumb\" set=\"style.backgroundImage: thumbUrl\">\n    <div class=\"uc-badge\">\n      <uc-icon set=\"@name: badgeIcon\"></uc-icon>\n    </div>\n  </div>\n`;\n\nThumb.bindAttributes({\n  // @ts-expect-error TODO: fix types inside symbiote\n  badgeIcon: null,\n  // @ts-expect-error TODO: fix types inside symbiote\n  uid: null,\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}