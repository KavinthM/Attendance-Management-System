{"ast":null,"code":"import _objectSpread from\"/Users/kavinth/Documents/GitHub/Smart-Alert/Smart-Alert-new/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useMemo,useState,useCallback}from\"react\";import Layout from\"../Components/Layout\";import Select from\"../Components/Select\";import AttendanceRow from\"../Components/AttendanceRow\";import{getStudents,markAttendance,getAllAttendance,getPendingLeaveCount,getAllLeaveRequests,acceptLeaveRequest,rejectLeaveRequest,getAcceptedLeavesForDate,deleteAllPendingRequests}from\"../api/client\";import dayjs from\"dayjs\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Attendance=()=>{const[students,setStudents]=useState([]);const[section,setSection]=useState(\"\");const[date,setDate]=useState(dayjs().format(\"YYYY-MM-DD\"));const[rows,setRows]=useState({});const[submitting,setSubmitting]=useState(false);const[loading,setLoading]=useState(true);const[existingIdsForDate,setExistingIdsForDate]=useState(new Set());const[loadingExisting,setLoadingExisting]=useState(false);// Leave requests states\nconst[pendingCount,setPendingCount]=useState(0);const[showLeaveRequests,setShowLeaveRequests]=useState(false);const[leaveRequests,setLeaveRequests]=useState([]);const[loadingRequests,setLoadingRequests]=useState(false);const[acceptedLeaves,setAcceptedLeaves]=useState([]);const load=async()=>{setLoading(true);try{const{data}=await getStudents();setStudents(data.students||[]);}finally{setLoading(false);}};const loadPendingCount=async()=>{try{const{data}=await getPendingLeaveCount();setPendingCount(data.count||0);}catch(err){console.error(\"Error loading pending count:\",err);}};const loadLeaveRequests=async()=>{setLoadingRequests(true);try{const{data}=await getAllLeaveRequests(\"pending\");setLeaveRequests(data.requests||[]);}catch(err){console.error(\"Error loading leave requests:\",err);// alert(\"Failed to load leave requests.\"); \nsetLeaveRequests([]);}finally{setLoadingRequests(false);}};const handleAcceptLeave=async id=>{try{await acceptLeaveRequest(id,\"Teacher\");// alert(\"Leave request accepted!\");\nawait loadLeaveRequests();await loadPendingCount();await loadAcceptedLeaves();}catch(err){var _err$response,_err$response$data;alert((err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Failed to accept leave request\");}};const handleRejectLeave=async id=>{const reason=prompt(\"Enter rejection reason (optional):\");try{await rejectLeaveRequest(id,\"Teacher\",reason||\"No reason provided\");// alert(\"Leave request rejected!\");\nawait loadLeaveRequests();await loadPendingCount();}catch(err){var _err$response2,_err$response2$data;alert((err===null||err===void 0?void 0:(_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||\"Failed to reject leave request\");}};const handleDeleteAllPending=async()=>{if(!window.confirm(\"Are you sure you want to delete ALL pending leave requests? This action cannot be undone.\")){return;}try{await deleteAllPendingRequests();// alert(\"All pending requests deleted successfully!\");\nawait loadLeaveRequests();await loadPendingCount();setShowLeaveRequests(false);}catch(err){var _err$response3,_err$response3$data;alert((err===null||err===void 0?void 0:(_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.message)||\"Failed to delete pending requests\");}};const loadAcceptedLeaves=useCallback(async()=>{if(!date)return;try{const{data}=await getAcceptedLeavesForDate(date);setAcceptedLeaves(data.leaveRequests||[]);}catch(err){console.error(\"Error loading accepted leaves:\",err);setAcceptedLeaves([]);}},[date]);useEffect(()=>{load();loadPendingCount();},[]);useEffect(()=>{loadAcceptedLeaves();},[loadAcceptedLeaves]);useEffect(()=>{const id=setInterval(()=>{setDate(dayjs().format(\"YYYY-MM-DD\"));},60*1000);return()=>clearInterval(id);},[]);const sections=useMemo(()=>{const set=new Set(students.map(s=>s.section));return Array.from(set).sort().map(s=>({value:s,label:s}));},[students]);const visible=useMemo(()=>section?students.filter(s=>s.section===section):[],[students,section]);useEffect(()=>{if(!section){setRows({});return;}const map={};visible.forEach(s=>{var _rows$s$_id;map[s._id]=(_rows$s$_id=rows[s._id])!==null&&_rows$s$_id!==void 0?_rows$s$_id:{status:\"Present\"};});setRows(map);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[visible.length,section]);useEffect(()=>{const loadExisting=async()=>{if(!section){setExistingIdsForDate(new Set());return;}setLoadingExisting(true);try{const{data}=await getAllAttendance();const list=Array.isArray(data.records)?data.records:[];const ids=new Set(list.filter(r=>dayjs(r.date).format(\"YYYY-MM-DD\")===date).filter(r=>{var _r$student;return((_r$student=r.student)===null||_r$student===void 0?void 0:_r$student.section)===section;}).map(r=>{var _r$student2;return(_r$student2=r.student)===null||_r$student2===void 0?void 0:_r$student2._id;}).filter(Boolean));setExistingIdsForDate(ids);}finally{setLoadingExisting(false);}};loadExisting();},[date,section]);const updateRow=(studentId,newRow)=>{setRows(r=>_objectSpread(_objectSpread({},r),{},{[studentId]:newRow}));};const getAcceptedLeaveForStudent=studentIndex=>{return acceptedLeaves.find(leave=>leave.studentIndex===studentIndex);};const nothingToSubmit=useMemo(()=>{return visible.every(s=>existingIdsForDate.has(s._id));},[visible,existingIdsForDate]);const submit=async()=>{if(!section)return alert(\"Select a class/section first\");setSubmitting(true);try{const toSubmit=visible.filter(s=>!existingIdsForDate.has(s._id));if(toSubmit.length===0){alert(\"Attendance already marked for all students in this section for this date.\");return;}const payloads=toSubmit.map(s=>{var _rows$s$_id2;const status=((_rows$s$_id2=rows[s._id])===null||_rows$s$_id2===void 0?void 0:_rows$s$_id2.status)||\"Present\";return{studentId:s._id,date,status,notifiedParent:false// Always false when marking attendance\n};});for(const p of payloads){await markAttendance(p);}setExistingIdsForDate(prev=>{const next=new Set(prev);toSubmit.forEach(s=>next.add(s._id));return next;});alert(\"Attendance marked successfully\");}catch(e){var _e$response,_e$response$data;alert((e===null||e===void 0?void 0:(_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.message)||\"Failed to mark attendance\");}finally{setSubmitting(false);}};return/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-slate-900\",children:\"Mark Attendance\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mt-2 text-slate-500 font-medium\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"far fa-calendar-alt text-primary-500\"}),/*#__PURE__*/_jsx(\"span\",{children:date})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col sm:flex-row gap-4 w-full md:w-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative min-w-[240px]\",children:[/*#__PURE__*/_jsxs(\"select\",{className:\"input-field appearance-none cursor-pointer pr-10\",value:section,onChange:e=>setSection(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Class Section\"}),sections.map(s=>/*#__PURE__*/_jsx(\"option\",{value:s.value,children:s.label},s.value))]}),/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-chevron-down absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none\"})]})})]}),pendingCount>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 bg-amber-50 border border-amber-200 rounded-2xl p-4 flex flex-col sm:flex-row items-center justify-between gap-4 shadow-sm animate-pulse-subtle\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 rounded-xl bg-amber-100 flex items-center justify-center text-amber-600 shadow-inner\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-file-contract text-2xl\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-bold text-amber-800 m-0 leading-tight\",children:[pendingCount,\" Leave Request\",pendingCount>1?'s':'',\" Pending\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-amber-700 text-sm mt-0.5\",children:\"Review justification requests from parents.\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowLeaveRequests(true);loadLeaveRequests();},className:\"px-5 py-2.5 bg-amber-500 hover:bg-amber-600 text-white font-bold rounded-xl shadow-lg shadow-amber-500/30 transition-all hover:-translate-y-0.5 whitespace-nowrap\",children:\"Review Requests\"})]}),!section?/*#__PURE__*/_jsxs(\"div\",{className:\"glass-panel rounded-2xl p-12 text-center border-dashed border-2 border-slate-300\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"inline-flex w-20 h-20 rounded-full bg-slate-50 items-center justify-center mb-6\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-chalkboard-user text-4xl text-slate-300\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-medium text-slate-600\",children:\"Select a section to begin\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-400 mt-2 max-w-md mx-auto\",children:\"Please choose a class section from the dropdown above to load the student list and mark attendance.\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"card overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-4 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-slate-800\",children:\"Attendance Sheet\"}),loadingExisting&&/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-spinner fa-spin text-primary-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setRows({}),className:\"btn-secondary text-xs px-3 py-1.5 h-auto text-slate-500\",disabled:submitting,children:\"Reset\"}),/*#__PURE__*/_jsx(\"button\",{onClick:submit,disabled:submitting||nothingToSubmit,className:\"btn-primary flex items-center gap-2 text-sm px-4 py-2\",children:submitting?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-circle-notch fa-spin\"}),\" Saving...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-save\"}),\" Submit\"]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-left border-collapse\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-slate-50 border-b border-slate-100 text-xs uppercase tracking-wider text-slate-500 font-semibold\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4\",children:\"Student\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4\",children:\"Index No\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4\",children:\"Class\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4\",children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"divide-y divide-slate-50\",children:visible.map(s=>/*#__PURE__*/_jsx(AttendanceRow,{student:s,row:rows[s._id]||{status:\"Present\"},onChange:newRow=>updateRow(s._id,newRow),alreadyMarked:existingIdsForDate.has(s._id),acceptedLeave:getAcceptedLeaveForStudent(s.std_index)},s._id))})]}),visible.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"p-8 text-center text-slate-400\",children:\"No students found in this section.\"})]})]}),showLeaveRequests&&/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-slate-900/60 backdrop-blur-sm\",onClick:()=>setShowLeaveRequests(false)}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col overflow-hidden animate-fade-in-up\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-5 border-b border-slate-100 flex justify-between items-center bg-slate-50\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold text-slate-800 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-clipboard-list text-primary-600\"}),\"Review Requests\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[leaveRequests.length>0&&/*#__PURE__*/_jsx(\"button\",{onClick:handleDeleteAllPending,className:\"text-xs font-semibold text-rose-600 hover:text-rose-700 bg-rose-50 hover:bg-rose-100 px-3 py-1.5 rounded-lg transition-colors border border-rose-100\",children:\"Delete All\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowLeaveRequests(false),className:\"text-slate-400 hover:text-slate-600 transition-colors\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times text-xl\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto p-6 bg-slate-50/50\",children:loadingRequests?/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center py-12 text-slate-400\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-circle-notch fa-spin text-3xl mb-3 text-primary-500\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Fetching requests...\"})]}):leaveRequests.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center py-12 text-slate-400\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mb-4 text-slate-300\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check text-2xl\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:\"All caught up! No pending requests.\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:leaveRequests.map(request=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl p-5 shadow-sm border border-slate-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-slate-400 uppercase tracking-wider\",children:\"Student\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-slate-900\",children:request.studentName})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-slate-400 uppercase tracking-wider\",children:\"Index No\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-slate-700 font-mono\",children:request.studentIndex})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-slate-400 uppercase tracking-wider\",children:\"Parent Phone\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-slate-700\",children:request.parentPhone})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-slate-400 uppercase tracking-wider\",children:\"Leave Date\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 font-medium text-amber-600\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"far fa-calendar\"}),dayjs(request.leaveDate).format(\"MMM DD, YYYY\")]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-50 rounded-lg p-4 mb-4 border border-slate-100\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1 block\",children:\"Reason for absence\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-700 text-sm leading-relaxed\",children:request.reason})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row justify-between items-center gap-4 pt-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full sm:w-auto\",children:request.documentPath?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 p-2 pr-4 bg-primary-50 border border-primary-100 rounded-lg text-primary-700\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded bg-white flex items-center justify-center shadow-sm text-primary-500\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-file-alt\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium truncate max-w-[150px]\",children:\"Document Attached\"}),/*#__PURE__*/_jsx(\"a\",{href:\"http://localhost:5000/\".concat(request.documentPath),target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-xs bg-white hover:bg-slate-50 text-primary-600 font-bold px-3 py-1 rounded shadow-sm transition-colors\",children:\"View\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-slate-400 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-ban opacity-50\"}),\" No proof submitted\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 w-full sm:w-auto\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleRejectLeave(request._id),className:\"btn-danger flex-1 sm:flex-none text-sm px-4 py-2\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times mr-2\"}),\" Reject\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleAcceptLeave(request._id),className:\"items-center justify-center px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-white font-medium rounded-xl shadow-lg shadow-emerald-500/20 hover:shadow-emerald-500/30 transition-all flex-1 sm:flex-none text-sm flex\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check mr-2\"}),\" Accept Request\"]})]})]})]},request._id))})})]})]})]});};export default Attendance;","map":{"version":3,"names":["React","useEffect","useMemo","useState","useCallback","Layout","Select","AttendanceRow","getStudents","markAttendance","getAllAttendance","getPendingLeaveCount","getAllLeaveRequests","acceptLeaveRequest","rejectLeaveRequest","getAcceptedLeavesForDate","deleteAllPendingRequests","dayjs","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Attendance","students","setStudents","section","setSection","date","setDate","format","rows","setRows","submitting","setSubmitting","loading","setLoading","existingIdsForDate","setExistingIdsForDate","Set","loadingExisting","setLoadingExisting","pendingCount","setPendingCount","showLeaveRequests","setShowLeaveRequests","leaveRequests","setLeaveRequests","loadingRequests","setLoadingRequests","acceptedLeaves","setAcceptedLeaves","load","data","loadPendingCount","count","err","console","error","loadLeaveRequests","requests","handleAcceptLeave","id","loadAcceptedLeaves","_err$response","_err$response$data","alert","response","message","handleRejectLeave","reason","prompt","_err$response2","_err$response2$data","handleDeleteAllPending","window","confirm","_err$response3","_err$response3$data","setInterval","clearInterval","sections","set","map","s","Array","from","sort","value","label","visible","filter","forEach","_rows$s$_id","_id","status","length","loadExisting","list","isArray","records","ids","r","_r$student","student","_r$student2","Boolean","updateRow","studentId","newRow","_objectSpread","getAcceptedLeaveForStudent","studentIndex","find","leave","nothingToSubmit","every","has","submit","toSubmit","payloads","_rows$s$_id2","notifiedParent","p","prev","next","add","e","_e$response","_e$response$data","children","className","onChange","target","onClick","disabled","row","alreadyMarked","acceptedLeave","std_index","request","studentName","parentPhone","leaveDate","documentPath","href","concat","rel"],"sources":["/Users/kavinth/Documents/GitHub/Smart-Alert/Smart-Alert-new/frontend/src/pages/Attendance.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState, useCallback } from \"react\";\nimport Layout from \"../Components/Layout\";\nimport Select from \"../Components/Select\";\nimport AttendanceRow from \"../Components/AttendanceRow\";\nimport { getStudents, markAttendance, getAllAttendance, getPendingLeaveCount, getAllLeaveRequests, acceptLeaveRequest, rejectLeaveRequest, getAcceptedLeavesForDate, deleteAllPendingRequests } from \"../api/client\";\nimport dayjs from \"dayjs\";\n\nconst Attendance = () => {\n  const [students, setStudents] = useState([]);\n  const [section, setSection] = useState(\"\");\n  const [date, setDate] = useState(dayjs().format(\"YYYY-MM-DD\"));\n  const [rows, setRows] = useState({});\n  const [submitting, setSubmitting] = useState(false);\n  const [loading, setLoading] = useState(true);\n\n  const [existingIdsForDate, setExistingIdsForDate] = useState(new Set());\n  const [loadingExisting, setLoadingExisting] = useState(false);\n\n  // Leave requests states\n  const [pendingCount, setPendingCount] = useState(0);\n  const [showLeaveRequests, setShowLeaveRequests] = useState(false);\n  const [leaveRequests, setLeaveRequests] = useState([]);\n  const [loadingRequests, setLoadingRequests] = useState(false);\n  const [acceptedLeaves, setAcceptedLeaves] = useState([]);\n\n  const load = async () => {\n    setLoading(true);\n    try {\n      const { data } = await getStudents();\n      setStudents(data.students || []);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadPendingCount = async () => {\n    try {\n      const { data } = await getPendingLeaveCount();\n      setPendingCount(data.count || 0);\n    } catch (err) {\n      console.error(\"Error loading pending count:\", err);\n    }\n  };\n\n  const loadLeaveRequests = async () => {\n    setLoadingRequests(true);\n    try {\n      const { data } = await getAllLeaveRequests(\"pending\");\n      setLeaveRequests(data.requests || []);\n    } catch (err) {\n      console.error(\"Error loading leave requests:\", err);\n      // alert(\"Failed to load leave requests.\"); \n      setLeaveRequests([]);\n    } finally {\n      setLoadingRequests(false);\n    }\n  };\n\n  const handleAcceptLeave = async (id) => {\n    try {\n      await acceptLeaveRequest(id, \"Teacher\");\n      // alert(\"Leave request accepted!\");\n      await loadLeaveRequests();\n      await loadPendingCount();\n      await loadAcceptedLeaves();\n    } catch (err) {\n      alert(err?.response?.data?.message || \"Failed to accept leave request\");\n    }\n  };\n\n  const handleRejectLeave = async (id) => {\n    const reason = prompt(\"Enter rejection reason (optional):\");\n    try {\n      await rejectLeaveRequest(id, \"Teacher\", reason || \"No reason provided\");\n      // alert(\"Leave request rejected!\");\n      await loadLeaveRequests();\n      await loadPendingCount();\n    } catch (err) {\n      alert(err?.response?.data?.message || \"Failed to reject leave request\");\n    }\n  };\n\n  const handleDeleteAllPending = async () => {\n    if (!window.confirm(\"Are you sure you want to delete ALL pending leave requests? This action cannot be undone.\")) {\n      return;\n    }\n    try {\n      await deleteAllPendingRequests();\n      // alert(\"All pending requests deleted successfully!\");\n      await loadLeaveRequests();\n      await loadPendingCount();\n      setShowLeaveRequests(false);\n    } catch (err) {\n      alert(err?.response?.data?.message || \"Failed to delete pending requests\");\n    }\n  };\n\n  const loadAcceptedLeaves = useCallback(async () => {\n    if (!date) return;\n    try {\n      const { data } = await getAcceptedLeavesForDate(date);\n      setAcceptedLeaves(data.leaveRequests || []);\n    } catch (err) {\n      console.error(\"Error loading accepted leaves:\", err);\n      setAcceptedLeaves([]);\n    }\n  }, [date]);\n\n  useEffect(() => {\n    load();\n    loadPendingCount();\n  }, []);\n\n  useEffect(() => {\n    loadAcceptedLeaves();\n  }, [loadAcceptedLeaves]);\n\n  useEffect(() => {\n    const id = setInterval(() => {\n      setDate(dayjs().format(\"YYYY-MM-DD\"));\n    }, 60 * 1000);\n    return () => clearInterval(id);\n  }, []);\n\n  const sections = useMemo(() => {\n    const set = new Set(students.map((s) => s.section));\n    return Array.from(set).sort().map((s) => ({ value: s, label: s }));\n  }, [students]);\n\n  const visible = useMemo(\n    () => (section ? students.filter((s) => s.section === section) : []),\n    [students, section]\n  );\n\n  useEffect(() => {\n    if (!section) {\n      setRows({});\n      return;\n    }\n    const map = {};\n    visible.forEach((s) => {\n      map[s._id] = rows[s._id] ?? { status: \"Present\" };\n    });\n    setRows(map);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [visible.length, section]);\n\n  useEffect(() => {\n    const loadExisting = async () => {\n      if (!section) {\n        setExistingIdsForDate(new Set());\n        return;\n      }\n      setLoadingExisting(true);\n      try {\n        const { data } = await getAllAttendance();\n        const list = Array.isArray(data.records) ? data.records : [];\n        const ids = new Set(\n          list\n            .filter((r) => dayjs(r.date).format(\"YYYY-MM-DD\") === date)\n            .filter((r) => r.student?.section === section)\n            .map((r) => r.student?._id)\n            .filter(Boolean)\n        );\n        setExistingIdsForDate(ids);\n      } finally {\n        setLoadingExisting(false);\n      }\n    };\n    loadExisting();\n  }, [date, section]);\n\n  const updateRow = (studentId, newRow) => {\n    setRows((r) => ({ ...r, [studentId]: newRow }));\n  };\n\n  const getAcceptedLeaveForStudent = (studentIndex) => {\n    return acceptedLeaves.find(leave => leave.studentIndex === studentIndex);\n  };\n\n  const nothingToSubmit = useMemo(() => {\n    return visible.every((s) => existingIdsForDate.has(s._id));\n  }, [visible, existingIdsForDate]);\n\n  const submit = async () => {\n    if (!section) return alert(\"Select a class/section first\");\n\n    setSubmitting(true);\n    try {\n      const toSubmit = visible.filter((s) => !existingIdsForDate.has(s._id));\n      if (toSubmit.length === 0) {\n        alert(\"Attendance already marked for all students in this section for this date.\");\n        return;\n      }\n\n      const payloads = toSubmit.map((s) => {\n        const status = rows[s._id]?.status || \"Present\";\n        return {\n          studentId: s._id,\n          date,\n          status,\n          notifiedParent: false // Always false when marking attendance\n        };\n      });\n\n      for (const p of payloads) {\n        await markAttendance(p);\n      }\n\n      setExistingIdsForDate((prev) => {\n        const next = new Set(prev);\n        toSubmit.forEach((s) => next.add(s._id));\n        return next;\n      });\n\n      alert(\"Attendance marked successfully\");\n    } catch (e) {\n      alert(e?.response?.data?.message || \"Failed to mark attendance\");\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <Layout>\n      {/* Header Section */}\n      <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-8\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-slate-900\">Mark Attendance</h1>\n          <div className=\"flex items-center gap-2 mt-2 text-slate-500 font-medium\">\n            <i className=\"far fa-calendar-alt text-primary-500\"></i>\n            <span>{date}</span>\n          </div>\n        </div>\n\n        <div className=\"flex flex-col sm:flex-row gap-4 w-full md:w-auto\">\n          <div className=\"relative min-w-[240px]\">\n            <select\n              className=\"input-field appearance-none cursor-pointer pr-10\"\n              value={section}\n              onChange={(e) => setSection(e.target.value)}\n            >\n              <option value=\"\">Select Class Section</option>\n              {sections.map(s => <option key={s.value} value={s.value}>{s.label}</option>)}\n            </select>\n            <i className=\"fa-solid fa-chevron-down absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none\"></i>\n          </div>\n        </div>\n      </div>\n\n      {/* Pending Leave Requests Notification */}\n      {pendingCount > 0 && (\n        <div className=\"mb-6 bg-amber-50 border border-amber-200 rounded-2xl p-4 flex flex-col sm:flex-row items-center justify-between gap-4 shadow-sm animate-pulse-subtle\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-amber-100 flex items-center justify-center text-amber-600 shadow-inner\">\n              <i className=\"fas fa-file-contract text-2xl\"></i>\n            </div>\n            <div>\n              <h3 className=\"text-lg font-bold text-amber-800 m-0 leading-tight\">\n                {pendingCount} Leave Request{pendingCount > 1 ? 's' : ''} Pending\n              </h3>\n              <p className=\"text-amber-700 text-sm mt-0.5\">\n                Review justification requests from parents.\n              </p>\n            </div>\n          </div>\n          <button\n            onClick={() => {\n              setShowLeaveRequests(true);\n              loadLeaveRequests();\n            }}\n            className=\"px-5 py-2.5 bg-amber-500 hover:bg-amber-600 text-white font-bold rounded-xl shadow-lg shadow-amber-500/30 transition-all hover:-translate-y-0.5 whitespace-nowrap\"\n          >\n            Review Requests\n          </button>\n        </div>\n      )}\n\n      {/* Main Content Area */}\n      {!section ? (\n        <div className=\"glass-panel rounded-2xl p-12 text-center border-dashed border-2 border-slate-300\">\n          <div className=\"inline-flex w-20 h-20 rounded-full bg-slate-50 items-center justify-center mb-6\">\n            <i className=\"fa-solid fa-chalkboard-user text-4xl text-slate-300\"></i>\n          </div>\n          <h3 className=\"text-xl font-medium text-slate-600\">Select a section to begin</h3>\n          <p className=\"text-slate-400 mt-2 max-w-md mx-auto\">Please choose a class section from the dropdown above to load the student list and mark attendance.</p>\n        </div>\n      ) : (\n        <div className=\"card overflow-hidden\">\n          <div className=\"px-6 py-4 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center\">\n            <div className=\"flex items-center gap-2\">\n              <h2 className=\"text-lg font-semibold text-slate-800\">Attendance Sheet</h2>\n              {loadingExisting && <i className=\"fas fa-spinner fa-spin text-primary-500\"></i>}\n            </div>\n\n            <div className=\"flex gap-2\">\n              <button\n                onClick={() => setRows({})}\n                className=\"btn-secondary text-xs px-3 py-1.5 h-auto text-slate-500\"\n                disabled={submitting}\n              >\n                Reset\n              </button>\n              <button\n                onClick={submit}\n                disabled={submitting || nothingToSubmit}\n                className=\"btn-primary flex items-center gap-2 text-sm px-4 py-2\"\n              >\n                {submitting ? (\n                  <>\n                    <i className=\"fas fa-circle-notch fa-spin\"></i> Saving...\n                  </>\n                ) : (\n                  <>\n                    <i className=\"fas fa-save\"></i> Submit\n                  </>\n                )}\n              </button>\n            </div>\n          </div>\n\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full text-left border-collapse\">\n              <thead>\n                <tr className=\"bg-slate-50 border-b border-slate-100 text-xs uppercase tracking-wider text-slate-500 font-semibold\">\n                  <th className=\"px-6 py-4\">Student</th>\n                  <th className=\"px-6 py-4\">Index No</th>\n                  <th className=\"px-6 py-4\">Class</th>\n                  <th className=\"px-6 py-4\">Status</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-slate-50\">\n                {visible.map((s) => (\n                  <AttendanceRow\n                    key={s._id}\n                    student={s}\n                    row={rows[s._id] || { status: \"Present\" }}\n                    onChange={(newRow) => updateRow(s._id, newRow)}\n                    alreadyMarked={existingIdsForDate.has(s._id)}\n                    acceptedLeave={getAcceptedLeaveForStudent(s.std_index)}\n                  />\n                ))}\n              </tbody>\n            </table>\n            {visible.length === 0 && (\n              <div className=\"p-8 text-center text-slate-400\">\n                No students found in this section.\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Leave Requests Modal */}\n      {showLeaveRequests && (\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-6\">\n          <div className=\"absolute inset-0 bg-slate-900/60 backdrop-blur-sm\" onClick={() => setShowLeaveRequests(false)}></div>\n\n          <div className=\"relative bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col overflow-hidden animate-fade-in-up\">\n            <div className=\"px-6 py-5 border-b border-slate-100 flex justify-between items-center bg-slate-50\">\n              <h2 className=\"text-xl font-bold text-slate-800 flex items-center gap-2\">\n                <i className=\"fas fa-clipboard-list text-primary-600\"></i>\n                Review Requests\n              </h2>\n              <div className=\"flex items-center gap-3\">\n                {leaveRequests.length > 0 && (\n                  <button\n                    onClick={handleDeleteAllPending}\n                    className=\"text-xs font-semibold text-rose-600 hover:text-rose-700 bg-rose-50 hover:bg-rose-100 px-3 py-1.5 rounded-lg transition-colors border border-rose-100\"\n                  >\n                    Delete All\n                  </button>\n                )}\n                <button onClick={() => setShowLeaveRequests(false)} className=\"text-slate-400 hover:text-slate-600 transition-colors\">\n                  <i className=\"fas fa-times text-xl\"></i>\n                </button>\n              </div>\n            </div>\n\n            <div className=\"flex-1 overflow-y-auto p-6 bg-slate-50/50\">\n              {loadingRequests ? (\n                <div className=\"flex flex-col items-center justify-center py-12 text-slate-400\">\n                  <i className=\"fas fa-circle-notch fa-spin text-3xl mb-3 text-primary-500\"></i>\n                  <p>Fetching requests...</p>\n                </div>\n              ) : leaveRequests.length === 0 ? (\n                <div className=\"flex flex-col items-center justify-center py-12 text-slate-400\">\n                  <div className=\"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mb-4 text-slate-300\">\n                    <i className=\"fas fa-check text-2xl\"></i>\n                  </div>\n                  <p className=\"font-medium\">All caught up! No pending requests.</p>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  {leaveRequests.map((request) => (\n                    <div key={request._id} className=\"bg-white rounded-xl p-5 shadow-sm border border-slate-200\">\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4\">\n                        <div>\n                          <label className=\"text-xs font-semibold text-slate-400 uppercase tracking-wider\">Student</label>\n                          <p className=\"font-medium text-slate-900\">{request.studentName}</p>\n                        </div>\n                        <div>\n                          <label className=\"text-xs font-semibold text-slate-400 uppercase tracking-wider\">Index No</label>\n                          <p className=\"font-medium text-slate-700 font-mono\">{request.studentIndex}</p>\n                        </div>\n                        <div>\n                          <label className=\"text-xs font-semibold text-slate-400 uppercase tracking-wider\">Parent Phone</label>\n                          <p className=\"font-medium text-slate-700\">{request.parentPhone}</p>\n                        </div>\n                        <div>\n                          <label className=\"text-xs font-semibold text-slate-400 uppercase tracking-wider\">Leave Date</label>\n                          <div className=\"flex items-center gap-2 font-medium text-amber-600\">\n                            <i className=\"far fa-calendar\"></i>\n                            {dayjs(request.leaveDate).format(\"MMM DD, YYYY\")}\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"bg-slate-50 rounded-lg p-4 mb-4 border border-slate-100\">\n                        <label className=\"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1 block\">Reason for absence</label>\n                        <p className=\"text-slate-700 text-sm leading-relaxed\">{request.reason}</p>\n                      </div>\n\n                      <div className=\"flex flex-col sm:flex-row justify-between items-center gap-4 pt-2\">\n                        <div className=\"w-full sm:w-auto\">\n                          {request.documentPath ? (\n                            <div className=\"flex items-center gap-3 p-2 pr-4 bg-primary-50 border border-primary-100 rounded-lg text-primary-700\">\n                              <div className=\"w-8 h-8 rounded bg-white flex items-center justify-center shadow-sm text-primary-500\">\n                                <i className=\"fas fa-file-alt\"></i>\n                              </div>\n                              <span className=\"text-sm font-medium truncate max-w-[150px]\">Document Attached</span>\n                              <a\n                                href={`http://localhost:5000/${request.documentPath}`} target=\"_blank\" rel=\"noopener noreferrer\"\n                                className=\"text-xs bg-white hover:bg-slate-50 text-primary-600 font-bold px-3 py-1 rounded shadow-sm transition-colors\"\n                              >\n                                View\n                              </a>\n                            </div>\n                          ) : (\n                            <div className=\"text-sm text-slate-400 flex items-center gap-2\">\n                              <i className=\"fas fa-ban opacity-50\"></i> No proof submitted\n                            </div>\n                          )}\n                        </div>\n\n                        <div className=\"flex gap-3 w-full sm:w-auto\">\n                          <button\n                            onClick={() => handleRejectLeave(request._id)}\n                            className=\"btn-danger flex-1 sm:flex-none text-sm px-4 py-2\"\n                          >\n                            <i className=\"fas fa-times mr-2\"></i> Reject\n                          </button>\n                          <button\n                            onClick={() => handleAcceptLeave(request._id)}\n                            className=\"items-center justify-center px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-white font-medium rounded-xl shadow-lg shadow-emerald-500/20 hover:shadow-emerald-500/30 transition-all flex-1 sm:flex-none text-sm flex\"\n                          >\n                            <i className=\"fas fa-check mr-2\"></i> Accept Request\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n    </Layout>\n  );\n};\n\nexport default Attendance;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}