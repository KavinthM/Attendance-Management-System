{"ast":null,"code":"// @ts-check\nimport { Block } from '../../../abstract/Block.js';\nimport { createCdnUrl, createCdnUrlModifiers, createOriginalUrl, extractOperations, extractUuid } from '../../../utils/cdn-utils.js';\nimport { TRANSPARENT_PIXEL_SRC } from '../../../utils/transparentPixelSrc.js';\nimport { debounce } from '../../utils/debounce.js';\nimport { classNames } from './lib/classNames.js';\nimport { parseCropPreset } from './lib/parseCropPreset.js';\nimport { parseTabs } from './lib/parseTabs.js';\nimport { operationsToTransformations, transformationsToOperations } from './lib/transformationUtils.js';\nimport { initState } from './state.js';\nimport { TEMPLATE } from './template.js';\nimport { TabId } from './toolbar-constants.js';\nexport class CloudImageEditorBlock extends Block {\n  ctxOwner = true;\n  static styleAttrs = ['uc-cloud-image-editor'];\n  constructor() {\n    super();\n    this.init$ = {\n      ...this.init$,\n      ...initState(this)\n    };\n  }\n\n  /** @private */\n  _debouncedShowLoader = debounce(this._showLoader.bind(this), 300);\n\n  /**\n   * @private\n   * @param {boolean} show\n   */\n  _showLoader(show) {\n    this.$.showLoader = show;\n  }\n\n  /**\n   * To proper work, we need non-zero size the element. So, we'll wait for it.\n   *\n   * @private\n   * @returns {Promise<void>}\n   */\n  _waitForSize() {\n    const TIMEOUT = 3000;\n    return new Promise((resolve, reject) => {\n      const timeoutId = setTimeout(() => {\n        reject(new Error('[cloud-image-editor] timeout waiting for non-zero container size'));\n      }, TIMEOUT);\n      const resizeObserver = new ResizeObserver(([element]) => {\n        if (element.contentRect.width > 0 && element.contentRect.height > 0) {\n          resolve();\n          clearTimeout(timeoutId);\n          resizeObserver.disconnect();\n        }\n      });\n      resizeObserver.observe(this);\n    });\n  }\n  initCallback() {\n    super.initCallback();\n    this.$['*faderEl'] = this.ref['fader-el'];\n    this.$['*cropperEl'] = this.ref['cropper-el'];\n    this.$['*imgContainerEl'] = this.ref['img-container-el'];\n    this.initEditor();\n  }\n  async updateImage() {\n    if (!this.isConnected) {\n      return;\n    }\n    await this._waitForSize();\n    if (this.$.cdnUrl) {\n      const uuid = extractUuid(this.$.cdnUrl);\n      const originalUrl = createOriginalUrl(this.$.cdnUrl, uuid);\n      if (originalUrl === this.$['*originalUrl']) {\n        return;\n      }\n      this.$['*originalUrl'] = originalUrl;\n      const operations = extractOperations(this.$.cdnUrl);\n      const transformations = operationsToTransformations(operations);\n      this.$['*editorTransformations'] = transformations;\n    } else if (this.$.uuid) {\n      const originalUrl = createOriginalUrl(this.cfg.cdnCname, this.$.uuid);\n      if (originalUrl === this.$['*originalUrl']) {\n        return;\n      }\n      this.$['*originalUrl'] = originalUrl;\n      this.$['*editorTransformations'] = {};\n    } else {\n      throw new Error('No UUID nor CDN URL provided');\n    }\n    if (this.$['*tabId'] === TabId.CROP) {\n      this.$['*cropperEl'].deactivate({\n        reset: true\n      });\n    } else {\n      this.$['*faderEl'].deactivate();\n    }\n    try {\n      const cdnUrl = await this.proxyUrl(createCdnUrl(this.$['*originalUrl'], createCdnUrlModifiers('json')));\n      const json = await fetch(cdnUrl).then(response => response.json());\n      const {\n        width,\n        height\n      } = /** @type {{ width: number; height: number }} */json;\n      this.$['*imageSize'] = {\n        width,\n        height\n      };\n      if (this.$['*tabId'] === TabId.CROP) {\n        this.$['*cropperEl'].activate(this.$['*imageSize']);\n      } else {\n        this.$['*faderEl'].activate({\n          url: this.$['*originalUrl']\n        });\n      }\n    } catch (err) {\n      if (err) {\n        console.error('Failed to load image info', err);\n      }\n    }\n  }\n  async initEditor() {\n    try {\n      await this._waitForSize();\n    } catch (err) {\n      if (this.isConnected) {\n        // @ts-ignore TODO: fix this\n        console.error(err.message);\n      }\n      return;\n    }\n    this.ref['img-el'].addEventListener('load', () => {\n      this._imgLoading = false;\n      this._debouncedShowLoader(false);\n      if (this.$.src !== TRANSPARENT_PIXEL_SRC) {\n        this.$['*networkProblems'] = false;\n      }\n    });\n    this.ref['img-el'].addEventListener('error', () => {\n      this._imgLoading = false;\n      this._debouncedShowLoader(false);\n      this.$['*networkProblems'] = true;\n    });\n    this.sub('src', src => {\n      let el = this.ref['img-el'];\n      if (el.src !== src) {\n        this._imgLoading = true;\n        el.src = src || TRANSPARENT_PIXEL_SRC;\n      }\n    });\n    this.sub('cropPreset', val => {\n      this.$['*cropPresetList'] = parseCropPreset(val);\n    });\n    this.sub('tabs', /** @param {string} val */val => {\n      this.$['*tabList'] = parseTabs(val);\n    });\n    this.sub('*tabId', tabId => {\n      this.ref['img-el'].className = classNames('uc-image', {\n        'uc-image_hidden_to_cropper': tabId === TabId.CROP,\n        'uc-image_hidden_effects': tabId !== TabId.CROP\n      });\n    });\n    this.classList.add('uc-editor_ON');\n    this.sub('*networkProblems', networkProblems => {\n      this.$['presence.networkProblems'] = networkProblems;\n      this.$['presence.modalCaption'] = !networkProblems;\n    });\n    this.sub('*editorTransformations', transformations => {\n      if (Object.keys(transformations).length === 0) {\n        return;\n      }\n      let originalUrl = this.$['*originalUrl'];\n      let cdnUrlModifiers = createCdnUrlModifiers(transformationsToOperations(transformations), 'preview');\n      let cdnUrl = createCdnUrl(originalUrl, cdnUrlModifiers);\n\n      /** @type {import('./types.js').ApplyResult} */\n      let eventData = {\n        originalUrl,\n        cdnUrlModifiers,\n        cdnUrl,\n        transformations\n      };\n      this.dispatchEvent(new CustomEvent('change', {\n        detail: eventData,\n        bubbles: true,\n        composed: true\n      }));\n    }, false);\n    this.sub('uuid', val => val && this.updateImage());\n    this.sub('cdnUrl', val => val && this.updateImage());\n  }\n}\nCloudImageEditorBlock.template = TEMPLATE;\nCloudImageEditorBlock.bindAttributes({\n  uuid: 'uuid',\n  'cdn-url': 'cdnUrl',\n  'crop-preset': 'cropPreset',\n  tabs: 'tabs'\n});","map":{"version":3,"names":["Block","createCdnUrl","createCdnUrlModifiers","createOriginalUrl","extractOperations","extractUuid","TRANSPARENT_PIXEL_SRC","debounce","classNames","parseCropPreset","parseTabs","operationsToTransformations","transformationsToOperations","initState","TEMPLATE","TabId","CloudImageEditorBlock","ctxOwner","styleAttrs","constructor","init$","_debouncedShowLoader","_showLoader","bind","show","$","showLoader","_waitForSize","TIMEOUT","Promise","resolve","reject","timeoutId","setTimeout","Error","resizeObserver","ResizeObserver","element","contentRect","width","height","clearTimeout","disconnect","observe","initCallback","ref","initEditor","updateImage","isConnected","cdnUrl","uuid","originalUrl","operations","transformations","cfg","cdnCname","CROP","deactivate","reset","proxyUrl","json","fetch","then","response","activate","url","err","console","error","message","addEventListener","_imgLoading","src","sub","el","val","tabId","className","classList","add","networkProblems","Object","keys","length","cdnUrlModifiers","eventData","dispatchEvent","CustomEvent","detail","bubbles","composed","template","bindAttributes","tabs"],"sources":["/Users/kavinth/Documents/GitHub/Smart-Alert/Smart-Alert-new/frontend/node_modules/@uploadcare/file-uploader/blocks/CloudImageEditor/src/CloudImageEditorBlock.js"],"sourcesContent":["// @ts-check\nimport { Block } from '../../../abstract/Block.js';\nimport {\n  createCdnUrl,\n  createCdnUrlModifiers,\n  createOriginalUrl,\n  extractOperations,\n  extractUuid,\n} from '../../../utils/cdn-utils.js';\nimport { TRANSPARENT_PIXEL_SRC } from '../../../utils/transparentPixelSrc.js';\nimport { debounce } from '../../utils/debounce.js';\nimport { classNames } from './lib/classNames.js';\nimport { parseCropPreset } from './lib/parseCropPreset.js';\nimport { parseTabs } from './lib/parseTabs.js';\nimport { operationsToTransformations, transformationsToOperations } from './lib/transformationUtils.js';\nimport { initState } from './state.js';\nimport { TEMPLATE } from './template.js';\nimport { TabId } from './toolbar-constants.js';\n\nexport class CloudImageEditorBlock extends Block {\n  ctxOwner = true;\n  static styleAttrs = ['uc-cloud-image-editor'];\n\n  constructor() {\n    super();\n\n    this.init$ = {\n      ...this.init$,\n      ...initState(this),\n    };\n  }\n\n  /** @private */\n  _debouncedShowLoader = debounce(this._showLoader.bind(this), 300);\n\n  /**\n   * @private\n   * @param {boolean} show\n   */\n  _showLoader(show) {\n    this.$.showLoader = show;\n  }\n\n  /**\n   * To proper work, we need non-zero size the element. So, we'll wait for it.\n   *\n   * @private\n   * @returns {Promise<void>}\n   */\n  _waitForSize() {\n    const TIMEOUT = 3000;\n    return new Promise((resolve, reject) => {\n      const timeoutId = setTimeout(() => {\n        reject(new Error('[cloud-image-editor] timeout waiting for non-zero container size'));\n      }, TIMEOUT);\n      const resizeObserver = new ResizeObserver(([element]) => {\n        if (element.contentRect.width > 0 && element.contentRect.height > 0) {\n          resolve();\n          clearTimeout(timeoutId);\n          resizeObserver.disconnect();\n        }\n      });\n      resizeObserver.observe(this);\n    });\n  }\n\n  initCallback() {\n    super.initCallback();\n\n    this.$['*faderEl'] = this.ref['fader-el'];\n    this.$['*cropperEl'] = this.ref['cropper-el'];\n    this.$['*imgContainerEl'] = this.ref['img-container-el'];\n\n    this.initEditor();\n  }\n\n  async updateImage() {\n    if (!this.isConnected) {\n      return;\n    }\n    await this._waitForSize();\n\n    if (this.$.cdnUrl) {\n      const uuid = extractUuid(this.$.cdnUrl);\n      const originalUrl = createOriginalUrl(this.$.cdnUrl, uuid);\n      if (originalUrl === this.$['*originalUrl']) {\n        return;\n      }\n      this.$['*originalUrl'] = originalUrl;\n      const operations = extractOperations(this.$.cdnUrl);\n      const transformations = operationsToTransformations(operations);\n      this.$['*editorTransformations'] = transformations;\n    } else if (this.$.uuid) {\n      const originalUrl = createOriginalUrl(this.cfg.cdnCname, this.$.uuid);\n      if (originalUrl === this.$['*originalUrl']) {\n        return;\n      }\n      this.$['*originalUrl'] = originalUrl;\n      this.$['*editorTransformations'] = {};\n    } else {\n      throw new Error('No UUID nor CDN URL provided');\n    }\n\n    if (this.$['*tabId'] === TabId.CROP) {\n      this.$['*cropperEl'].deactivate({ reset: true });\n    } else {\n      this.$['*faderEl'].deactivate();\n    }\n\n    try {\n      const cdnUrl = await this.proxyUrl(createCdnUrl(this.$['*originalUrl'], createCdnUrlModifiers('json')));\n      const json = await fetch(cdnUrl).then((response) => response.json());\n\n      const { width, height } = /** @type {{ width: number; height: number }} */ (json);\n      this.$['*imageSize'] = { width, height };\n\n      if (this.$['*tabId'] === TabId.CROP) {\n        this.$['*cropperEl'].activate(this.$['*imageSize']);\n      } else {\n        this.$['*faderEl'].activate({ url: this.$['*originalUrl'] });\n      }\n    } catch (err) {\n      if (err) {\n        console.error('Failed to load image info', err);\n      }\n    }\n  }\n\n  async initEditor() {\n    try {\n      await this._waitForSize();\n    } catch (err) {\n      if (this.isConnected) {\n        // @ts-ignore TODO: fix this\n        console.error(err.message);\n      }\n      return;\n    }\n\n    this.ref['img-el'].addEventListener('load', () => {\n      this._imgLoading = false;\n      this._debouncedShowLoader(false);\n\n      if (this.$.src !== TRANSPARENT_PIXEL_SRC) {\n        this.$['*networkProblems'] = false;\n      }\n    });\n\n    this.ref['img-el'].addEventListener('error', () => {\n      this._imgLoading = false;\n      this._debouncedShowLoader(false);\n\n      this.$['*networkProblems'] = true;\n    });\n\n    this.sub('src', (src) => {\n      let el = this.ref['img-el'];\n      if (el.src !== src) {\n        this._imgLoading = true;\n        el.src = src || TRANSPARENT_PIXEL_SRC;\n      }\n    });\n\n    this.sub('cropPreset', (val) => {\n      this.$['*cropPresetList'] = parseCropPreset(val);\n    });\n\n    this.sub(\n      'tabs',\n      /** @param {string} val */ (val) => {\n        this.$['*tabList'] = parseTabs(val);\n      },\n    );\n\n    this.sub('*tabId', (tabId) => {\n      this.ref['img-el'].className = classNames('uc-image', {\n        'uc-image_hidden_to_cropper': tabId === TabId.CROP,\n        'uc-image_hidden_effects': tabId !== TabId.CROP,\n      });\n    });\n\n    this.classList.add('uc-editor_ON');\n\n    this.sub('*networkProblems', (networkProblems) => {\n      this.$['presence.networkProblems'] = networkProblems;\n      this.$['presence.modalCaption'] = !networkProblems;\n    });\n\n    this.sub(\n      '*editorTransformations',\n      (transformations) => {\n        if (Object.keys(transformations).length === 0) {\n          return;\n        }\n        let originalUrl = this.$['*originalUrl'];\n        let cdnUrlModifiers = createCdnUrlModifiers(transformationsToOperations(transformations), 'preview');\n        let cdnUrl = createCdnUrl(originalUrl, cdnUrlModifiers);\n\n        /** @type {import('./types.js').ApplyResult} */\n        let eventData = {\n          originalUrl,\n          cdnUrlModifiers,\n          cdnUrl,\n          transformations,\n        };\n        this.dispatchEvent(\n          new CustomEvent('change', {\n            detail: eventData,\n            bubbles: true,\n            composed: true,\n          }),\n        );\n      },\n      false,\n    );\n\n    this.sub('uuid', (val) => val && this.updateImage());\n    this.sub('cdnUrl', (val) => val && this.updateImage());\n  }\n}\n\nCloudImageEditorBlock.template = TEMPLATE;\nCloudImageEditorBlock.bindAttributes({\n  uuid: 'uuid',\n  'cdn-url': 'cdnUrl',\n  'crop-preset': 'cropPreset',\n  tabs: 'tabs',\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}