{"ast":null,"code":"var _jsxFileName = \"/Users/kavinth/Documents/GitHub/Smart-Alert/Smart-Alert-new/frontend/src/Components/DisplayNotices/DisplayNotices.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { FileUploaderRegular } from '@uploadcare/react-uploader';\nimport '@uploadcare/react-uploader/core.css';\nimport { api } from '../../utils/api';\nimport './DisplayNotices.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst DisplayNotices = ({\n  userType: propUserType,\n  classId: propClassId\n}) => {\n  _s();\n  const [notices, setNotices] = useState([]);\n  const [categoryFilter, setCategoryFilter] = useState('');\n  const [userType, setUserType] = useState(propUserType || null);\n  const [classId, setClassId] = useState(propClassId || null);\n  const [deleteId, setDeleteId] = useState(null);\n  const [editId, setEditId] = useState(null);\n  const [editTitle, setEditTitle] = useState('');\n  const [editNotice, setEditNotice] = useState('');\n  const [editCategory, setEditCategory] = useState('');\n  const [editAttachment, setEditAttachment] = useState(null);\n  const [editAttachmentUrl, setEditAttachmentUrl] = useState('');\n  const uploaderRef = useRef(null);\n  const navigate = useNavigate();\n\n  // Fetch user data to determine userType\n  useEffect(() => {\n    const fetchUserData = async () => {\n      try {\n        const userData = await api('/auth/me');\n        const user = (userData === null || userData === void 0 ? void 0 : userData.user) || userData;\n        const detectedUserType = (user === null || user === void 0 ? void 0 : user.userType) || (user === null || user === void 0 ? void 0 : user.role);\n        console.log('DisplayNotices - User Type:', detectedUserType);\n        setUserType(detectedUserType);\n        setClassId(user === null || user === void 0 ? void 0 : user.classId);\n      } catch (err) {\n        console.error('Failed to load user data:', err);\n      }\n    };\n\n    // Only fetch if userType not provided via props\n    if (!propUserType) {\n      fetchUserData();\n    }\n  }, [propUserType]);\n\n  // Backspace navigation (only when not editing)\n  useEffect(() => {\n    const handleBackspace = e => {\n      // Don't navigate if user is typing in an input, textarea, or select element\n      const target = e.target;\n      const isEditing = target.tagName === 'INPUT' || target.tagName === 'TEXTAREA' || target.tagName === 'SELECT' || target.isContentEditable;\n      if (e.key === 'Backspace' && !isEditing) {\n        e.preventDefault();\n        navigate(-1);\n      }\n    };\n    window.addEventListener('keydown', handleBackspace);\n    return () => window.removeEventListener('keydown', handleBackspace);\n  }, [navigate]);\n  const fetchNotices = async () => {\n    try {\n      const res = await axios.get('/notices');\n      const fetchedNotices = res.data.notices || [];\n      console.log('Fetched notices:', fetchedNotices);\n      // Log first notice attachment for debugging\n      if (fetchedNotices.length > 0 && fetchedNotices[0].attachment) {\n        console.log('First notice attachment:', fetchedNotices[0].attachment);\n      }\n      setNotices(fetchedNotices);\n    } catch (err) {\n      console.error('Failed to load notices:', err);\n    }\n  };\n  useEffect(() => {\n    fetchNotices();\n  }, []);\n\n  // School notices: createdBy === 'admin'\n  const schoolNotices = notices.filter(n => n.createdBy === 'admin');\n  // Class notices: createdBy !== 'admin' and (for parents, only their class)\n  const classNotices = notices.filter(n => n.createdBy !== 'admin' && n.classId === classId);\n  // Filter notices by category if selected\n  const filteredSchoolNotices = schoolNotices.filter(n => !categoryFilter || n.category === categoryFilter);\n  const filteredClassNotices = classNotices.filter(n => !categoryFilter || n.category === categoryFilter);\n\n  // Helper to check if attachment has valid data\n  function hasValidAttachment(attachment) {\n    if (!attachment) return false;\n    if (typeof attachment === 'object') {\n      const keys = Object.keys(attachment);\n      if (keys.length === 0) return false;\n      return !!(attachment.url || attachment.uuid);\n    }\n    if (typeof attachment === 'string' && attachment.length > 0) {\n      return true;\n    }\n    return false;\n  }\n\n  // Helper to get correct attachment path or URL\n  function getAttachmentPath(attachment, noticeId) {\n    if (!attachment) return '';\n    console.log('getAttachmentPath called with:', {\n      attachment,\n      noticeId,\n      attachmentType: typeof attachment,\n      attachmentKeys: typeof attachment === 'object' ? Object.keys(attachment) : 'N/A'\n    });\n\n    // If attachment is an object\n    if (typeof attachment === 'object') {\n      // Check if it's an empty object\n      const keys = Object.keys(attachment);\n      if (keys.length === 0) {\n        console.log('Empty attachment object, skipping');\n        return '';\n      }\n\n      // If full URL is present, use it\n      if (attachment.url) {\n        console.log('Using attachment.url:', attachment.url);\n        return attachment.url;\n      }\n      // If only UUID is present, construct the Uploadcare URL\n      if (attachment.uuid) {\n        const constructedUrl = `https://ucarecdn.com/${attachment.uuid}/`;\n        console.log('Constructed URL from UUID:', constructedUrl);\n        return constructedUrl;\n      }\n    }\n\n    // If attachment is a string (could be UUID or URL)\n    if (typeof attachment === 'string') {\n      // If it's already a full URL, return it\n      if (attachment.startsWith('http')) {\n        console.log('Using string URL:', attachment);\n        return attachment;\n      }\n      // If it looks like a UUID, construct the Uploadcare URL\n      if (attachment.length > 20 && !attachment.includes('/')) {\n        const constructedUrl = `https://ucarecdn.com/${attachment}/`;\n        console.log('Constructed URL from string UUID:', constructedUrl);\n        return constructedUrl;\n      }\n    }\n    console.log('No valid attachment data found');\n    return '';\n  }\n\n  // Helper to handle attachment download\n  const handleDownloadAttachment = async (attachment, noticeId, filename) => {\n    try {\n      const url = getAttachmentPath(attachment, noticeId);\n      if (!url) return;\n\n      // For Uploadcare URLs, open in new tab (they handle downloads)\n      if (url.includes('ucarecdn.com')) {\n        window.open(url, '_blank');\n        return;\n      }\n\n      // For local API endpoints, fetch and download\n      const response = await fetch(url);\n      const blob = await response.blob();\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = filename || 'attachment';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(downloadUrl);\n    } catch (err) {\n      console.error('Failed to download attachment:', err);\n      alert('Failed to download attachment. Please try again.');\n    }\n  };\n\n  // Handle inline edit notice\n  const handleUpdateNotice = notice => {\n    setEditId(notice._id);\n    setEditTitle(notice.title);\n    setEditNotice(notice.notice);\n    setEditCategory(notice.category || 'General');\n    // Store existing attachment data\n    if (notice.attachment && notice.attachment.url) {\n      setEditAttachment(notice.attachment);\n      setEditAttachmentUrl(notice.attachment.url);\n    } else {\n      setEditAttachment(null);\n      setEditAttachmentUrl('');\n    }\n    // Scroll to the edit form\n    setTimeout(() => {\n      const element = document.getElementById(`edit-form-${notice._id}`);\n      if (element) {\n        element.scrollIntoView({\n          behavior: 'smooth',\n          block: 'center'\n        });\n      }\n    }, 100);\n  };\n\n  // Handle cancel edit\n  const handleCancelEdit = () => {\n    setEditId(null);\n    setEditTitle('');\n    setEditNotice('');\n    setEditCategory('');\n    setEditAttachment(null);\n    setEditAttachmentUrl('');\n  };\n\n  // Handle delete attachment\n  const handleDeleteAttachment = () => {\n    setEditAttachment(null);\n    setEditAttachmentUrl('');\n  };\n\n  // Handle Uploadcare file upload success\n  const handleUploadSuccess = file => {\n    if (file && file.cdnUrl) {\n      const attachmentData = {\n        url: file.cdnUrl,\n        uuid: file.uuid,\n        contentType: file.mimeType,\n        filename: file.name,\n        size: file.size\n      };\n      setEditAttachment(attachmentData);\n      setEditAttachmentUrl(file.cdnUrl);\n      console.log('File uploaded to Uploadcare:', attachmentData);\n    }\n  };\n\n  // Handle save edit\n  const handleSaveEdit = async () => {\n    try {\n      const noticeData = {\n        title: editTitle,\n        notice: editNotice,\n        category: editCategory,\n        attachment: editAttachmentUrl === '' ? null : editAttachment || 'keep',\n        updatedAt: new Date().toISOString()\n      };\n      await axios.put(`/notices/${editId}`, noticeData, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      handleCancelEdit();\n      fetchNotices();\n    } catch (err) {\n      console.error('Error updating notice:', err);\n      alert('Failed to update notice. Please try again.');\n    }\n  };\n\n  // Handle delete notice\n  const handleDeleteNotice = noticeId => {\n    setDeleteId(noticeId);\n  };\n\n  // Confirm delete\n  const confirmDelete = async () => {\n    try {\n      await axios.delete(`/notices/${deleteId}`);\n      setDeleteId(null);\n      fetchNotices();\n    } catch (err) {\n      console.error('Failed to delete notice:', err);\n      alert('Failed to delete notice. Please try again.');\n      setDeleteId(null);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"section-title\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Notices\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"View all school and class notices\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }, this), (userType === 'Admin' || userType === 'Teacher' || userType === 'admin' || userType === 'teacher') && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-primary create-notice-btn\",\n        onClick: () => navigate(userType === 'Admin' || userType === 'admin' ? '/admin-create-notice' : '/teacher-create-notice'),\n        children: \"+ Create New Notice\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"display-notices-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container home-page\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"notices-filter-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"categoryFilter\",\n            children: \"Search by Category:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"categoryFilter\",\n            value: categoryFilter,\n            onChange: e => setCategoryFilter(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"All\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"General\",\n              children: \"General\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Exam\",\n              children: \"Exam\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Holiday\",\n              children: \"Holiday\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Event\",\n              children: \"Event\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Other\",\n              children: \"Other\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"notices-subtopics\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"notices-subtopic\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"School Notices\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"notices-section\",\n              children: filteredSchoolNotices.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"No school notices.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 55\n              }, this) : filteredSchoolNotices.map(n => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"notice-card\",\n                id: `notice-${n._id}`,\n                children: editId === n._id ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"edit-form\",\n                  id: `edit-form-${n._id}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    value: editTitle,\n                    onChange: e => setEditTitle(e.target.value),\n                    placeholder: \"Title\",\n                    className: \"edit-input\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 312,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    value: editNotice,\n                    onChange: e => setEditNotice(e.target.value),\n                    placeholder: \"Notice\",\n                    className: \"edit-textarea\",\n                    rows: \"5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 319,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: editCategory,\n                    onChange: e => setEditCategory(e.target.value),\n                    className: \"edit-select\",\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"General\",\n                      children: \"General\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 331,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"Exam\",\n                      children: \"Exam\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 332,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"Holiday\",\n                      children: \"Holiday\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 333,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"Event\",\n                      children: \"Event\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 334,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"Other\",\n                      children: \"Other\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 335,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 326,\n                    columnNumber: 25\n                  }, this), editAttachmentUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"current-attachment\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Current: \", (editAttachment === null || editAttachment === void 0 ? void 0 : editAttachment.filename) || 'Attachment']\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 339,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                      href: editAttachmentUrl,\n                      target: \"_blank\",\n                      rel: \"noopener noreferrer\",\n                      children: \"View\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 340,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      type: \"button\",\n                      className: \"btn-remove\",\n                      onClick: handleDeleteAttachment,\n                      children: \"Remove\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 341,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 338,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"upload-label\",\n                    children: \"Upload New Attachment (optional)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 344,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(FileUploaderRegular, {\n                    ref: uploaderRef,\n                    pubkey: \"e8c9790d2d0cfc27cb41\",\n                    maxLocalFileSizeBytes: 20971520,\n                    multiple: false,\n                    sourceList: \"local, url, camera, dropbox\",\n                    classNameUploader: \"uc-light\",\n                    onFileUploadSuccess: handleUploadSuccess\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 345,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"edit-actions\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn-save\",\n                      onClick: handleSaveEdit,\n                      children: \"Save\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 355,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn-cancel\",\n                      onClick: handleCancelEdit,\n                      children: \"Cancel\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 356,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 354,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 311,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: n.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 361,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: n.notice\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 362,\n                    columnNumber: 25\n                  }, this), hasValidAttachment(n.attachment) && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"notice-attachment\",\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => handleDownloadAttachment(n.attachment, n._id, getFileName(n.attachment)),\n                      style: {\n                        display: 'flex',\n                        alignItems: 'center',\n                        textDecoration: 'none',\n                        color: '#222',\n                        background: 'none',\n                        border: 'none',\n                        cursor: 'pointer',\n                        padding: 0\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                        src: \"https://cdn.jsdelivr.net/gh/file-icons/icons/svg/pdf.svg\",\n                        alt: \"pdf\",\n                        style: {\n                          width: 28,\n                          height: 28,\n                          marginRight: 8\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 369,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: getFileName(n.attachment)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 370,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 365,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 364,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"notice-category\",\n                    children: n.category\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 374,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"notice-date\",\n                    children: new Date(n.publishedAt).toLocaleString()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 375,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"notice-author\",\n                    children: [\"By: \", n.createdBy]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 376,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"notice-actions\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn-primary notice-download\",\n                      onClick: () => downloadNoticeAsPDF(n.title, n.notice, n.publishedAt, n.createdBy),\n                      children: \"Download Notice as PDF\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 378,\n                      columnNumber: 27\n                    }, this), (userType === 'Admin' || userType === 'admin') && /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn-update\",\n                        onClick: () => handleUpdateNotice(n),\n                        children: \"Update\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 384,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn-delete\",\n                        onClick: () => handleDeleteNotice(n._id),\n                        children: \"Delete\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 388,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 377,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true)\n              }, n._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"notices-subtopic\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Class Notices\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"notices-section\",\n              children: filteredClassNotices.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"No class notices.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 404,\n                columnNumber: 54\n              }, this) : filteredClassNotices.map(n => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"notice-card\",\n                id: `notice-${n._id}`,\n                children: editId === n._id ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"edit-form\",\n                  id: `edit-form-${n._id}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    value: editTitle,\n                    onChange: e => setEditTitle(e.target.value),\n                    placeholder: \"Title\",\n                    className: \"edit-input\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 408,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    value: editNotice,\n                    onChange: e => setEditNotice(e.target.value),\n                    placeholder: \"Notice\",\n                    className: \"edit-textarea\",\n                    rows: \"5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 415,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: editCategory,\n                    onChange: e => setEditCategory(e.target.value),\n                    className: \"edit-select\",\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"General\",\n                      children: \"General\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 427,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"Exam\",\n                      children: \"Exam\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 428,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"Holiday\",\n                      children: \"Holiday\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 429,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"Event\",\n                      children: \"Event\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 430,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"Other\",\n                      children: \"Other\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 431,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 422,\n                    columnNumber: 25\n                  }, this), editAttachmentUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"current-attachment\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Current: \", (editAttachment === null || editAttachment === void 0 ? void 0 : editAttachment.filename) || 'Attachment']\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 435,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                      href: editAttachmentUrl,\n                      target: \"_blank\",\n                      rel: \"noopener noreferrer\",\n                      children: \"View\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 436,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      type: \"button\",\n                      className: \"btn-remove\",\n                      onClick: handleDeleteAttachment,\n                      children: \"Remove\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 437,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 434,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"upload-label\",\n                    children: \"Upload New Attachment (optional)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 440,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(FileUploaderRegular, {\n                    ref: uploaderRef,\n                    pubkey: \"e8c9790d2d0cfc27cb41\",\n                    maxLocalFileSizeBytes: 20971520,\n                    multiple: false,\n                    sourceList: \"local, url, camera, dropbox\",\n                    classNameUploader: \"uc-light\",\n                    onFileUploadSuccess: handleUploadSuccess\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 441,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"edit-actions\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn-save\",\n                      onClick: handleSaveEdit,\n                      children: \"Save\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 451,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn-cancel\",\n                      onClick: handleCancelEdit,\n                      children: \"Cancel\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 452,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 450,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 407,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: n.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 457,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: n.notice\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 458,\n                    columnNumber: 25\n                  }, this), hasValidAttachment(n.attachment) && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"notice-attachment\",\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => handleDownloadAttachment(n.attachment, n._id, getFileName(n.attachment)),\n                      style: {\n                        display: 'flex',\n                        alignItems: 'center',\n                        textDecoration: 'none',\n                        color: '#222',\n                        background: 'none',\n                        border: 'none',\n                        cursor: 'pointer',\n                        padding: 0\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                        src: \"https://cdn.jsdelivr.net/gh/file-icons/icons/svg/pdf.svg\",\n                        alt: \"pdf\",\n                        style: {\n                          width: 28,\n                          height: 28,\n                          marginRight: 8\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 465,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: getFileName(n.attachment)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 466,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 461,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 460,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"notice-category\",\n                    children: n.category\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 470,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"notice-date\",\n                    children: new Date(n.publishedAt).toLocaleString()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 471,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"notice-author\",\n                    children: [\"By: \", n.createdBy]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 472,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"notice-actions\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn-primary notice-download\",\n                      onClick: () => downloadNoticeAsPDF(n.title, n.notice),\n                      children: \"Download Notice as PDF\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 474,\n                      columnNumber: 27\n                    }, this), (userType === 'Admin' || userType === 'admin') && /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn-update\",\n                        onClick: () => handleUpdateNotice(n),\n                        children: \"Update\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 480,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn-delete\",\n                        onClick: () => handleDeleteNotice(n._id),\n                        children: \"Delete\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 484,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 473,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true)\n              }, n._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 7\n    }, this), deleteId && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Confirm Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 503,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Are you sure you want to delete this notice? This action cannot be undone.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: '#d32f2f',\n            fontWeight: 500,\n            marginTop: 8\n          },\n          children: \"If there is an attached file, it will also be deleted.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '16px',\n            justifyContent: 'center',\n            marginTop: '18px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-primary\",\n            onClick: confirmDelete,\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 509,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-primary\",\n            style: {\n              background: '#bbb',\n              color: '#222'\n            },\n            onClick: () => setDeleteId(null),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 510,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 502,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-backdrop\",\n        style: {\n          pointerEvents: 'none'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 501,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n// Helper to get file name from attachment path or object\n_s(DisplayNotices, \"/2om5fQ+O8YYRZyW0lkW7GeD2k8=\", false, function () {\n  return [useNavigate];\n});\n_c = DisplayNotices;\nfunction getFileName(attachment) {\n  if (!attachment) return '';\n\n  // If attachment is an object with filename property\n  if (typeof attachment === 'object' && attachment.filename) {\n    return attachment.filename;\n  }\n\n  // If attachment is a string path\n  const pathStr = typeof attachment === 'string' ? attachment : attachment.path || '';\n  if (!pathStr) return '';\n  return pathStr.split('/').pop().split('\\\\').pop();\n}\n\n// Helper to download notice as PDF\nfunction downloadNoticeAsPDF(title, notice, publishedAt, createdBy) {\n  // Use jsPDF for PDF generation\n  const script = document.createElement('script');\n  script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js';\n  script.onload = () => {\n    const {\n      jsPDF\n    } = window.jspdf;\n    const doc = new jsPDF();\n    // Header\n    doc.setFontSize(18);\n    doc.setTextColor(22, 119, 210);\n    doc.text('WEBSTER INTERNATIONAL SCHOOL', 10, 15);\n    // Publisher and Date\n    doc.setFontSize(12);\n    const dateStr = publishedAt ? new Date(publishedAt).toLocaleString() : '';\n    doc.text(`Published by: ${createdBy || 'Unknown'}`, 10, 25);\n    doc.text(`Published at: ${dateStr}`, 10, 33);\n    // Title\n    doc.setFontSize(16);\n    doc.setTextColor(0, 0, 0);\n    doc.text(title, 10, 45);\n    // Notice\n    doc.setFontSize(12);\n    doc.text(notice, 10, 60);\n    doc.save(`${title}-notice.pdf`);\n  };\n  document.body.appendChild(script);\n}\nexport default DisplayNotices;\nvar _c;\n$RefreshReg$(_c, \"DisplayNotices\");","map":{"version":3,"names":["React","useEffect","useState","useRef","useNavigate","axios","FileUploaderRegular","api","jsxDEV","_jsxDEV","Fragment","_Fragment","DisplayNotices","userType","propUserType","classId","propClassId","_s","notices","setNotices","categoryFilter","setCategoryFilter","setUserType","setClassId","deleteId","setDeleteId","editId","setEditId","editTitle","setEditTitle","editNotice","setEditNotice","editCategory","setEditCategory","editAttachment","setEditAttachment","editAttachmentUrl","setEditAttachmentUrl","uploaderRef","navigate","fetchUserData","userData","user","detectedUserType","role","console","log","err","error","handleBackspace","e","target","isEditing","tagName","isContentEditable","key","preventDefault","window","addEventListener","removeEventListener","fetchNotices","res","get","fetchedNotices","data","length","attachment","schoolNotices","filter","n","createdBy","classNotices","filteredSchoolNotices","category","filteredClassNotices","hasValidAttachment","keys","Object","url","uuid","getAttachmentPath","noticeId","attachmentType","attachmentKeys","constructedUrl","startsWith","includes","handleDownloadAttachment","filename","open","response","fetch","blob","downloadUrl","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","alert","handleUpdateNotice","notice","_id","title","setTimeout","element","getElementById","scrollIntoView","behavior","block","handleCancelEdit","handleDeleteAttachment","handleUploadSuccess","file","cdnUrl","attachmentData","contentType","mimeType","name","size","handleSaveEdit","noticeData","updatedAt","Date","toISOString","put","headers","handleDeleteNotice","confirmDelete","delete","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onClick","htmlFor","id","value","onChange","map","type","placeholder","rows","rel","ref","pubkey","maxLocalFileSizeBytes","multiple","sourceList","classNameUploader","onFileUploadSuccess","getFileName","style","display","alignItems","textDecoration","color","background","border","cursor","padding","src","alt","width","height","marginRight","publishedAt","toLocaleString","downloadNoticeAsPDF","fontWeight","marginTop","gap","justifyContent","pointerEvents","_c","pathStr","path","split","pop","script","onload","jsPDF","jspdf","doc","setFontSize","setTextColor","text","dateStr","save","$RefreshReg$"],"sources":["/Users/kavinth/Documents/GitHub/Smart-Alert/Smart-Alert-new/frontend/src/Components/DisplayNotices/DisplayNotices.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { FileUploaderRegular } from '@uploadcare/react-uploader';\nimport '@uploadcare/react-uploader/core.css';\nimport { api } from '../../utils/api';\nimport './DisplayNotices.css';\n\nconst DisplayNotices = ({ userType: propUserType, classId: propClassId }) => {\n  const [notices, setNotices] = useState([]);\n  const [categoryFilter, setCategoryFilter] = useState('');\n  const [userType, setUserType] = useState(propUserType || null);\n  const [classId, setClassId] = useState(propClassId || null);\n  const [deleteId, setDeleteId] = useState(null);\n  const [editId, setEditId] = useState(null);\n  const [editTitle, setEditTitle] = useState('');\n  const [editNotice, setEditNotice] = useState('');\n  const [editCategory, setEditCategory] = useState('');\n  const [editAttachment, setEditAttachment] = useState(null);\n  const [editAttachmentUrl, setEditAttachmentUrl] = useState('');\n  const uploaderRef = useRef(null);\n\n  const navigate = useNavigate();\n  \n  // Fetch user data to determine userType\n  useEffect(() => {\n    const fetchUserData = async () => {\n      try {\n        const userData = await api('/auth/me');\n        const user = userData?.user || userData;\n        const detectedUserType = user?.userType || user?.role;\n        console.log('DisplayNotices - User Type:', detectedUserType);\n        setUserType(detectedUserType);\n        setClassId(user?.classId);\n      } catch (err) {\n        console.error('Failed to load user data:', err);\n      }\n    };\n    \n    // Only fetch if userType not provided via props\n    if (!propUserType) {\n      fetchUserData();\n    }\n  }, [propUserType]);\n  \n  // Backspace navigation (only when not editing)\n  useEffect(() => {\n    const handleBackspace = (e) => {\n      // Don't navigate if user is typing in an input, textarea, or select element\n      const target = e.target;\n      const isEditing = target.tagName === 'INPUT' || \n                       target.tagName === 'TEXTAREA' || \n                       target.tagName === 'SELECT' ||\n                       target.isContentEditable;\n      \n      if (e.key === 'Backspace' && !isEditing) {\n        e.preventDefault();\n        navigate(-1);\n      }\n    };\n    window.addEventListener('keydown', handleBackspace);\n    return () => window.removeEventListener('keydown', handleBackspace);\n  }, [navigate]);\n\n  const fetchNotices = async () => {\n    try {\n      const res = await axios.get('/notices');\n      const fetchedNotices = res.data.notices || [];\n      console.log('Fetched notices:', fetchedNotices);\n      // Log first notice attachment for debugging\n      if (fetchedNotices.length > 0 && fetchedNotices[0].attachment) {\n        console.log('First notice attachment:', fetchedNotices[0].attachment);\n      }\n      setNotices(fetchedNotices);\n    } catch (err) {\n      console.error('Failed to load notices:', err);\n    }\n  };\n\n  useEffect(() => {\n    fetchNotices();\n  }, []);\n\n  // School notices: createdBy === 'admin'\n  const schoolNotices = notices.filter(n => n.createdBy === 'admin');\n  // Class notices: createdBy !== 'admin' and (for parents, only their class)\n  const classNotices = notices.filter(n => n.createdBy !== 'admin' && n.classId === classId);\n  // Filter notices by category if selected\n  const filteredSchoolNotices = schoolNotices.filter(n => !categoryFilter || n.category === categoryFilter);\n  const filteredClassNotices = classNotices.filter(n => !categoryFilter || n.category === categoryFilter);\n\n  // Helper to check if attachment has valid data\n  function hasValidAttachment(attachment) {\n    if (!attachment) return false;\n    if (typeof attachment === 'object') {\n      const keys = Object.keys(attachment);\n      if (keys.length === 0) return false;\n      return !!(attachment.url || attachment.uuid);\n    }\n    if (typeof attachment === 'string' && attachment.length > 0) {\n      return true;\n    }\n    return false;\n  }\n\n  // Helper to get correct attachment path or URL\n  function getAttachmentPath(attachment, noticeId) {\n    if (!attachment) return '';\n    \n    console.log('getAttachmentPath called with:', { attachment, noticeId, attachmentType: typeof attachment, attachmentKeys: typeof attachment === 'object' ? Object.keys(attachment) : 'N/A' });\n    \n    // If attachment is an object\n    if (typeof attachment === 'object') {\n      // Check if it's an empty object\n      const keys = Object.keys(attachment);\n      if (keys.length === 0) {\n        console.log('Empty attachment object, skipping');\n        return '';\n      }\n      \n      // If full URL is present, use it\n      if (attachment.url) {\n        console.log('Using attachment.url:', attachment.url);\n        return attachment.url;\n      }\n      // If only UUID is present, construct the Uploadcare URL\n      if (attachment.uuid) {\n        const constructedUrl = `https://ucarecdn.com/${attachment.uuid}/`;\n        console.log('Constructed URL from UUID:', constructedUrl);\n        return constructedUrl;\n      }\n    }\n    \n    // If attachment is a string (could be UUID or URL)\n    if (typeof attachment === 'string') {\n      // If it's already a full URL, return it\n      if (attachment.startsWith('http')) {\n        console.log('Using string URL:', attachment);\n        return attachment;\n      }\n      // If it looks like a UUID, construct the Uploadcare URL\n      if (attachment.length > 20 && !attachment.includes('/')) {\n        const constructedUrl = `https://ucarecdn.com/${attachment}/`;\n        console.log('Constructed URL from string UUID:', constructedUrl);\n        return constructedUrl;\n      }\n    }\n    \n    console.log('No valid attachment data found');\n    return '';\n  }\n\n  // Helper to handle attachment download\n  const handleDownloadAttachment = async (attachment, noticeId, filename) => {\n    try {\n      const url = getAttachmentPath(attachment, noticeId);\n      if (!url) return;\n\n      // For Uploadcare URLs, open in new tab (they handle downloads)\n      if (url.includes('ucarecdn.com')) {\n        window.open(url, '_blank');\n        return;\n      }\n\n      // For local API endpoints, fetch and download\n      const response = await fetch(url);\n      const blob = await response.blob();\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = filename || 'attachment';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(downloadUrl);\n    } catch (err) {\n      console.error('Failed to download attachment:', err);\n      alert('Failed to download attachment. Please try again.');\n    }\n  };\n\n  // Handle inline edit notice\n  const handleUpdateNotice = (notice) => {\n    setEditId(notice._id);\n    setEditTitle(notice.title);\n    setEditNotice(notice.notice);\n    setEditCategory(notice.category || 'General');\n    // Store existing attachment data\n    if (notice.attachment && notice.attachment.url) {\n      setEditAttachment(notice.attachment);\n      setEditAttachmentUrl(notice.attachment.url);\n    } else {\n      setEditAttachment(null);\n      setEditAttachmentUrl('');\n    }\n    // Scroll to the edit form\n    setTimeout(() => {\n      const element = document.getElementById(`edit-form-${notice._id}`);\n      if (element) {\n        element.scrollIntoView({ behavior: 'smooth', block: 'center' });\n      }\n    }, 100);\n  };\n\n  // Handle cancel edit\n  const handleCancelEdit = () => {\n    setEditId(null);\n    setEditTitle('');\n    setEditNotice('');\n    setEditCategory('');\n    setEditAttachment(null);\n    setEditAttachmentUrl('');\n  };\n\n  // Handle delete attachment\n  const handleDeleteAttachment = () => {\n    setEditAttachment(null);\n    setEditAttachmentUrl('');\n  };\n\n  // Handle Uploadcare file upload success\n  const handleUploadSuccess = (file) => {\n    if (file && file.cdnUrl) {\n      const attachmentData = {\n        url: file.cdnUrl,\n        uuid: file.uuid,\n        contentType: file.mimeType,\n        filename: file.name,\n        size: file.size\n      };\n      setEditAttachment(attachmentData);\n      setEditAttachmentUrl(file.cdnUrl);\n      console.log('File uploaded to Uploadcare:', attachmentData);\n    }\n  };\n\n  // Handle save edit\n  const handleSaveEdit = async () => {\n    try {\n      const noticeData = {\n        title: editTitle,\n        notice: editNotice,\n        category: editCategory,\n        attachment: editAttachmentUrl === '' ? null : (editAttachment || 'keep'),\n        updatedAt: new Date().toISOString()\n      };\n      await axios.put(`/notices/${editId}`, noticeData, {\n        headers: { 'Content-Type': 'application/json' },\n      });\n      handleCancelEdit();\n      fetchNotices();\n    } catch (err) {\n      console.error('Error updating notice:', err);\n      alert('Failed to update notice. Please try again.');\n    }\n  };\n\n  // Handle delete notice\n  const handleDeleteNotice = (noticeId) => {\n    setDeleteId(noticeId);\n  };\n\n  // Confirm delete\n  const confirmDelete = async () => {\n    try {\n      await axios.delete(`/notices/${deleteId}`);\n      setDeleteId(null);\n      fetchNotices();\n    } catch (err) {\n      console.error('Failed to delete notice:', err);\n      alert('Failed to delete notice. Please try again.');\n      setDeleteId(null);\n    }\n  };\n\n\n  return (\n    <>\n      <div className=\"section-title\">\n        <h2>Notices</h2>\n        <p>View all school and class notices</p>\n        {(userType === 'Admin' || userType === 'Teacher' || userType === 'admin' || userType === 'teacher') && (\n          <button \n            className=\"btn-primary create-notice-btn\"\n            onClick={() => navigate((userType === 'Admin' || userType === 'admin') ? '/admin-create-notice' : '/teacher-create-notice')}\n          >\n            + Create New Notice\n          </button>\n        )}\n      </div>\n      <div className=\"display-notices-container\">\n        <div className=\"container home-page\">\n          <div className=\"notices-filter-row\">\n            <label htmlFor=\"categoryFilter\">Search by Category:</label>\n            <select id=\"categoryFilter\" value={categoryFilter} onChange={e => setCategoryFilter(e.target.value)}>\n              <option value=\"\">All</option>\n              <option value=\"General\">General</option>\n              <option value=\"Exam\">Exam</option>\n              <option value=\"Holiday\">Holiday</option>\n              <option value=\"Event\">Event</option>\n              <option value=\"Other\">Other</option>\n            </select>\n          </div>\n          <div className=\"notices-subtopics\">\n            <div className=\"notices-subtopic\">\n              <h3>School Notices</h3>\n              <div className=\"notices-section\">\n                {filteredSchoolNotices.length === 0 ? <p>No school notices.</p> : filteredSchoolNotices.map(n => (\n                  <div className=\"notice-card\" key={n._id} id={`notice-${n._id}`}>\n                    {editId === n._id ? (\n                      <div className=\"edit-form\" id={`edit-form-${n._id}`}>\n                        <input\n                          type=\"text\"\n                          value={editTitle}\n                          onChange={e => setEditTitle(e.target.value)}\n                          placeholder=\"Title\"\n                          className=\"edit-input\"\n                        />\n                        <textarea\n                          value={editNotice}\n                          onChange={e => setEditNotice(e.target.value)}\n                          placeholder=\"Notice\"\n                          className=\"edit-textarea\"\n                          rows=\"5\"\n                        />\n                        <select\n                          value={editCategory}\n                          onChange={e => setEditCategory(e.target.value)}\n                          className=\"edit-select\"\n                        >\n                          <option value=\"General\">General</option>\n                          <option value=\"Exam\">Exam</option>\n                          <option value=\"Holiday\">Holiday</option>\n                          <option value=\"Event\">Event</option>\n                          <option value=\"Other\">Other</option>\n                        </select>\n                        {editAttachmentUrl && (\n                          <div className=\"current-attachment\">\n                            <p>Current: {editAttachment?.filename || 'Attachment'}</p>\n                            <a href={editAttachmentUrl} target=\"_blank\" rel=\"noopener noreferrer\">View</a>\n                            <button type=\"button\" className=\"btn-remove\" onClick={handleDeleteAttachment}>Remove</button>\n                          </div>\n                        )}\n                        <label className=\"upload-label\">Upload New Attachment (optional)</label>\n                        <FileUploaderRegular\n                          ref={uploaderRef}\n                          pubkey=\"e8c9790d2d0cfc27cb41\"\n                          maxLocalFileSizeBytes={20971520}\n                          multiple={false}\n                          sourceList=\"local, url, camera, dropbox\"\n                          classNameUploader=\"uc-light\"\n                          onFileUploadSuccess={handleUploadSuccess}\n                        />\n                        <div className=\"edit-actions\">\n                          <button className=\"btn-save\" onClick={handleSaveEdit}>Save</button>\n                          <button className=\"btn-cancel\" onClick={handleCancelEdit}>Cancel</button>\n                        </div>\n                      </div>\n                    ) : (\n                      <>\n                        <h3>{n.title}</h3>\n                        <p>{n.notice}</p>\n                        {hasValidAttachment(n.attachment) && (\n                          <div className=\"notice-attachment\">\n                            <button \n                              onClick={() => handleDownloadAttachment(n.attachment, n._id, getFileName(n.attachment))}\n                              style={{ display: 'flex', alignItems: 'center', textDecoration: 'none', color: '#222', background: 'none', border: 'none', cursor: 'pointer', padding: 0 }}\n                            >\n                              <img src=\"https://cdn.jsdelivr.net/gh/file-icons/icons/svg/pdf.svg\" alt=\"pdf\" style={{ width: 28, height: 28, marginRight: 8 }} />\n                              <span>{getFileName(n.attachment)}</span>\n                            </button>\n                          </div>\n                        )}\n                        <span className=\"notice-category\">{n.category}</span>\n                        <span className=\"notice-date\">{new Date(n.publishedAt).toLocaleString()}</span>\n                        <span className=\"notice-author\">By: {n.createdBy}</span>\n                        <div className=\"notice-actions\">\n                          <button\n                            className=\"btn-primary notice-download\"\n                            onClick={() => downloadNoticeAsPDF(n.title, n.notice, n.publishedAt, n.createdBy)}\n                          >Download Notice as PDF</button>\n                          {(userType === 'Admin' || userType === 'admin') && (\n                            <>\n                              <button\n                                className=\"btn-update\"\n                                onClick={() => handleUpdateNotice(n)}\n                              >Update</button>\n                              <button\n                                className=\"btn-delete\"\n                                onClick={() => handleDeleteNotice(n._id)}\n                              >Delete</button>\n                            </>\n                          )}\n                        </div>\n                      </>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n            <div className=\"notices-subtopic\">\n              <h3>Class Notices</h3>\n              <div className=\"notices-section\">\n                {filteredClassNotices.length === 0 ? <p>No class notices.</p> : filteredClassNotices.map(n => (\n                  <div className=\"notice-card\" key={n._id} id={`notice-${n._id}`}>\n                    {editId === n._id ? (\n                      <div className=\"edit-form\" id={`edit-form-${n._id}`}>\n                        <input\n                          type=\"text\"\n                          value={editTitle}\n                          onChange={e => setEditTitle(e.target.value)}\n                          placeholder=\"Title\"\n                          className=\"edit-input\"\n                        />\n                        <textarea\n                          value={editNotice}\n                          onChange={e => setEditNotice(e.target.value)}\n                          placeholder=\"Notice\"\n                          className=\"edit-textarea\"\n                          rows=\"5\"\n                        />\n                        <select\n                          value={editCategory}\n                          onChange={e => setEditCategory(e.target.value)}\n                          className=\"edit-select\"\n                        >\n                          <option value=\"General\">General</option>\n                          <option value=\"Exam\">Exam</option>\n                          <option value=\"Holiday\">Holiday</option>\n                          <option value=\"Event\">Event</option>\n                          <option value=\"Other\">Other</option>\n                        </select>\n                        {editAttachmentUrl && (\n                          <div className=\"current-attachment\">\n                            <p>Current: {editAttachment?.filename || 'Attachment'}</p>\n                            <a href={editAttachmentUrl} target=\"_blank\" rel=\"noopener noreferrer\">View</a>\n                            <button type=\"button\" className=\"btn-remove\" onClick={handleDeleteAttachment}>Remove</button>\n                          </div>\n                        )}\n                        <label className=\"upload-label\">Upload New Attachment (optional)</label>\n                        <FileUploaderRegular\n                          ref={uploaderRef}\n                          pubkey=\"e8c9790d2d0cfc27cb41\"\n                          maxLocalFileSizeBytes={20971520}\n                          multiple={false}\n                          sourceList=\"local, url, camera, dropbox\"\n                          classNameUploader=\"uc-light\"\n                          onFileUploadSuccess={handleUploadSuccess}\n                        />\n                        <div className=\"edit-actions\">\n                          <button className=\"btn-save\" onClick={handleSaveEdit}>Save</button>\n                          <button className=\"btn-cancel\" onClick={handleCancelEdit}>Cancel</button>\n                        </div>\n                      </div>\n                    ) : (\n                      <>\n                        <h3>{n.title}</h3>\n                        <p>{n.notice}</p>\n                        {hasValidAttachment(n.attachment) && (\n                          <div className=\"notice-attachment\">\n                            <button \n                              onClick={() => handleDownloadAttachment(n.attachment, n._id, getFileName(n.attachment))}\n                              style={{ display: 'flex', alignItems: 'center', textDecoration: 'none', color: '#222', background: 'none', border: 'none', cursor: 'pointer', padding: 0 }}\n                            >\n                              <img src=\"https://cdn.jsdelivr.net/gh/file-icons/icons/svg/pdf.svg\" alt=\"pdf\" style={{ width: 28, height: 28, marginRight: 8 }} />\n                              <span>{getFileName(n.attachment)}</span>\n                            </button>\n                          </div>\n                        )}\n                        <span className=\"notice-category\">{n.category}</span>\n                        <span className=\"notice-date\">{new Date(n.publishedAt).toLocaleString()}</span>\n                        <span className=\"notice-author\">By: {n.createdBy}</span>\n                        <div className=\"notice-actions\">\n                          <button\n                            className=\"btn-primary notice-download\"\n                            onClick={() => downloadNoticeAsPDF(n.title, n.notice)}\n                          >Download Notice as PDF</button>\n                          {(userType === 'Admin' || userType === 'admin') && (\n                            <>\n                              <button\n                                className=\"btn-update\"\n                                onClick={() => handleUpdateNotice(n)}\n                              >Update</button>\n                              <button\n                                className=\"btn-delete\"\n                                onClick={() => handleDeleteNotice(n._id)}\n                              >Delete</button>\n                            </>\n                          )}\n                        </div>\n                      </>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      {deleteId && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-card\">\n            <h3>Confirm Delete</h3>\n            <p>Are you sure you want to delete this notice? This action cannot be undone.</p>\n            <p style={{ color: '#d32f2f', fontWeight: 500, marginTop: 8 }}>\n              If there is an attached file, it will also be deleted.\n            </p>\n            <div style={{ display: 'flex', gap: '16px', justifyContent: 'center', marginTop: '18px' }}>\n              <button className=\"btn-primary\" onClick={confirmDelete}>Delete</button>\n              <button className=\"btn-primary\" style={{ background: '#bbb', color: '#222' }} onClick={() => setDeleteId(null)}>Cancel</button>\n            </div>\n          </div>\n          <div className=\"modal-backdrop\" style={{ pointerEvents: 'none' }}></div>\n        </div>\n      )}\n    </>\n  );\n};\n\n// Helper to get file name from attachment path or object\nfunction getFileName(attachment) {\n  if (!attachment) return '';\n  \n  // If attachment is an object with filename property\n  if (typeof attachment === 'object' && attachment.filename) {\n    return attachment.filename;\n  }\n  \n  // If attachment is a string path\n  const pathStr = typeof attachment === 'string' ? attachment : attachment.path || '';\n  if (!pathStr) return '';\n  return pathStr.split('/').pop().split('\\\\').pop();\n}\n\n// Helper to download notice as PDF\nfunction downloadNoticeAsPDF(title, notice, publishedAt, createdBy) {\n  // Use jsPDF for PDF generation\n  const script = document.createElement('script');\n  script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js';\n  script.onload = () => {\n    const { jsPDF } = window.jspdf;\n    const doc = new jsPDF();\n  // Header\n  doc.setFontSize(18);\n  doc.setTextColor(22, 119, 210);\n  doc.text('WEBSTER INTERNATIONAL SCHOOL', 10, 15);\n  // Publisher and Date\n  doc.setFontSize(12);\n  const dateStr = publishedAt ? new Date(publishedAt).toLocaleString() : '';\n  doc.text(`Published by: ${createdBy || 'Unknown'}`, 10, 25);\n  doc.text(`Published at: ${dateStr}`, 10, 33);\n  // Title\n  doc.setFontSize(16);\n  doc.setTextColor(0, 0, 0);\n  doc.text(title, 10, 45);\n  // Notice\n  doc.setFontSize(12);\n  doc.text(notice, 10, 60);\n  doc.save(`${title}-notice.pdf`);\n  };\n  document.body.appendChild(script);\n}\n\nexport default DisplayNotices;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}