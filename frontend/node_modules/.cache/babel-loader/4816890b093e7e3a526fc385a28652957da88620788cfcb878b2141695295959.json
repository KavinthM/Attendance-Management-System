{"ast":null,"code":"// @ts-check\nimport { IMAGE_ACCEPT_LIST, matchExtension, matchMimeType, mergeFileTypes } from '../../fileTypes.js';\n\n/** @type {import('../../../abstract/ValidationManager.js').FuncFileValidator} */\nexport const validateFileType = (outputEntry, api) => {\n  const imagesOnly = api.cfg.imgOnly;\n  const accept = api.cfg.accept;\n  const allowedFileTypes = mergeFileTypes([...(imagesOnly ? IMAGE_ACCEPT_LIST : []), accept]);\n  if (!allowedFileTypes.length) return;\n  const mimeType = outputEntry.mimeType;\n  const fileName = outputEntry.name;\n  if (!mimeType || !fileName) {\n    // Skip client validation if mime type or file name are not available for some reasons\n    return;\n  }\n  const mimeOk = matchMimeType(mimeType, allowedFileTypes);\n  const extOk = matchExtension(fileName, allowedFileTypes);\n  if (!mimeOk && !extOk) {\n    // Assume file type is not allowed if both mime and ext checks fail\n    return {\n      type: 'FORBIDDEN_FILE_TYPE',\n      message: api.l10n('file-type-not-allowed'),\n      payload: {\n        entry: outputEntry\n      }\n    };\n  }\n};","map":{"version":3,"names":["IMAGE_ACCEPT_LIST","matchExtension","matchMimeType","mergeFileTypes","validateFileType","outputEntry","api","imagesOnly","cfg","imgOnly","accept","allowedFileTypes","length","mimeType","fileName","name","mimeOk","extOk","type","message","l10n","payload","entry"],"sources":["/Users/kavinth/Documents/GitHub/Smart-Alert/Smart-Alert-new/frontend/node_modules/@uploadcare/file-uploader/utils/validators/file/validateFileType.js"],"sourcesContent":["// @ts-check\nimport { IMAGE_ACCEPT_LIST, matchExtension, matchMimeType, mergeFileTypes } from '../../fileTypes.js';\n\n/** @type {import('../../../abstract/ValidationManager.js').FuncFileValidator} */\nexport const validateFileType = (outputEntry, api) => {\n  const imagesOnly = api.cfg.imgOnly;\n  const accept = api.cfg.accept;\n  const allowedFileTypes = mergeFileTypes([...(imagesOnly ? IMAGE_ACCEPT_LIST : []), accept]);\n  if (!allowedFileTypes.length) return;\n\n  const mimeType = outputEntry.mimeType;\n  const fileName = outputEntry.name;\n\n  if (!mimeType || !fileName) {\n    // Skip client validation if mime type or file name are not available for some reasons\n    return;\n  }\n\n  const mimeOk = matchMimeType(mimeType, allowedFileTypes);\n  const extOk = matchExtension(fileName, allowedFileTypes);\n\n  if (!mimeOk && !extOk) {\n    // Assume file type is not allowed if both mime and ext checks fail\n    return {\n      type: 'FORBIDDEN_FILE_TYPE',\n      message: api.l10n('file-type-not-allowed'),\n      payload: { entry: outputEntry },\n    };\n  }\n};\n"],"mappings":"AAAA;AACA,SAASA,iBAAiB,EAAEC,cAAc,EAAEC,aAAa,EAAEC,cAAc,QAAQ,oBAAoB;;AAErG;AACA,OAAO,MAAMC,gBAAgB,GAAGA,CAACC,WAAW,EAAEC,GAAG,KAAK;EACpD,MAAMC,UAAU,GAAGD,GAAG,CAACE,GAAG,CAACC,OAAO;EAClC,MAAMC,MAAM,GAAGJ,GAAG,CAACE,GAAG,CAACE,MAAM;EAC7B,MAAMC,gBAAgB,GAAGR,cAAc,CAAC,CAAC,IAAII,UAAU,GAAGP,iBAAiB,GAAG,EAAE,CAAC,EAAEU,MAAM,CAAC,CAAC;EAC3F,IAAI,CAACC,gBAAgB,CAACC,MAAM,EAAE;EAE9B,MAAMC,QAAQ,GAAGR,WAAW,CAACQ,QAAQ;EACrC,MAAMC,QAAQ,GAAGT,WAAW,CAACU,IAAI;EAEjC,IAAI,CAACF,QAAQ,IAAI,CAACC,QAAQ,EAAE;IAC1B;IACA;EACF;EAEA,MAAME,MAAM,GAAGd,aAAa,CAACW,QAAQ,EAAEF,gBAAgB,CAAC;EACxD,MAAMM,KAAK,GAAGhB,cAAc,CAACa,QAAQ,EAAEH,gBAAgB,CAAC;EAExD,IAAI,CAACK,MAAM,IAAI,CAACC,KAAK,EAAE;IACrB;IACA,OAAO;MACLC,IAAI,EAAE,qBAAqB;MAC3BC,OAAO,EAAEb,GAAG,CAACc,IAAI,CAAC,uBAAuB,CAAC;MAC1CC,OAAO,EAAE;QAAEC,KAAK,EAAEjB;MAAY;IAChC,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}