{"ast":null,"code":"// @ts-check\nimport { applyStyles } from '@symbiotejs/symbiote';\nimport { UploaderBlock } from '../../abstract/UploaderBlock.js';\nexport class FormInput extends UploaderBlock {\n  requireCtxName = true;\n  _createValidationInput() {\n    const validationInput = document.createElement('input');\n    validationInput.type = 'text';\n    validationInput.name = this.ctxName;\n    validationInput.required = this.cfg.multipleMin > 0;\n    validationInput.tabIndex = -1;\n    applyStyles(validationInput, {\n      opacity: 0,\n      height: 0,\n      width: 0\n    });\n    return validationInput;\n  }\n  initCallback() {\n    super.initCallback();\n    this._validationInputElement = this._createValidationInput();\n    this.appendChild(this._validationInputElement);\n    this.sub('*collectionState', (/** @type {import('../../types/index.js').OutputCollectionState} */collectionState) => {\n      {\n        if (!this._dynamicInputsContainer) {\n          this._dynamicInputsContainer = document.createElement('div');\n          this.appendChild(this._dynamicInputsContainer);\n        }\n        if (!this._validationInputElement) {\n          const input = this._createValidationInput();\n          this.appendChild(input);\n          this._validationInputElement = input;\n        }\n        this._dynamicInputsContainer.innerHTML = '';\n        if (collectionState.status === 'uploading' || collectionState.status === 'idle') {\n          this._validationInputElement.value = '';\n          this._validationInputElement.setCustomValidity('');\n          return;\n        }\n        if (collectionState.status === 'failed') {\n          const errorMsg = collectionState.errors[0]?.message;\n          this._validationInputElement.value = '';\n          this._validationInputElement.setCustomValidity(errorMsg);\n          return;\n        }\n        const group = collectionState.group ? collectionState.group : null;\n        if (group) {\n          this._validationInputElement.value = group.cdnUrl;\n          this._validationInputElement.setCustomValidity('');\n          return;\n        }\n        const cdnUrls = collectionState.allEntries.map(entry => entry.cdnUrl);\n        if (!this.cfg.multiple && cdnUrls.length === 1) {\n          this._validationInputElement.value = cdnUrls[0];\n          this._validationInputElement.setCustomValidity('');\n          return;\n        }\n\n        // Remove validation input to prevent it from being submitted\n        this._validationInputElement.remove();\n        this._validationInputElement = null;\n        const fr = new DocumentFragment();\n        for (let value of cdnUrls) {\n          const input = document.createElement('input');\n          input.type = 'hidden';\n          input.name = `${this.ctxName}[]`;\n          input.value = value;\n          fr.appendChild(input);\n        }\n        this._dynamicInputsContainer.replaceChildren(fr);\n      }\n    }, false);\n  }\n}","map":{"version":3,"names":["applyStyles","UploaderBlock","FormInput","requireCtxName","_createValidationInput","validationInput","document","createElement","type","name","ctxName","required","cfg","multipleMin","tabIndex","opacity","height","width","initCallback","_validationInputElement","appendChild","sub","collectionState","_dynamicInputsContainer","input","innerHTML","status","value","setCustomValidity","errorMsg","errors","message","group","cdnUrl","cdnUrls","allEntries","map","entry","multiple","length","remove","fr","DocumentFragment","replaceChildren"],"sources":["/Users/kavinth/Documents/GitHub/Smart-Alert/Smart-Alert-new/frontend/node_modules/@uploadcare/file-uploader/blocks/FormInput/FormInput.js"],"sourcesContent":["// @ts-check\nimport { applyStyles } from '@symbiotejs/symbiote';\nimport { UploaderBlock } from '../../abstract/UploaderBlock.js';\n\nexport class FormInput extends UploaderBlock {\n  requireCtxName = true;\n\n  _createValidationInput() {\n    const validationInput = document.createElement('input');\n    validationInput.type = 'text';\n    validationInput.name = this.ctxName;\n    validationInput.required = this.cfg.multipleMin > 0;\n    validationInput.tabIndex = -1;\n    applyStyles(validationInput, {\n      opacity: 0,\n      height: 0,\n      width: 0,\n    });\n    return validationInput;\n  }\n\n  initCallback() {\n    super.initCallback();\n\n    this._validationInputElement = this._createValidationInput();\n    this.appendChild(this._validationInputElement);\n\n    this.sub(\n      '*collectionState',\n      (/** @type {import('../../types/index.js').OutputCollectionState} */ collectionState) => {\n        {\n          if (!this._dynamicInputsContainer) {\n            this._dynamicInputsContainer = document.createElement('div');\n            this.appendChild(this._dynamicInputsContainer);\n          }\n          if (!this._validationInputElement) {\n            const input = this._createValidationInput();\n            this.appendChild(input);\n            this._validationInputElement = input;\n          }\n\n          this._dynamicInputsContainer.innerHTML = '';\n\n          if (collectionState.status === 'uploading' || collectionState.status === 'idle') {\n            this._validationInputElement.value = '';\n            this._validationInputElement.setCustomValidity('');\n            return;\n          }\n\n          if (collectionState.status === 'failed') {\n            const errorMsg = collectionState.errors[0]?.message;\n            this._validationInputElement.value = '';\n            this._validationInputElement.setCustomValidity(errorMsg);\n            return;\n          }\n\n          const group = collectionState.group ? collectionState.group : null;\n          if (group) {\n            this._validationInputElement.value = group.cdnUrl;\n            this._validationInputElement.setCustomValidity('');\n            return;\n          }\n\n          const cdnUrls = collectionState.allEntries.map((entry) => entry.cdnUrl);\n\n          if (!this.cfg.multiple && cdnUrls.length === 1) {\n            this._validationInputElement.value = cdnUrls[0];\n            this._validationInputElement.setCustomValidity('');\n            return;\n          }\n\n          // Remove validation input to prevent it from being submitted\n          this._validationInputElement.remove();\n          this._validationInputElement = null;\n\n          const fr = new DocumentFragment();\n\n          for (let value of cdnUrls) {\n            const input = document.createElement('input');\n            input.type = 'hidden';\n            input.name = `${this.ctxName}[]`;\n            input.value = value;\n            fr.appendChild(input);\n          }\n\n          this._dynamicInputsContainer.replaceChildren(fr);\n        }\n      },\n      false,\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}