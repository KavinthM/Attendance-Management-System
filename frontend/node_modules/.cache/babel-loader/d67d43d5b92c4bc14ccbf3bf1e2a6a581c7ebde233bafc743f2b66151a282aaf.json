{"ast":null,"code":"import _objectSpread from\"/Users/kavinth/Documents/GitHub/Smart-Alert/Smart-Alert-new/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useMemo,useState}from\"react\";import Layout from\"../components/Layout\";import Select from\"../components/Select\";import AttendanceRow from\"../components/AttendanceRow\";import{getStudents,markAttendance,getAllAttendance}from\"../api/client\";import dayjs from\"dayjs\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Attendance=()=>{const[students,setStudents]=useState([]);const[section,setSection]=useState(\"\");const[date,setDate]=useState(dayjs().format(\"YYYY-MM-DD\"));const[rows,setRows]=useState({});const[submitting,setSubmitting]=useState(false);const[loading,setLoading]=useState(true);const[existingIdsForDate,setExistingIdsForDate]=useState(new Set());const[loadingExisting,setLoadingExisting]=useState(false);const load=async()=>{setLoading(true);try{const{data}=await getStudents();setStudents(data.students||[]);}finally{setLoading(false);}};useEffect(()=>{load();},[]);useEffect(()=>{const id=setInterval(()=>{setDate(dayjs().format(\"YYYY-MM-DD\"));},60*1000);return()=>clearInterval(id);},[]);const sections=useMemo(()=>{const set=new Set(students.map(s=>s.section));return Array.from(set).sort().map(s=>({value:s,label:s}));},[students]);const visible=useMemo(()=>section?students.filter(s=>s.section===section):[],[students,section]);useEffect(()=>{if(!section){setRows({});return;}const map={};visible.forEach(s=>{var _rows$s$_id;map[s._id]=(_rows$s$_id=rows[s._id])!==null&&_rows$s$_id!==void 0?_rows$s$_id:{status:\"Present\"};});setRows(map);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[visible.length,section]);useEffect(()=>{const loadExisting=async()=>{if(!section){setExistingIdsForDate(new Set());return;}setLoadingExisting(true);try{const{data}=await getAllAttendance();const list=Array.isArray(data.records)?data.records:[];const ids=new Set(list.filter(r=>dayjs(r.date).format(\"YYYY-MM-DD\")===date).filter(r=>{var _r$student;return((_r$student=r.student)===null||_r$student===void 0?void 0:_r$student.section)===section;}).map(r=>{var _r$student2;return(_r$student2=r.student)===null||_r$student2===void 0?void 0:_r$student2._id;}).filter(Boolean));setExistingIdsForDate(ids);}finally{setLoadingExisting(false);}};loadExisting();},[date,section]);const updateRow=(studentId,newRow)=>{setRows(r=>_objectSpread(_objectSpread({},r),{},{[studentId]:newRow}));};const nothingToSubmit=useMemo(()=>{return visible.every(s=>existingIdsForDate.has(s._id));},[visible,existingIdsForDate]);const submit=async()=>{if(!section)return alert(\"Select a class/section first\");setSubmitting(true);try{const toSubmit=visible.filter(s=>!existingIdsForDate.has(s._id));if(toSubmit.length===0){alert(\"Attendance already marked for all students in this section for this date.\");return;}const payloads=toSubmit.map(s=>{var _rows$s$_id2;const status=((_rows$s$_id2=rows[s._id])===null||_rows$s$_id2===void 0?void 0:_rows$s$_id2.status)||\"Present\";return{studentId:s._id,date,status,notifiedParent:false// Always false when marking attendance\n};});for(const p of payloads){await markAttendance(p);}setExistingIdsForDate(prev=>{const next=new Set(prev);toSubmit.forEach(s=>next.add(s._id));return next;});alert(\"Attendance marked successfully\");}catch(e){var _e$response,_e$response$data;alert((e===null||e===void 0?void 0:(_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.message)||\"Failed to mark attendance\");}finally{setSubmitting(false);}};if(!section){return/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\",marginTop:12},children:[/*#__PURE__*/_jsx(\"h1\",{style:{margin:\"0 0 20px\"},children:\"Mark Attendance\"}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",display:\"flex\",justifyContent:\"center\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:16},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:320},children:/*#__PURE__*/_jsx(Select,{label:\"\",value:section,onChange:setSection,options:[{value:\"\",label:\"Select Section\"},...sections]})}),/*#__PURE__*/_jsx(\"div\",{style:{width:320},children:/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:date,readOnly:true,style:{width:\"100%\",padding:\"10px 12px\",background:\"var(--muted)\",color:\"var(--text)\",border:\"1px solid var(--border)\",borderRadius:8,textAlign:\"center\",pointerEvents:\"none\"},\"aria-label\":\"Date\"})})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"panel\",style:{padding:24,textAlign:\"center\",color:\"#aaa\",marginTop:16},children:\"Select a section to begin marking attendance\"})]});}return/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",style:{flexDirection:\"column\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"h1\",{style:{margin:\"0 0 14px\"},children:\"Mark Attendance\"}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",display:\"flex\",justifyContent:\"center\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:16},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:320},children:/*#__PURE__*/_jsx(Select,{label:\"\",value:section,onChange:setSection,options:[{value:\"\",label:\"Select Section\"},...sections]})}),/*#__PURE__*/_jsx(\"div\",{style:{width:320},children:/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:date,readOnly:true,style:{width:\"100%\",padding:\"10px 12px\",background:\"var(--muted)\",color:\"var(--text)\",border:\"1px solid var(--border)\",borderRadius:8,textAlign:\"center\",pointerEvents:\"none\"},\"aria-label\":\"Date\"})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"panel\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Index\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Section\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[(loading||loadingExisting)&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",children:\"Loading...\"})}),!loading&&!loadingExisting&&visible.map(s=>/*#__PURE__*/_jsx(AttendanceRow,{student:s,row:rows[s._id]||{status:\"Present\"},onChange:updateRow,disabled:existingIdsForDate.has(s._id)},s._id)),!loading&&!loadingExisting&&visible.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",style:{color:\"#aaa\"},children:\"No students in this section\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:16,display:\"flex\",justifyContent:\"flex-end\",gap:8,alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"button\",{className:\"ghost\",onClick:()=>setRows({}),children:\"Reset\"}),/*#__PURE__*/_jsx(\"button\",{onClick:submit,disabled:submitting||!section||nothingToSubmit,children:submitting?\"Submitting...\":\"Submit Attendance\"})]})]})]});};export default Attendance;","map":{"version":3,"names":["React","useEffect","useMemo","useState","Layout","Select","AttendanceRow","getStudents","markAttendance","getAllAttendance","dayjs","jsx","_jsx","jsxs","_jsxs","Attendance","students","setStudents","section","setSection","date","setDate","format","rows","setRows","submitting","setSubmitting","loading","setLoading","existingIdsForDate","setExistingIdsForDate","Set","loadingExisting","setLoadingExisting","load","data","id","setInterval","clearInterval","sections","set","map","s","Array","from","sort","value","label","visible","filter","forEach","_rows$s$_id","_id","status","length","loadExisting","list","isArray","records","ids","r","_r$student","student","_r$student2","Boolean","updateRow","studentId","newRow","_objectSpread","nothingToSubmit","every","has","submit","alert","toSubmit","payloads","_rows$s$_id2","notifiedParent","p","prev","next","add","e","_e$response","_e$response$data","response","message","children","style","textAlign","marginTop","margin","width","display","justifyContent","gap","onChange","options","type","readOnly","padding","background","color","border","borderRadius","pointerEvents","className","flexDirection","alignItems","colSpan","row","disabled","onClick"],"sources":["/Users/kavinth/Documents/GitHub/Smart-Alert/Smart-Alert-new/frontend/src/pages/Attendance.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\nimport Layout from \"../components/Layout\";\nimport Select from \"../components/Select\";\nimport AttendanceRow from \"../components/AttendanceRow\";\nimport { getStudents, markAttendance, getAllAttendance } from \"../api/client\";\nimport dayjs from \"dayjs\";\n\nconst Attendance = () => {\n  const [students, setStudents] = useState([]);\n  const [section, setSection] = useState(\"\");\n  const [date, setDate] = useState(dayjs().format(\"YYYY-MM-DD\"));\n  const [rows, setRows] = useState({});\n  const [submitting, setSubmitting] = useState(false);\n  const [loading, setLoading] = useState(true);\n\n  const [existingIdsForDate, setExistingIdsForDate] = useState(new Set());\n  const [loadingExisting, setLoadingExisting] = useState(false);\n\n  const load = async () => {\n    setLoading(true);\n    try {\n      const { data } = await getStudents();\n      setStudents(data.students || []);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => { load(); }, []);\n\n  useEffect(() => {\n    const id = setInterval(() => {\n      setDate(dayjs().format(\"YYYY-MM-DD\"));\n    }, 60 * 1000);\n    return () => clearInterval(id);\n  }, []);\n\n  const sections = useMemo(() => {\n    const set = new Set(students.map((s) => s.section));\n    return Array.from(set).sort().map((s) => ({ value: s, label: s }));\n  }, [students]);\n\n  const visible = useMemo(\n    () => (section ? students.filter((s) => s.section === section) : []),\n    [students, section]\n  );\n\n  useEffect(() => {\n    if (!section) {\n      setRows({});\n      return;\n    }\n    const map = {};\n    visible.forEach((s) => {\n      map[s._id] = rows[s._id] ?? { status: \"Present\" };\n    });\n    setRows(map);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [visible.length, section]);\n\n  useEffect(() => {\n    const loadExisting = async () => {\n      if (!section) {\n        setExistingIdsForDate(new Set());\n        return;\n      }\n      setLoadingExisting(true);\n      try {\n        const { data } = await getAllAttendance();\n        const list = Array.isArray(data.records) ? data.records : [];\n        const ids = new Set(\n          list\n            .filter((r) => dayjs(r.date).format(\"YYYY-MM-DD\") === date)\n            .filter((r) => r.student?.section === section)\n            .map((r) => r.student?._id)\n            .filter(Boolean)\n        );\n        setExistingIdsForDate(ids);\n      } finally {\n        setLoadingExisting(false);\n      }\n    };\n    loadExisting();\n  }, [date, section]);\n\n  const updateRow = (studentId, newRow) => {\n    setRows((r) => ({ ...r, [studentId]: newRow }));\n  };\n\n  const nothingToSubmit = useMemo(() => {\n    return visible.every((s) => existingIdsForDate.has(s._id));\n  }, [visible, existingIdsForDate]);\n\n  const submit = async () => {\n    if (!section) return alert(\"Select a class/section first\");\n    \n    setSubmitting(true);\n    try {\n      const toSubmit = visible.filter((s) => !existingIdsForDate.has(s._id));\n      if (toSubmit.length === 0) {\n        alert(\"Attendance already marked for all students in this section for this date.\");\n        return;\n      }\n\n      const payloads = toSubmit.map((s) => {\n        const status = rows[s._id]?.status || \"Present\";\n        return {\n          studentId: s._id,\n          date,\n          status,\n          notifiedParent: false // Always false when marking attendance\n        };\n      });\n\n      for (const p of payloads) {\n        await markAttendance(p);\n      }\n\n      setExistingIdsForDate((prev) => {\n        const next = new Set(prev);\n        toSubmit.forEach((s) => next.add(s._id));\n        return next;\n      });\n\n      alert(\"Attendance marked successfully\");\n    } catch (e) {\n      alert(e?.response?.data?.message || \"Failed to mark attendance\");\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  if (!section) {\n    return (\n      <Layout>\n        <div style={{ textAlign: \"center\", marginTop: 12 }}>\n          <h1 style={{ margin: \"0 0 20px\" }}>Mark Attendance</h1>\n          <div style={{ width: \"100%\", display: \"flex\", justifyContent: \"center\" }}>\n            <div style={{ display: \"flex\", gap: 16 }}>\n              <div style={{ width: 320 }}>\n                <Select\n                  label=\"\"\n                  value={section}\n                  onChange={setSection}\n                  options={[{ value: \"\", label: \"Select Section\" }, ...sections]}\n                />\n              </div>\n              <div style={{ width: 320 }}>\n                <input\n                  type=\"date\"\n                  value={date}\n                  readOnly\n                  style={{\n                    width: \"100%\",\n                    padding: \"10px 12px\",\n                    background: \"var(--muted)\",\n                    color: \"var(--text)\",\n                    border: \"1px solid var(--border)\",\n                    borderRadius: 8,\n                    textAlign: \"center\",\n                    pointerEvents: \"none\"\n                  }}\n                  aria-label=\"Date\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"panel\" style={{ padding: 24, textAlign: \"center\", color: \"#aaa\", marginTop: 16 }}>\n          Select a section to begin marking attendance\n        </div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <div className=\"header\" style={{ flexDirection: \"column\", alignItems: \"center\" }}>\n        <h1 style={{ margin: \"0 0 14px\" }}>Mark Attendance</h1>\n        <div style={{ width: \"100%\", display: \"flex\", justifyContent: \"center\" }}>\n          <div style={{ display: \"flex\", gap: 16 }}>\n            <div style={{ width: 320 }}>\n              <Select\n                label=\"\"\n                value={section}\n                onChange={setSection}\n                options={[{ value: \"\", label: \"Select Section\" }, ...sections]}\n              />\n            </div>\n            <div style={{ width: 320 }}>\n              <input\n                type=\"date\"\n                value={date}\n                readOnly\n                style={{\n                  width: \"100%\",\n                  padding: \"10px 12px\",\n                  background: \"var(--muted)\",\n                  color: \"var(--text)\",\n                  border: \"1px solid var(--border)\",\n                  borderRadius: 8,\n                  textAlign: \"center\",\n                  pointerEvents: \"none\"\n                }}\n                aria-label=\"Date\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"panel\">\n        <table className=\"table\">\n          <thead>\n            <tr>\n              <th>Name</th>\n              <th>Index</th>\n              <th>Section</th>\n              <th>Status</th>\n            </tr>\n          </thead>\n          <tbody>\n            {(loading || loadingExisting) && <tr><td colSpan=\"4\">Loading...</td></tr>}\n            {!loading && !loadingExisting && visible.map((s) => (\n              <AttendanceRow\n                key={s._id}\n                student={s}\n                row={rows[s._id] || { status: \"Present\" }}\n                onChange={updateRow}\n                disabled={existingIdsForDate.has(s._id)}\n              />\n            ))}\n            {!loading && !loadingExisting && visible.length === 0 && (\n              <tr><td colSpan=\"4\" style={{ color: \"#aaa\" }}>No students in this section</td></tr>\n            )}\n          </tbody>\n        </table>\n\n        <div style={{ marginTop: 16, display: \"flex\", justifyContent: \"flex-end\", gap: 8, alignItems: \"center\" }}>\n          <button className=\"ghost\" onClick={() => setRows({})}>Reset</button>\n          <button\n            onClick={submit}\n            disabled={submitting || !section || nothingToSubmit}\n          >\n            {submitting ? \"Submitting...\" : \"Submit Attendance\"}\n          </button>\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport default Attendance;\n"],"mappings":"yJAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,OAAO,CAAEC,QAAQ,KAAQ,OAAO,CAC3D,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CACzC,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CACzC,MAAO,CAAAC,aAAa,KAAM,6BAA6B,CACvD,OAASC,WAAW,CAAEC,cAAc,CAAEC,gBAAgB,KAAQ,eAAe,CAC7E,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CACvB,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACe,OAAO,CAAEC,UAAU,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACiB,IAAI,CAAEC,OAAO,CAAC,CAAGlB,QAAQ,CAACO,KAAK,CAAC,CAAC,CAACY,MAAM,CAAC,YAAY,CAAC,CAAC,CAC9D,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGrB,QAAQ,CAAC,CAAC,CAAC,CAAC,CACpC,KAAM,CAACsB,UAAU,CAAEC,aAAa,CAAC,CAAGvB,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAACwB,OAAO,CAAEC,UAAU,CAAC,CAAGzB,QAAQ,CAAC,IAAI,CAAC,CAE5C,KAAM,CAAC0B,kBAAkB,CAAEC,qBAAqB,CAAC,CAAG3B,QAAQ,CAAC,GAAI,CAAA4B,GAAG,CAAC,CAAC,CAAC,CACvE,KAAM,CAACC,eAAe,CAAEC,kBAAkB,CAAC,CAAG9B,QAAQ,CAAC,KAAK,CAAC,CAE7D,KAAM,CAAA+B,IAAI,CAAG,KAAAA,CAAA,GAAY,CACvBN,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAEO,IAAK,CAAC,CAAG,KAAM,CAAA5B,WAAW,CAAC,CAAC,CACpCU,WAAW,CAACkB,IAAI,CAACnB,QAAQ,EAAI,EAAE,CAAC,CAClC,CAAC,OAAS,CACRY,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED3B,SAAS,CAAC,IAAM,CAAEiC,IAAI,CAAC,CAAC,CAAE,CAAC,CAAE,EAAE,CAAC,CAEhCjC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAmC,EAAE,CAAGC,WAAW,CAAC,IAAM,CAC3BhB,OAAO,CAACX,KAAK,CAAC,CAAC,CAACY,MAAM,CAAC,YAAY,CAAC,CAAC,CACvC,CAAC,CAAE,EAAE,CAAG,IAAI,CAAC,CACb,MAAO,IAAMgB,aAAa,CAACF,EAAE,CAAC,CAChC,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAG,QAAQ,CAAGrC,OAAO,CAAC,IAAM,CAC7B,KAAM,CAAAsC,GAAG,CAAG,GAAI,CAAAT,GAAG,CAACf,QAAQ,CAACyB,GAAG,CAAEC,CAAC,EAAKA,CAAC,CAACxB,OAAO,CAAC,CAAC,CACnD,MAAO,CAAAyB,KAAK,CAACC,IAAI,CAACJ,GAAG,CAAC,CAACK,IAAI,CAAC,CAAC,CAACJ,GAAG,CAAEC,CAAC,GAAM,CAAEI,KAAK,CAAEJ,CAAC,CAAEK,KAAK,CAAEL,CAAE,CAAC,CAAC,CAAC,CACpE,CAAC,CAAE,CAAC1B,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAgC,OAAO,CAAG9C,OAAO,CACrB,IAAOgB,OAAO,CAAGF,QAAQ,CAACiC,MAAM,CAAEP,CAAC,EAAKA,CAAC,CAACxB,OAAO,GAAKA,OAAO,CAAC,CAAG,EAAG,CACpE,CAACF,QAAQ,CAAEE,OAAO,CACpB,CAAC,CAEDjB,SAAS,CAAC,IAAM,CACd,GAAI,CAACiB,OAAO,CAAE,CACZM,OAAO,CAAC,CAAC,CAAC,CAAC,CACX,OACF,CACA,KAAM,CAAAiB,GAAG,CAAG,CAAC,CAAC,CACdO,OAAO,CAACE,OAAO,CAAER,CAAC,EAAK,KAAAS,WAAA,CACrBV,GAAG,CAACC,CAAC,CAACU,GAAG,CAAC,EAAAD,WAAA,CAAG5B,IAAI,CAACmB,CAAC,CAACU,GAAG,CAAC,UAAAD,WAAA,UAAAA,WAAA,CAAI,CAAEE,MAAM,CAAE,SAAU,CAAC,CACnD,CAAC,CAAC,CACF7B,OAAO,CAACiB,GAAG,CAAC,CACZ;AACF,CAAC,CAAE,CAACO,OAAO,CAACM,MAAM,CAAEpC,OAAO,CAAC,CAAC,CAE7BjB,SAAS,CAAC,IAAM,CACd,KAAM,CAAAsD,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CAACrC,OAAO,CAAE,CACZY,qBAAqB,CAAC,GAAI,CAAAC,GAAG,CAAC,CAAC,CAAC,CAChC,OACF,CACAE,kBAAkB,CAAC,IAAI,CAAC,CACxB,GAAI,CACF,KAAM,CAAEE,IAAK,CAAC,CAAG,KAAM,CAAA1B,gBAAgB,CAAC,CAAC,CACzC,KAAM,CAAA+C,IAAI,CAAGb,KAAK,CAACc,OAAO,CAACtB,IAAI,CAACuB,OAAO,CAAC,CAAGvB,IAAI,CAACuB,OAAO,CAAG,EAAE,CAC5D,KAAM,CAAAC,GAAG,CAAG,GAAI,CAAA5B,GAAG,CACjByB,IAAI,CACDP,MAAM,CAAEW,CAAC,EAAKlD,KAAK,CAACkD,CAAC,CAACxC,IAAI,CAAC,CAACE,MAAM,CAAC,YAAY,CAAC,GAAKF,IAAI,CAAC,CAC1D6B,MAAM,CAAEW,CAAC,OAAAC,UAAA,OAAK,EAAAA,UAAA,CAAAD,CAAC,CAACE,OAAO,UAAAD,UAAA,iBAATA,UAAA,CAAW3C,OAAO,IAAKA,OAAO,GAAC,CAC7CuB,GAAG,CAAEmB,CAAC,OAAAG,WAAA,QAAAA,WAAA,CAAKH,CAAC,CAACE,OAAO,UAAAC,WAAA,iBAATA,WAAA,CAAWX,GAAG,GAAC,CAC1BH,MAAM,CAACe,OAAO,CACnB,CAAC,CACDlC,qBAAqB,CAAC6B,GAAG,CAAC,CAC5B,CAAC,OAAS,CACR1B,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CACF,CAAC,CACDsB,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,CAACnC,IAAI,CAAEF,OAAO,CAAC,CAAC,CAEnB,KAAM,CAAA+C,SAAS,CAAGA,CAACC,SAAS,CAAEC,MAAM,GAAK,CACvC3C,OAAO,CAAEoC,CAAC,EAAAQ,aAAA,CAAAA,aAAA,IAAWR,CAAC,MAAE,CAACM,SAAS,EAAGC,MAAM,EAAG,CAAC,CACjD,CAAC,CAED,KAAM,CAAAE,eAAe,CAAGnE,OAAO,CAAC,IAAM,CACpC,MAAO,CAAA8C,OAAO,CAACsB,KAAK,CAAE5B,CAAC,EAAKb,kBAAkB,CAAC0C,GAAG,CAAC7B,CAAC,CAACU,GAAG,CAAC,CAAC,CAC5D,CAAC,CAAE,CAACJ,OAAO,CAAEnB,kBAAkB,CAAC,CAAC,CAEjC,KAAM,CAAA2C,MAAM,CAAG,KAAAA,CAAA,GAAY,CACzB,GAAI,CAACtD,OAAO,CAAE,MAAO,CAAAuD,KAAK,CAAC,8BAA8B,CAAC,CAE1D/C,aAAa,CAAC,IAAI,CAAC,CACnB,GAAI,CACF,KAAM,CAAAgD,QAAQ,CAAG1B,OAAO,CAACC,MAAM,CAAEP,CAAC,EAAK,CAACb,kBAAkB,CAAC0C,GAAG,CAAC7B,CAAC,CAACU,GAAG,CAAC,CAAC,CACtE,GAAIsB,QAAQ,CAACpB,MAAM,GAAK,CAAC,CAAE,CACzBmB,KAAK,CAAC,2EAA2E,CAAC,CAClF,OACF,CAEA,KAAM,CAAAE,QAAQ,CAAGD,QAAQ,CAACjC,GAAG,CAAEC,CAAC,EAAK,KAAAkC,YAAA,CACnC,KAAM,CAAAvB,MAAM,CAAG,EAAAuB,YAAA,CAAArD,IAAI,CAACmB,CAAC,CAACU,GAAG,CAAC,UAAAwB,YAAA,iBAAXA,YAAA,CAAavB,MAAM,GAAI,SAAS,CAC/C,MAAO,CACLa,SAAS,CAAExB,CAAC,CAACU,GAAG,CAChBhC,IAAI,CACJiC,MAAM,CACNwB,cAAc,CAAE,KAAM;AACxB,CAAC,CACH,CAAC,CAAC,CAEF,IAAK,KAAM,CAAAC,CAAC,GAAI,CAAAH,QAAQ,CAAE,CACxB,KAAM,CAAAnE,cAAc,CAACsE,CAAC,CAAC,CACzB,CAEAhD,qBAAqB,CAAEiD,IAAI,EAAK,CAC9B,KAAM,CAAAC,IAAI,CAAG,GAAI,CAAAjD,GAAG,CAACgD,IAAI,CAAC,CAC1BL,QAAQ,CAACxB,OAAO,CAAER,CAAC,EAAKsC,IAAI,CAACC,GAAG,CAACvC,CAAC,CAACU,GAAG,CAAC,CAAC,CACxC,MAAO,CAAA4B,IAAI,CACb,CAAC,CAAC,CAEFP,KAAK,CAAC,gCAAgC,CAAC,CACzC,CAAE,MAAOS,CAAC,CAAE,KAAAC,WAAA,CAAAC,gBAAA,CACVX,KAAK,CAAC,CAAAS,CAAC,SAADA,CAAC,kBAAAC,WAAA,CAADD,CAAC,CAAEG,QAAQ,UAAAF,WAAA,kBAAAC,gBAAA,CAAXD,WAAA,CAAahD,IAAI,UAAAiD,gBAAA,iBAAjBA,gBAAA,CAAmBE,OAAO,GAAI,2BAA2B,CAAC,CAClE,CAAC,OAAS,CACR5D,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAAC,CAED,GAAI,CAACR,OAAO,CAAE,CACZ,mBACEJ,KAAA,CAACV,MAAM,EAAAmF,QAAA,eACLzE,KAAA,QAAK0E,KAAK,CAAE,CAAEC,SAAS,CAAE,QAAQ,CAAEC,SAAS,CAAE,EAAG,CAAE,CAAAH,QAAA,eACjD3E,IAAA,OAAI4E,KAAK,CAAE,CAAEG,MAAM,CAAE,UAAW,CAAE,CAAAJ,QAAA,CAAC,iBAAe,CAAI,CAAC,cACvD3E,IAAA,QAAK4E,KAAK,CAAE,CAAEI,KAAK,CAAE,MAAM,CAAEC,OAAO,CAAE,MAAM,CAAEC,cAAc,CAAE,QAAS,CAAE,CAAAP,QAAA,cACvEzE,KAAA,QAAK0E,KAAK,CAAE,CAAEK,OAAO,CAAE,MAAM,CAAEE,GAAG,CAAE,EAAG,CAAE,CAAAR,QAAA,eACvC3E,IAAA,QAAK4E,KAAK,CAAE,CAAEI,KAAK,CAAE,GAAI,CAAE,CAAAL,QAAA,cACzB3E,IAAA,CAACP,MAAM,EACL0C,KAAK,CAAC,EAAE,CACRD,KAAK,CAAE5B,OAAQ,CACf8E,QAAQ,CAAE7E,UAAW,CACrB8E,OAAO,CAAE,CAAC,CAAEnD,KAAK,CAAE,EAAE,CAAEC,KAAK,CAAE,gBAAiB,CAAC,CAAE,GAAGR,QAAQ,CAAE,CAChE,CAAC,CACC,CAAC,cACN3B,IAAA,QAAK4E,KAAK,CAAE,CAAEI,KAAK,CAAE,GAAI,CAAE,CAAAL,QAAA,cACzB3E,IAAA,UACEsF,IAAI,CAAC,MAAM,CACXpD,KAAK,CAAE1B,IAAK,CACZ+E,QAAQ,MACRX,KAAK,CAAE,CACLI,KAAK,CAAE,MAAM,CACbQ,OAAO,CAAE,WAAW,CACpBC,UAAU,CAAE,cAAc,CAC1BC,KAAK,CAAE,aAAa,CACpBC,MAAM,CAAE,yBAAyB,CACjCC,YAAY,CAAE,CAAC,CACff,SAAS,CAAE,QAAQ,CACnBgB,aAAa,CAAE,MACjB,CAAE,CACF,aAAW,MAAM,CAClB,CAAC,CACC,CAAC,EACH,CAAC,CACH,CAAC,EACH,CAAC,cAEN7F,IAAA,QAAK8F,SAAS,CAAC,OAAO,CAAClB,KAAK,CAAE,CAAEY,OAAO,CAAE,EAAE,CAAEX,SAAS,CAAE,QAAQ,CAAEa,KAAK,CAAE,MAAM,CAAEZ,SAAS,CAAE,EAAG,CAAE,CAAAH,QAAA,CAAC,8CAElG,CAAK,CAAC,EACA,CAAC,CAEb,CAEA,mBACEzE,KAAA,CAACV,MAAM,EAAAmF,QAAA,eACLzE,KAAA,QAAK4F,SAAS,CAAC,QAAQ,CAAClB,KAAK,CAAE,CAAEmB,aAAa,CAAE,QAAQ,CAAEC,UAAU,CAAE,QAAS,CAAE,CAAArB,QAAA,eAC/E3E,IAAA,OAAI4E,KAAK,CAAE,CAAEG,MAAM,CAAE,UAAW,CAAE,CAAAJ,QAAA,CAAC,iBAAe,CAAI,CAAC,cACvD3E,IAAA,QAAK4E,KAAK,CAAE,CAAEI,KAAK,CAAE,MAAM,CAAEC,OAAO,CAAE,MAAM,CAAEC,cAAc,CAAE,QAAS,CAAE,CAAAP,QAAA,cACvEzE,KAAA,QAAK0E,KAAK,CAAE,CAAEK,OAAO,CAAE,MAAM,CAAEE,GAAG,CAAE,EAAG,CAAE,CAAAR,QAAA,eACvC3E,IAAA,QAAK4E,KAAK,CAAE,CAAEI,KAAK,CAAE,GAAI,CAAE,CAAAL,QAAA,cACzB3E,IAAA,CAACP,MAAM,EACL0C,KAAK,CAAC,EAAE,CACRD,KAAK,CAAE5B,OAAQ,CACf8E,QAAQ,CAAE7E,UAAW,CACrB8E,OAAO,CAAE,CAAC,CAAEnD,KAAK,CAAE,EAAE,CAAEC,KAAK,CAAE,gBAAiB,CAAC,CAAE,GAAGR,QAAQ,CAAE,CAChE,CAAC,CACC,CAAC,cACN3B,IAAA,QAAK4E,KAAK,CAAE,CAAEI,KAAK,CAAE,GAAI,CAAE,CAAAL,QAAA,cACzB3E,IAAA,UACEsF,IAAI,CAAC,MAAM,CACXpD,KAAK,CAAE1B,IAAK,CACZ+E,QAAQ,MACRX,KAAK,CAAE,CACLI,KAAK,CAAE,MAAM,CACbQ,OAAO,CAAE,WAAW,CACpBC,UAAU,CAAE,cAAc,CAC1BC,KAAK,CAAE,aAAa,CACpBC,MAAM,CAAE,yBAAyB,CACjCC,YAAY,CAAE,CAAC,CACff,SAAS,CAAE,QAAQ,CACnBgB,aAAa,CAAE,MACjB,CAAE,CACF,aAAW,MAAM,CAClB,CAAC,CACC,CAAC,EACH,CAAC,CACH,CAAC,EACH,CAAC,cAEN3F,KAAA,QAAK4F,SAAS,CAAC,OAAO,CAAAnB,QAAA,eACpBzE,KAAA,UAAO4F,SAAS,CAAC,OAAO,CAAAnB,QAAA,eACtB3E,IAAA,UAAA2E,QAAA,cACEzE,KAAA,OAAAyE,QAAA,eACE3E,IAAA,OAAA2E,QAAA,CAAI,MAAI,CAAI,CAAC,cACb3E,IAAA,OAAA2E,QAAA,CAAI,OAAK,CAAI,CAAC,cACd3E,IAAA,OAAA2E,QAAA,CAAI,SAAO,CAAI,CAAC,cAChB3E,IAAA,OAAA2E,QAAA,CAAI,QAAM,CAAI,CAAC,EACb,CAAC,CACA,CAAC,cACRzE,KAAA,UAAAyE,QAAA,EACG,CAAC5D,OAAO,EAAIK,eAAe,gBAAKpB,IAAA,OAAA2E,QAAA,cAAI3E,IAAA,OAAIiG,OAAO,CAAC,GAAG,CAAAtB,QAAA,CAAC,YAAU,CAAI,CAAC,CAAI,CAAC,CACxE,CAAC5D,OAAO,EAAI,CAACK,eAAe,EAAIgB,OAAO,CAACP,GAAG,CAAEC,CAAC,eAC7C9B,IAAA,CAACN,aAAa,EAEZwD,OAAO,CAAEpB,CAAE,CACXoE,GAAG,CAAEvF,IAAI,CAACmB,CAAC,CAACU,GAAG,CAAC,EAAI,CAAEC,MAAM,CAAE,SAAU,CAAE,CAC1C2C,QAAQ,CAAE/B,SAAU,CACpB8C,QAAQ,CAAElF,kBAAkB,CAAC0C,GAAG,CAAC7B,CAAC,CAACU,GAAG,CAAE,EAJnCV,CAAC,CAACU,GAKR,CACF,CAAC,CACD,CAACzB,OAAO,EAAI,CAACK,eAAe,EAAIgB,OAAO,CAACM,MAAM,GAAK,CAAC,eACnD1C,IAAA,OAAA2E,QAAA,cAAI3E,IAAA,OAAIiG,OAAO,CAAC,GAAG,CAACrB,KAAK,CAAE,CAAEc,KAAK,CAAE,MAAO,CAAE,CAAAf,QAAA,CAAC,6BAA2B,CAAI,CAAC,CAAI,CACnF,EACI,CAAC,EACH,CAAC,cAERzE,KAAA,QAAK0E,KAAK,CAAE,CAAEE,SAAS,CAAE,EAAE,CAAEG,OAAO,CAAE,MAAM,CAAEC,cAAc,CAAE,UAAU,CAAEC,GAAG,CAAE,CAAC,CAAEa,UAAU,CAAE,QAAS,CAAE,CAAArB,QAAA,eACvG3E,IAAA,WAAQ8F,SAAS,CAAC,OAAO,CAACM,OAAO,CAAEA,CAAA,GAAMxF,OAAO,CAAC,CAAC,CAAC,CAAE,CAAA+D,QAAA,CAAC,OAAK,CAAQ,CAAC,cACpE3E,IAAA,WACEoG,OAAO,CAAExC,MAAO,CAChBuC,QAAQ,CAAEtF,UAAU,EAAI,CAACP,OAAO,EAAImD,eAAgB,CAAAkB,QAAA,CAEnD9D,UAAU,CAAG,eAAe,CAAG,mBAAmB,CAC7C,CAAC,EACN,CAAC,EACH,CAAC,EACA,CAAC,CAEb,CAAC,CAED,cAAe,CAAAV,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}