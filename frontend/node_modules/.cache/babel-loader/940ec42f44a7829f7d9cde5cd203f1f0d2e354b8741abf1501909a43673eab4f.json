{"ast":null,"code":"var _jsxFileName = \"/Users/kavinth/Documents/GitHub/Smart-Alert/Smart-Alert-new/frontend/src/Components/DisplayNotices/DisplayNotices.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport axios from 'axios';\nimport { FileUploaderRegular } from '@uploadcare/react-uploader';\nimport '@uploadcare/react-uploader/core.css';\nimport { api } from '../../utils/api';\nimport './DisplayNotices.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst DisplayNotices = ({\n  userType: propUserType,\n  classId: propClassId\n}) => {\n  _s();\n  const [notices, setNotices] = useState([]);\n  const [categoryFilter, setCategoryFilter] = useState('');\n  const [userType, setUserType] = useState(propUserType || null);\n  const [classId, setClassId] = useState(propClassId || null);\n  const [deleteId, setDeleteId] = useState(null);\n  const [editId, setEditId] = useState(null);\n  const [editTitle, setEditTitle] = useState('');\n  const [editNotice, setEditNotice] = useState('');\n  const [editCategory, setEditCategory] = useState('');\n  const [editAttachment, setEditAttachment] = useState(null);\n  const [editAttachmentUrl, setEditAttachmentUrl] = useState('');\n  const uploaderRef = useRef(null);\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  // Get filter from URL query parameter\n  const searchParams = new URLSearchParams(location.search);\n  const viewFilter = searchParams.get('filter'); // 'school', 'class', or null for all\n\n  // Fetch user data to determine userType\n  useEffect(() => {\n    const fetchUserData = async () => {\n      try {\n        const userData = await api('/auth/me');\n        const user = (userData === null || userData === void 0 ? void 0 : userData.user) || userData;\n        const detectedUserType = (user === null || user === void 0 ? void 0 : user.userType) || (user === null || user === void 0 ? void 0 : user.role);\n        console.log('DisplayNotices - User Type:', detectedUserType);\n        setUserType(detectedUserType);\n        setClassId(user === null || user === void 0 ? void 0 : user.classId);\n      } catch (err) {\n        console.error('Failed to load user data:', err);\n      }\n    };\n\n    // Only fetch if userType not provided via props\n    if (!propUserType) {\n      fetchUserData();\n    }\n  }, [propUserType]);\n\n  // Backspace navigation (only when not editing)\n  useEffect(() => {\n    const handleBackspace = e => {\n      // Don't navigate if user is typing in an input, textarea, or select element\n      const target = e.target;\n      const isEditing = target.tagName === 'INPUT' || target.tagName === 'TEXTAREA' || target.tagName === 'SELECT' || target.isContentEditable;\n      if (e.key === 'Backspace' && !isEditing) {\n        e.preventDefault();\n        navigate(-1);\n      }\n    };\n    window.addEventListener('keydown', handleBackspace);\n    return () => window.removeEventListener('keydown', handleBackspace);\n  }, [navigate]);\n  const fetchNotices = async () => {\n    try {\n      const res = await axios.get('/notices');\n      const fetchedNotices = res.data.notices || [];\n      console.log('Fetched notices:', fetchedNotices);\n      // Log first notice attachment for debugging\n      if (fetchedNotices.length > 0 && fetchedNotices[0].attachment) {\n        console.log('First notice attachment:', fetchedNotices[0].attachment);\n      }\n      setNotices(fetchedNotices);\n    } catch (err) {\n      console.error('Failed to load notices:', err);\n    }\n  };\n  useEffect(() => {\n    fetchNotices();\n  }, []);\n\n  // School notices: createdBy === 'admin' (case-insensitive)\n  const schoolNotices = notices.filter(n => n.createdBy && n.createdBy.toLowerCase() === 'admin');\n  // Class notices: createdBy !== 'admin' and (for parents, only their class)\n  const classNotices = notices.filter(n => n.createdBy && n.createdBy.toLowerCase() !== 'admin' && n.classId === classId);\n  // Filter notices by category if selected\n  const filteredSchoolNotices = schoolNotices.filter(n => !categoryFilter || n.category === categoryFilter);\n  const filteredClassNotices = classNotices.filter(n => !categoryFilter || n.category === categoryFilter);\n\n  // Helper to check if attachment has valid data\n  function hasValidAttachment(attachment) {\n    if (!attachment) return false;\n    if (typeof attachment === 'object') {\n      const keys = Object.keys(attachment);\n      if (keys.length === 0) return false;\n      return !!(attachment.url || attachment.uuid);\n    }\n    if (typeof attachment === 'string' && attachment.length > 0) {\n      return true;\n    }\n    return false;\n  }\n\n  // Helper to get correct attachment path or URL\n  function getAttachmentPath(attachment, noticeId) {\n    if (!attachment) return '';\n    console.log('getAttachmentPath called with:', {\n      attachment,\n      noticeId,\n      attachmentType: typeof attachment,\n      attachmentKeys: typeof attachment === 'object' ? Object.keys(attachment) : 'N/A'\n    });\n\n    // If attachment is an object\n    if (typeof attachment === 'object') {\n      // Check if it's an empty object\n      const keys = Object.keys(attachment);\n      if (keys.length === 0) {\n        console.log('Empty attachment object, skipping');\n        return '';\n      }\n\n      // If full URL is present, use it\n      if (attachment.url) {\n        console.log('Using attachment.url:', attachment.url);\n        return attachment.url;\n      }\n      // If only UUID is present, construct the Uploadcare URL\n      if (attachment.uuid) {\n        const constructedUrl = `https://ucarecdn.com/${attachment.uuid}/`;\n        console.log('Constructed URL from UUID:', constructedUrl);\n        return constructedUrl;\n      }\n    }\n\n    // If attachment is a string (could be UUID or URL)\n    if (typeof attachment === 'string') {\n      // If it's already a full URL, return it\n      if (attachment.startsWith('http')) {\n        console.log('Using string URL:', attachment);\n        return attachment;\n      }\n      // If it looks like a UUID, construct the Uploadcare URL\n      if (attachment.length > 20 && !attachment.includes('/')) {\n        const constructedUrl = `https://ucarecdn.com/${attachment}/`;\n        console.log('Constructed URL from string UUID:', constructedUrl);\n        return constructedUrl;\n      }\n    }\n    console.log('No valid attachment data found');\n    return '';\n  }\n\n  // Helper to handle attachment download\n  const handleDownloadAttachment = async (attachment, noticeId, filename) => {\n    try {\n      const url = getAttachmentPath(attachment, noticeId);\n      if (!url) return;\n\n      // For Uploadcare URLs, open in new tab (they handle downloads)\n      if (url.includes('ucarecdn.com')) {\n        window.open(url, '_blank');\n        return;\n      }\n\n      // For local API endpoints, fetch and download\n      const response = await fetch(url);\n      const blob = await response.blob();\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = filename || 'attachment';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(downloadUrl);\n    } catch (err) {\n      console.error('Failed to download attachment:', err);\n      alert('Failed to download attachment. Please try again.');\n    }\n  };\n\n  // Handle inline edit notice\n  const handleUpdateNotice = notice => {\n    setEditId(notice._id);\n    setEditTitle(notice.title);\n    setEditNotice(notice.notice);\n    setEditCategory(notice.category || 'General');\n    // Store existing attachment data\n    if (notice.attachment && notice.attachment.url) {\n      setEditAttachment(notice.attachment);\n      setEditAttachmentUrl(notice.attachment.url);\n    } else {\n      setEditAttachment(null);\n      setEditAttachmentUrl('');\n    }\n    // Scroll to the edit form\n    setTimeout(() => {\n      const element = document.getElementById(`edit-form-${notice._id}`);\n      if (element) {\n        element.scrollIntoView({\n          behavior: 'smooth',\n          block: 'center'\n        });\n      }\n    }, 100);\n  };\n\n  // Handle cancel edit\n  const handleCancelEdit = () => {\n    setEditId(null);\n    setEditTitle('');\n    setEditNotice('');\n    setEditCategory('');\n    setEditAttachment(null);\n    setEditAttachmentUrl('');\n  };\n\n  // Handle delete attachment\n  const handleDeleteAttachment = () => {\n    setEditAttachment(null);\n    setEditAttachmentUrl('');\n  };\n\n  // Handle Uploadcare file upload success\n  const handleUploadSuccess = file => {\n    if (file && file.cdnUrl) {\n      const attachmentData = {\n        url: file.cdnUrl,\n        uuid: file.uuid,\n        contentType: file.mimeType,\n        filename: file.name,\n        size: file.size\n      };\n      setEditAttachment(attachmentData);\n      setEditAttachmentUrl(file.cdnUrl);\n      console.log('File uploaded to Uploadcare:', attachmentData);\n    }\n  };\n\n  // Handle save edit\n  const handleSaveEdit = async () => {\n    try {\n      const noticeData = {\n        title: editTitle,\n        notice: editNotice,\n        category: editCategory,\n        attachment: editAttachmentUrl === '' ? null : editAttachment || 'keep',\n        updatedAt: new Date().toISOString()\n      };\n      await axios.put(`/notices/${editId}`, noticeData, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      handleCancelEdit();\n      fetchNotices();\n    } catch (err) {\n      console.error('Error updating notice:', err);\n      alert('Failed to update notice. Please try again.');\n    }\n  };\n\n  // Handle delete notice\n  const handleDeleteNotice = noticeId => {\n    setDeleteId(noticeId);\n  };\n\n  // Confirm delete\n  const confirmDelete = async () => {\n    try {\n      await axios.delete(`/notices/${deleteId}`);\n      setDeleteId(null);\n      fetchNotices();\n    } catch (err) {\n      console.error('Failed to delete notice:', err);\n      alert('Failed to delete notice. Please try again.');\n      setDeleteId(null);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"section-title\",\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Notices\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"display-notices-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container home-page\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"notices-filter-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"categoryFilter\",\n            children: \"Search by Category:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"categoryFilter\",\n            value: categoryFilter,\n            onChange: e => setCategoryFilter(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"All\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"General\",\n              children: \"General\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Exam\",\n              children: \"Exam\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Holiday\",\n              children: \"Holiday\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Event\",\n              children: \"Event\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Other\",\n              children: \"Other\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"notices-subtopics\",\n          children: [(!viewFilter || viewFilter === 'school') && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"notices-subtopic\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"School Notices\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"notices-section\",\n              children: filteredSchoolNotices.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"No school notices.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 55\n              }, this) : filteredSchoolNotices.map(n => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"notice-card\",\n                id: `notice-${n._id}`,\n                children: editId === n._id ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"edit-form\",\n                  id: `edit-form-${n._id}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    value: editTitle,\n                    onChange: e => setEditTitle(e.target.value),\n                    placeholder: \"Title\",\n                    className: \"edit-input\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 309,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    value: editNotice,\n                    onChange: e => setEditNotice(e.target.value),\n                    placeholder: \"Notice\",\n                    className: \"edit-textarea\",\n                    rows: \"5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 316,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: editCategory,\n                    onChange: e => setEditCategory(e.target.value),\n                    className: \"edit-select\",\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"General\",\n                      children: \"General\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 328,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"Exam\",\n                      children: \"Exam\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 329,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"Holiday\",\n                      children: \"Holiday\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 330,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"Event\",\n                      children: \"Event\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 331,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"Other\",\n                      children: \"Other\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 332,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 323,\n                    columnNumber: 25\n                  }, this), editAttachmentUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"current-attachment\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Current: \", (editAttachment === null || editAttachment === void 0 ? void 0 : editAttachment.filename) || 'Attachment']\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 336,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                      href: editAttachmentUrl,\n                      target: \"_blank\",\n                      rel: \"noopener noreferrer\",\n                      children: \"View\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 337,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      type: \"button\",\n                      className: \"btn-remove\",\n                      onClick: handleDeleteAttachment,\n                      children: \"Remove\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 338,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 335,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"upload-label\",\n                    children: \"Upload New Attachment (optional)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 341,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(FileUploaderRegular, {\n                    ref: uploaderRef,\n                    pubkey: \"e8c9790d2d0cfc27cb41\",\n                    maxLocalFileSizeBytes: 20971520,\n                    multiple: false,\n                    sourceList: \"local, url, camera, dropbox\",\n                    classNameUploader: \"uc-light\",\n                    onFileUploadSuccess: handleUploadSuccess\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 342,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"edit-actions\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn-save\",\n                      onClick: handleSaveEdit,\n                      children: \"Save\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 352,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn-cancel\",\n                      onClick: handleCancelEdit,\n                      children: \"Cancel\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 353,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 351,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 308,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: n.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 358,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: n.notice\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 359,\n                    columnNumber: 25\n                  }, this), hasValidAttachment(n.attachment) && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"notice-attachment\",\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => handleDownloadAttachment(n.attachment, n._id, getFileName(n.attachment)),\n                      style: {\n                        display: 'flex',\n                        alignItems: 'center',\n                        textDecoration: 'none',\n                        color: '#222',\n                        background: 'none',\n                        border: 'none',\n                        cursor: 'pointer',\n                        padding: 0\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                        src: \"https://cdn.jsdelivr.net/gh/file-icons/icons/svg/pdf.svg\",\n                        alt: \"pdf\",\n                        style: {\n                          width: 28,\n                          height: 28,\n                          marginRight: 8\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 366,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: getFileName(n.attachment)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 367,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 362,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 361,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"notice-category\",\n                    children: n.category\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 371,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"notice-date\",\n                    children: new Date(n.publishedAt).toLocaleString()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 372,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"notice-author\",\n                    children: [\"By: \", n.createdBy]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 373,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"notice-actions\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn-primary notice-download\",\n                      onClick: () => downloadNoticeAsPDF(n.title, n.notice, n.publishedAt, n.createdBy),\n                      children: \"Download Notice as PDF\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 375,\n                      columnNumber: 27\n                    }, this), (userType === null || userType === void 0 ? void 0 : userType.toLowerCase()) === 'admin' && /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn-update\",\n                        onClick: () => handleUpdateNotice(n),\n                        children: \"Update\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 381,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn-delete\",\n                        onClick: () => handleDeleteNotice(n._id),\n                        children: \"Delete\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 385,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 374,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true)\n              }, n._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 13\n          }, this), (!viewFilter || viewFilter === 'class') && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"notices-subtopic\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Class Notices\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"notices-section\",\n              children: filteredClassNotices.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"No class notices.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 403,\n                columnNumber: 54\n              }, this) : filteredClassNotices.map(n => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"notice-card\",\n                id: `notice-${n._id}`,\n                children: editId === n._id ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"edit-form\",\n                  id: `edit-form-${n._id}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    value: editTitle,\n                    onChange: e => setEditTitle(e.target.value),\n                    placeholder: \"Title\",\n                    className: \"edit-input\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 407,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    value: editNotice,\n                    onChange: e => setEditNotice(e.target.value),\n                    placeholder: \"Notice\",\n                    className: \"edit-textarea\",\n                    rows: \"5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 414,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: editCategory,\n                    onChange: e => setEditCategory(e.target.value),\n                    className: \"edit-select\",\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"General\",\n                      children: \"General\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 426,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"Exam\",\n                      children: \"Exam\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 427,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"Holiday\",\n                      children: \"Holiday\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 428,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"Event\",\n                      children: \"Event\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 429,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"Other\",\n                      children: \"Other\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 430,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 421,\n                    columnNumber: 25\n                  }, this), editAttachmentUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"current-attachment\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Current: \", (editAttachment === null || editAttachment === void 0 ? void 0 : editAttachment.filename) || 'Attachment']\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 434,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                      href: editAttachmentUrl,\n                      target: \"_blank\",\n                      rel: \"noopener noreferrer\",\n                      children: \"View\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 435,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      type: \"button\",\n                      className: \"btn-remove\",\n                      onClick: handleDeleteAttachment,\n                      children: \"Remove\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 436,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 433,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"upload-label\",\n                    children: \"Upload New Attachment (optional)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 439,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(FileUploaderRegular, {\n                    ref: uploaderRef,\n                    pubkey: \"e8c9790d2d0cfc27cb41\",\n                    maxLocalFileSizeBytes: 20971520,\n                    multiple: false,\n                    sourceList: \"local, url, camera, dropbox\",\n                    classNameUploader: \"uc-light\",\n                    onFileUploadSuccess: handleUploadSuccess\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 440,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"edit-actions\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn-save\",\n                      onClick: handleSaveEdit,\n                      children: \"Save\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 450,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn-cancel\",\n                      onClick: handleCancelEdit,\n                      children: \"Cancel\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 451,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 449,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 406,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: n.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 456,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: n.notice\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 457,\n                    columnNumber: 25\n                  }, this), hasValidAttachment(n.attachment) && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"notice-attachment\",\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => handleDownloadAttachment(n.attachment, n._id, getFileName(n.attachment)),\n                      style: {\n                        display: 'flex',\n                        alignItems: 'center',\n                        textDecoration: 'none',\n                        color: '#222',\n                        background: 'none',\n                        border: 'none',\n                        cursor: 'pointer',\n                        padding: 0\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                        src: \"https://cdn.jsdelivr.net/gh/file-icons/icons/svg/pdf.svg\",\n                        alt: \"pdf\",\n                        style: {\n                          width: 28,\n                          height: 28,\n                          marginRight: 8\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 464,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: getFileName(n.attachment)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 465,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 460,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 459,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"notice-category\",\n                    children: n.category\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 469,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"notice-date\",\n                    children: new Date(n.publishedAt).toLocaleString()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 470,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"notice-author\",\n                    children: [\"By: \", n.createdBy]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 471,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"notice-actions\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn-primary notice-download\",\n                      onClick: () => downloadNoticeAsPDF(n.title, n.notice),\n                      children: \"Download Notice as PDF\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 473,\n                      columnNumber: 27\n                    }, this), ((userType === null || userType === void 0 ? void 0 : userType.toLowerCase()) === 'admin' || (userType === null || userType === void 0 ? void 0 : userType.toLowerCase()) === 'teacher') && /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn-update\",\n                        onClick: () => handleUpdateNotice(n),\n                        children: \"Update\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 479,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn-delete\",\n                        onClick: () => handleDeleteNotice(n._id),\n                        children: \"Delete\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 483,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 472,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true)\n              }, n._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 404,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 7\n    }, this), deleteId && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Confirm Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 503,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Are you sure you want to delete this notice? This action cannot be undone.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: '#d32f2f',\n            fontWeight: 500,\n            marginTop: 8\n          },\n          children: \"If there is an attached file, it will also be deleted.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '16px',\n            justifyContent: 'center',\n            marginTop: '18px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-primary\",\n            onClick: confirmDelete,\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 509,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-primary\",\n            style: {\n              background: '#bbb',\n              color: '#222'\n            },\n            onClick: () => setDeleteId(null),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 510,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 502,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-backdrop\",\n        style: {\n          pointerEvents: 'none'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 501,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n// Helper to get file name from attachment path or object\n_s(DisplayNotices, \"78+Ns3fJ7KF7aPZlQr5eDBzj2NA=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = DisplayNotices;\nfunction getFileName(attachment) {\n  if (!attachment) return '';\n\n  // If attachment is an object with filename property\n  if (typeof attachment === 'object' && attachment.filename) {\n    return attachment.filename;\n  }\n\n  // If attachment is a string path\n  const pathStr = typeof attachment === 'string' ? attachment : attachment.path || '';\n  if (!pathStr) return '';\n  return pathStr.split('/').pop().split('\\\\').pop();\n}\n\n// Helper to download notice as PDF with clean formatting\nfunction downloadNoticeAsPDF(title, notice, publishedAt, createdBy) {\n  // Use jsPDF for PDF generation\n  const script = document.createElement('script');\n  script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js';\n  script.onload = () => {\n    const {\n      jsPDF\n    } = window.jspdf;\n    const doc = new jsPDF();\n    const pageWidth = doc.internal.pageSize.getWidth();\n    const pageHeight = doc.internal.pageSize.getHeight();\n    const margin = 20;\n    const maxWidth = pageWidth - margin * 2;\n    let yPosition = margin;\n\n    // Helper function to add text with word wrap\n    const addWrappedText = (text, x, y, maxWidth, fontSize, isBold = false) => {\n      doc.setFontSize(fontSize);\n      const lines = doc.splitTextToSize(text, maxWidth);\n      lines.forEach((line, index) => {\n        if (y + index * fontSize * 0.5 > pageHeight - margin) {\n          doc.addPage();\n          y = margin;\n        }\n        doc.text(line, x, y + index * fontSize * 0.5);\n      });\n      return y + lines.length * fontSize * 0.5;\n    };\n\n    // Header - School Name\n    doc.setFontSize(20);\n    doc.setFont(undefined, 'bold');\n    doc.setTextColor(22, 119, 210);\n    doc.text('WEBSTER INTERNATIONAL SCHOOL', pageWidth / 2, yPosition, {\n      align: 'center'\n    });\n    yPosition += 10;\n\n    // Divider line\n    doc.setDrawColor(22, 119, 210);\n    doc.setLineWidth(0.5);\n    doc.line(margin, yPosition, pageWidth - margin, yPosition);\n    yPosition += 10;\n\n    // Publisher and Date info\n    doc.setFontSize(10);\n    doc.setFont(undefined, 'normal');\n    doc.setTextColor(100, 100, 100);\n    const dateStr = publishedAt ? new Date(publishedAt).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    }) : '';\n    doc.text(`Published by: ${createdBy || 'Unknown'}`, margin, yPosition);\n    yPosition += 6;\n    doc.text(`Date: ${dateStr}`, margin, yPosition);\n    yPosition += 15;\n\n    // Title\n    doc.setFontSize(16);\n    doc.setFont(undefined, 'bold');\n    doc.setTextColor(0, 0, 0);\n    yPosition = addWrappedText(title, margin, yPosition, maxWidth, 16);\n    yPosition += 10;\n\n    // Divider line\n    doc.setDrawColor(200, 200, 200);\n    doc.setLineWidth(0.3);\n    doc.line(margin, yPosition, pageWidth - margin, yPosition);\n    yPosition += 10;\n\n    // Notice content with proper line breaks\n    doc.setFontSize(11);\n    doc.setFont(undefined, 'normal');\n    doc.setTextColor(50, 50, 50);\n\n    // Split notice by paragraphs (double line breaks or single line breaks)\n    const paragraphs = notice.split(/\\n\\n|\\n/).filter(p => p.trim());\n    paragraphs.forEach((paragraph, index) => {\n      if (yPosition > pageHeight - margin - 20) {\n        doc.addPage();\n        yPosition = margin;\n      }\n      yPosition = addWrappedText(paragraph.trim(), margin, yPosition, maxWidth, 11);\n      yPosition += 8; // Space between paragraphs\n    });\n\n    // Footer\n    const footerY = pageHeight - 15;\n    doc.setFontSize(8);\n    doc.setTextColor(150, 150, 150);\n    doc.text('Generated from Smart Alert System', pageWidth / 2, footerY, {\n      align: 'center'\n    });\n    doc.text(`Page ${doc.internal.getNumberOfPages()}`, pageWidth - margin, footerY, {\n      align: 'right'\n    });\n\n    // Save with clean filename\n    const cleanTitle = title.replace(/[^a-z0-9]/gi, '_').substring(0, 50);\n    doc.save(`${cleanTitle}_notice.pdf`);\n  };\n  document.body.appendChild(script);\n}\nexport default DisplayNotices;\nvar _c;\n$RefreshReg$(_c, \"DisplayNotices\");","map":{"version":3,"names":["React","useEffect","useState","useRef","useNavigate","useLocation","axios","FileUploaderRegular","api","jsxDEV","_jsxDEV","Fragment","_Fragment","DisplayNotices","userType","propUserType","classId","propClassId","_s","notices","setNotices","categoryFilter","setCategoryFilter","setUserType","setClassId","deleteId","setDeleteId","editId","setEditId","editTitle","setEditTitle","editNotice","setEditNotice","editCategory","setEditCategory","editAttachment","setEditAttachment","editAttachmentUrl","setEditAttachmentUrl","uploaderRef","navigate","location","searchParams","URLSearchParams","search","viewFilter","get","fetchUserData","userData","user","detectedUserType","role","console","log","err","error","handleBackspace","e","target","isEditing","tagName","isContentEditable","key","preventDefault","window","addEventListener","removeEventListener","fetchNotices","res","fetchedNotices","data","length","attachment","schoolNotices","filter","n","createdBy","toLowerCase","classNotices","filteredSchoolNotices","category","filteredClassNotices","hasValidAttachment","keys","Object","url","uuid","getAttachmentPath","noticeId","attachmentType","attachmentKeys","constructedUrl","startsWith","includes","handleDownloadAttachment","filename","open","response","fetch","blob","downloadUrl","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","alert","handleUpdateNotice","notice","_id","title","setTimeout","element","getElementById","scrollIntoView","behavior","block","handleCancelEdit","handleDeleteAttachment","handleUploadSuccess","file","cdnUrl","attachmentData","contentType","mimeType","name","size","handleSaveEdit","noticeData","updatedAt","Date","toISOString","put","headers","handleDeleteNotice","confirmDelete","delete","children","className","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","id","value","onChange","map","type","placeholder","rows","rel","onClick","ref","pubkey","maxLocalFileSizeBytes","multiple","sourceList","classNameUploader","onFileUploadSuccess","getFileName","style","display","alignItems","textDecoration","color","background","border","cursor","padding","src","alt","width","height","marginRight","publishedAt","toLocaleString","downloadNoticeAsPDF","fontWeight","marginTop","gap","justifyContent","pointerEvents","_c","pathStr","path","split","pop","script","onload","jsPDF","jspdf","doc","pageWidth","internal","pageSize","getWidth","pageHeight","getHeight","margin","maxWidth","yPosition","addWrappedText","text","x","y","fontSize","isBold","setFontSize","lines","splitTextToSize","forEach","line","index","addPage","setFont","undefined","setTextColor","align","setDrawColor","setLineWidth","dateStr","toLocaleDateString","year","month","day","hour","minute","paragraphs","p","trim","paragraph","footerY","getNumberOfPages","cleanTitle","replace","substring","save","$RefreshReg$"],"sources":["/Users/kavinth/Documents/GitHub/Smart-Alert/Smart-Alert-new/frontend/src/Components/DisplayNotices/DisplayNotices.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport axios from 'axios';\nimport { FileUploaderRegular } from '@uploadcare/react-uploader';\nimport '@uploadcare/react-uploader/core.css';\nimport { api } from '../../utils/api';\nimport './DisplayNotices.css';\n\nconst DisplayNotices = ({ userType: propUserType, classId: propClassId }) => {\n  const [notices, setNotices] = useState([]);\n  const [categoryFilter, setCategoryFilter] = useState('');\n  const [userType, setUserType] = useState(propUserType || null);\n  const [classId, setClassId] = useState(propClassId || null);\n  const [deleteId, setDeleteId] = useState(null);\n  const [editId, setEditId] = useState(null);\n  const [editTitle, setEditTitle] = useState('');\n  const [editNotice, setEditNotice] = useState('');\n  const [editCategory, setEditCategory] = useState('');\n  const [editAttachment, setEditAttachment] = useState(null);\n  const [editAttachmentUrl, setEditAttachmentUrl] = useState('');\n  const uploaderRef = useRef(null);\n\n  const navigate = useNavigate();\n  const location = useLocation();\n  \n  // Get filter from URL query parameter\n  const searchParams = new URLSearchParams(location.search);\n  const viewFilter = searchParams.get('filter'); // 'school', 'class', or null for all\n  \n  // Fetch user data to determine userType\n  useEffect(() => {\n    const fetchUserData = async () => {\n      try {\n        const userData = await api('/auth/me');\n        const user = userData?.user || userData;\n        const detectedUserType = user?.userType || user?.role;\n        console.log('DisplayNotices - User Type:', detectedUserType);\n        setUserType(detectedUserType);\n        setClassId(user?.classId);\n      } catch (err) {\n        console.error('Failed to load user data:', err);\n      }\n    };\n    \n    // Only fetch if userType not provided via props\n    if (!propUserType) {\n      fetchUserData();\n    }\n  }, [propUserType]);\n  \n  // Backspace navigation (only when not editing)\n  useEffect(() => {\n    const handleBackspace = (e) => {\n      // Don't navigate if user is typing in an input, textarea, or select element\n      const target = e.target;\n      const isEditing = target.tagName === 'INPUT' || \n                       target.tagName === 'TEXTAREA' || \n                       target.tagName === 'SELECT' ||\n                       target.isContentEditable;\n      \n      if (e.key === 'Backspace' && !isEditing) {\n        e.preventDefault();\n        navigate(-1);\n      }\n    };\n    window.addEventListener('keydown', handleBackspace);\n    return () => window.removeEventListener('keydown', handleBackspace);\n  }, [navigate]);\n\n  const fetchNotices = async () => {\n    try {\n      const res = await axios.get('/notices');\n      const fetchedNotices = res.data.notices || [];\n      console.log('Fetched notices:', fetchedNotices);\n      // Log first notice attachment for debugging\n      if (fetchedNotices.length > 0 && fetchedNotices[0].attachment) {\n        console.log('First notice attachment:', fetchedNotices[0].attachment);\n      }\n      setNotices(fetchedNotices);\n    } catch (err) {\n      console.error('Failed to load notices:', err);\n    }\n  };\n\n  useEffect(() => {\n    fetchNotices();\n  }, []);\n\n  // School notices: createdBy === 'admin' (case-insensitive)\n  const schoolNotices = notices.filter(n => n.createdBy && n.createdBy.toLowerCase() === 'admin');\n  // Class notices: createdBy !== 'admin' and (for parents, only their class)\n  const classNotices = notices.filter(n => n.createdBy && n.createdBy.toLowerCase() !== 'admin' && n.classId === classId);\n  // Filter notices by category if selected\n  const filteredSchoolNotices = schoolNotices.filter(n => !categoryFilter || n.category === categoryFilter);\n  const filteredClassNotices = classNotices.filter(n => !categoryFilter || n.category === categoryFilter);\n\n  // Helper to check if attachment has valid data\n  function hasValidAttachment(attachment) {\n    if (!attachment) return false;\n    if (typeof attachment === 'object') {\n      const keys = Object.keys(attachment);\n      if (keys.length === 0) return false;\n      return !!(attachment.url || attachment.uuid);\n    }\n    if (typeof attachment === 'string' && attachment.length > 0) {\n      return true;\n    }\n    return false;\n  }\n\n  // Helper to get correct attachment path or URL\n  function getAttachmentPath(attachment, noticeId) {\n    if (!attachment) return '';\n    \n    console.log('getAttachmentPath called with:', { attachment, noticeId, attachmentType: typeof attachment, attachmentKeys: typeof attachment === 'object' ? Object.keys(attachment) : 'N/A' });\n    \n    // If attachment is an object\n    if (typeof attachment === 'object') {\n      // Check if it's an empty object\n      const keys = Object.keys(attachment);\n      if (keys.length === 0) {\n        console.log('Empty attachment object, skipping');\n        return '';\n      }\n      \n      // If full URL is present, use it\n      if (attachment.url) {\n        console.log('Using attachment.url:', attachment.url);\n        return attachment.url;\n      }\n      // If only UUID is present, construct the Uploadcare URL\n      if (attachment.uuid) {\n        const constructedUrl = `https://ucarecdn.com/${attachment.uuid}/`;\n        console.log('Constructed URL from UUID:', constructedUrl);\n        return constructedUrl;\n      }\n    }\n    \n    // If attachment is a string (could be UUID or URL)\n    if (typeof attachment === 'string') {\n      // If it's already a full URL, return it\n      if (attachment.startsWith('http')) {\n        console.log('Using string URL:', attachment);\n        return attachment;\n      }\n      // If it looks like a UUID, construct the Uploadcare URL\n      if (attachment.length > 20 && !attachment.includes('/')) {\n        const constructedUrl = `https://ucarecdn.com/${attachment}/`;\n        console.log('Constructed URL from string UUID:', constructedUrl);\n        return constructedUrl;\n      }\n    }\n    \n    console.log('No valid attachment data found');\n    return '';\n  }\n\n  // Helper to handle attachment download\n  const handleDownloadAttachment = async (attachment, noticeId, filename) => {\n    try {\n      const url = getAttachmentPath(attachment, noticeId);\n      if (!url) return;\n\n      // For Uploadcare URLs, open in new tab (they handle downloads)\n      if (url.includes('ucarecdn.com')) {\n        window.open(url, '_blank');\n        return;\n      }\n\n      // For local API endpoints, fetch and download\n      const response = await fetch(url);\n      const blob = await response.blob();\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = filename || 'attachment';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(downloadUrl);\n    } catch (err) {\n      console.error('Failed to download attachment:', err);\n      alert('Failed to download attachment. Please try again.');\n    }\n  };\n\n  // Handle inline edit notice\n  const handleUpdateNotice = (notice) => {\n    setEditId(notice._id);\n    setEditTitle(notice.title);\n    setEditNotice(notice.notice);\n    setEditCategory(notice.category || 'General');\n    // Store existing attachment data\n    if (notice.attachment && notice.attachment.url) {\n      setEditAttachment(notice.attachment);\n      setEditAttachmentUrl(notice.attachment.url);\n    } else {\n      setEditAttachment(null);\n      setEditAttachmentUrl('');\n    }\n    // Scroll to the edit form\n    setTimeout(() => {\n      const element = document.getElementById(`edit-form-${notice._id}`);\n      if (element) {\n        element.scrollIntoView({ behavior: 'smooth', block: 'center' });\n      }\n    }, 100);\n  };\n\n  // Handle cancel edit\n  const handleCancelEdit = () => {\n    setEditId(null);\n    setEditTitle('');\n    setEditNotice('');\n    setEditCategory('');\n    setEditAttachment(null);\n    setEditAttachmentUrl('');\n  };\n\n  // Handle delete attachment\n  const handleDeleteAttachment = () => {\n    setEditAttachment(null);\n    setEditAttachmentUrl('');\n  };\n\n  // Handle Uploadcare file upload success\n  const handleUploadSuccess = (file) => {\n    if (file && file.cdnUrl) {\n      const attachmentData = {\n        url: file.cdnUrl,\n        uuid: file.uuid,\n        contentType: file.mimeType,\n        filename: file.name,\n        size: file.size\n      };\n      setEditAttachment(attachmentData);\n      setEditAttachmentUrl(file.cdnUrl);\n      console.log('File uploaded to Uploadcare:', attachmentData);\n    }\n  };\n\n  // Handle save edit\n  const handleSaveEdit = async () => {\n    try {\n      const noticeData = {\n        title: editTitle,\n        notice: editNotice,\n        category: editCategory,\n        attachment: editAttachmentUrl === '' ? null : (editAttachment || 'keep'),\n        updatedAt: new Date().toISOString()\n      };\n      await axios.put(`/notices/${editId}`, noticeData, {\n        headers: { 'Content-Type': 'application/json' },\n      });\n      handleCancelEdit();\n      fetchNotices();\n    } catch (err) {\n      console.error('Error updating notice:', err);\n      alert('Failed to update notice. Please try again.');\n    }\n  };\n\n  // Handle delete notice\n  const handleDeleteNotice = (noticeId) => {\n    setDeleteId(noticeId);\n  };\n\n  // Confirm delete\n  const confirmDelete = async () => {\n    try {\n      await axios.delete(`/notices/${deleteId}`);\n      setDeleteId(null);\n      fetchNotices();\n    } catch (err) {\n      console.error('Failed to delete notice:', err);\n      alert('Failed to delete notice. Please try again.');\n      setDeleteId(null);\n    }\n  };\n\n\n  return (\n    <>\n      <div className=\"section-title\">\n        <h2>Notices</h2>\n      </div>\n      <div className=\"display-notices-container\">\n        <div className=\"container home-page\">\n          <div className=\"notices-filter-row\">\n            <label htmlFor=\"categoryFilter\">Search by Category:</label>\n            <select id=\"categoryFilter\" value={categoryFilter} onChange={e => setCategoryFilter(e.target.value)}>\n              <option value=\"\">All</option>\n              <option value=\"General\">General</option>\n              <option value=\"Exam\">Exam</option>\n              <option value=\"Holiday\">Holiday</option>\n              <option value=\"Event\">Event</option>\n              <option value=\"Other\">Other</option>\n            </select>\n          </div>\n          <div className=\"notices-subtopics\">\n            {(!viewFilter || viewFilter === 'school') && (\n            <div className=\"notices-subtopic\">\n              <h3>School Notices</h3>\n              <div className=\"notices-section\">\n                {filteredSchoolNotices.length === 0 ? <p>No school notices.</p> : filteredSchoolNotices.map(n => (\n                  <div className=\"notice-card\" key={n._id} id={`notice-${n._id}`}>\n                    {editId === n._id ? (\n                      <div className=\"edit-form\" id={`edit-form-${n._id}`}>\n                        <input\n                          type=\"text\"\n                          value={editTitle}\n                          onChange={e => setEditTitle(e.target.value)}\n                          placeholder=\"Title\"\n                          className=\"edit-input\"\n                        />\n                        <textarea\n                          value={editNotice}\n                          onChange={e => setEditNotice(e.target.value)}\n                          placeholder=\"Notice\"\n                          className=\"edit-textarea\"\n                          rows=\"5\"\n                        />\n                        <select\n                          value={editCategory}\n                          onChange={e => setEditCategory(e.target.value)}\n                          className=\"edit-select\"\n                        >\n                          <option value=\"General\">General</option>\n                          <option value=\"Exam\">Exam</option>\n                          <option value=\"Holiday\">Holiday</option>\n                          <option value=\"Event\">Event</option>\n                          <option value=\"Other\">Other</option>\n                        </select>\n                        {editAttachmentUrl && (\n                          <div className=\"current-attachment\">\n                            <p>Current: {editAttachment?.filename || 'Attachment'}</p>\n                            <a href={editAttachmentUrl} target=\"_blank\" rel=\"noopener noreferrer\">View</a>\n                            <button type=\"button\" className=\"btn-remove\" onClick={handleDeleteAttachment}>Remove</button>\n                          </div>\n                        )}\n                        <label className=\"upload-label\">Upload New Attachment (optional)</label>\n                        <FileUploaderRegular\n                          ref={uploaderRef}\n                          pubkey=\"e8c9790d2d0cfc27cb41\"\n                          maxLocalFileSizeBytes={20971520}\n                          multiple={false}\n                          sourceList=\"local, url, camera, dropbox\"\n                          classNameUploader=\"uc-light\"\n                          onFileUploadSuccess={handleUploadSuccess}\n                        />\n                        <div className=\"edit-actions\">\n                          <button className=\"btn-save\" onClick={handleSaveEdit}>Save</button>\n                          <button className=\"btn-cancel\" onClick={handleCancelEdit}>Cancel</button>\n                        </div>\n                      </div>\n                    ) : (\n                      <>\n                        <h3>{n.title}</h3>\n                        <p>{n.notice}</p>\n                        {hasValidAttachment(n.attachment) && (\n                          <div className=\"notice-attachment\">\n                            <button \n                              onClick={() => handleDownloadAttachment(n.attachment, n._id, getFileName(n.attachment))}\n                              style={{ display: 'flex', alignItems: 'center', textDecoration: 'none', color: '#222', background: 'none', border: 'none', cursor: 'pointer', padding: 0 }}\n                            >\n                              <img src=\"https://cdn.jsdelivr.net/gh/file-icons/icons/svg/pdf.svg\" alt=\"pdf\" style={{ width: 28, height: 28, marginRight: 8 }} />\n                              <span>{getFileName(n.attachment)}</span>\n                            </button>\n                          </div>\n                        )}\n                        <span className=\"notice-category\">{n.category}</span>\n                        <span className=\"notice-date\">{new Date(n.publishedAt).toLocaleString()}</span>\n                        <span className=\"notice-author\">By: {n.createdBy}</span>\n                        <div className=\"notice-actions\">\n                          <button\n                            className=\"btn-primary notice-download\"\n                            onClick={() => downloadNoticeAsPDF(n.title, n.notice, n.publishedAt, n.createdBy)}\n                          >Download Notice as PDF</button>\n                          {(userType?.toLowerCase() === 'admin') && (\n                            <>\n                              <button\n                                className=\"btn-update\"\n                                onClick={() => handleUpdateNotice(n)}\n                              >Update</button>\n                              <button\n                                className=\"btn-delete\"\n                                onClick={() => handleDeleteNotice(n._id)}\n                              >Delete</button>\n                            </>\n                          )}\n                        </div>\n                      </>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n            )}\n            {(!viewFilter || viewFilter === 'class') && (\n            <div className=\"notices-subtopic\">\n              <h3>Class Notices</h3>\n              <div className=\"notices-section\">\n                {filteredClassNotices.length === 0 ? <p>No class notices.</p> : filteredClassNotices.map(n => (\n                  <div className=\"notice-card\" key={n._id} id={`notice-${n._id}`}>\n                    {editId === n._id ? (\n                      <div className=\"edit-form\" id={`edit-form-${n._id}`}>\n                        <input\n                          type=\"text\"\n                          value={editTitle}\n                          onChange={e => setEditTitle(e.target.value)}\n                          placeholder=\"Title\"\n                          className=\"edit-input\"\n                        />\n                        <textarea\n                          value={editNotice}\n                          onChange={e => setEditNotice(e.target.value)}\n                          placeholder=\"Notice\"\n                          className=\"edit-textarea\"\n                          rows=\"5\"\n                        />\n                        <select\n                          value={editCategory}\n                          onChange={e => setEditCategory(e.target.value)}\n                          className=\"edit-select\"\n                        >\n                          <option value=\"General\">General</option>\n                          <option value=\"Exam\">Exam</option>\n                          <option value=\"Holiday\">Holiday</option>\n                          <option value=\"Event\">Event</option>\n                          <option value=\"Other\">Other</option>\n                        </select>\n                        {editAttachmentUrl && (\n                          <div className=\"current-attachment\">\n                            <p>Current: {editAttachment?.filename || 'Attachment'}</p>\n                            <a href={editAttachmentUrl} target=\"_blank\" rel=\"noopener noreferrer\">View</a>\n                            <button type=\"button\" className=\"btn-remove\" onClick={handleDeleteAttachment}>Remove</button>\n                          </div>\n                        )}\n                        <label className=\"upload-label\">Upload New Attachment (optional)</label>\n                        <FileUploaderRegular\n                          ref={uploaderRef}\n                          pubkey=\"e8c9790d2d0cfc27cb41\"\n                          maxLocalFileSizeBytes={20971520}\n                          multiple={false}\n                          sourceList=\"local, url, camera, dropbox\"\n                          classNameUploader=\"uc-light\"\n                          onFileUploadSuccess={handleUploadSuccess}\n                        />\n                        <div className=\"edit-actions\">\n                          <button className=\"btn-save\" onClick={handleSaveEdit}>Save</button>\n                          <button className=\"btn-cancel\" onClick={handleCancelEdit}>Cancel</button>\n                        </div>\n                      </div>\n                    ) : (\n                      <>\n                        <h3>{n.title}</h3>\n                        <p>{n.notice}</p>\n                        {hasValidAttachment(n.attachment) && (\n                          <div className=\"notice-attachment\">\n                            <button \n                              onClick={() => handleDownloadAttachment(n.attachment, n._id, getFileName(n.attachment))}\n                              style={{ display: 'flex', alignItems: 'center', textDecoration: 'none', color: '#222', background: 'none', border: 'none', cursor: 'pointer', padding: 0 }}\n                            >\n                              <img src=\"https://cdn.jsdelivr.net/gh/file-icons/icons/svg/pdf.svg\" alt=\"pdf\" style={{ width: 28, height: 28, marginRight: 8 }} />\n                              <span>{getFileName(n.attachment)}</span>\n                            </button>\n                          </div>\n                        )}\n                        <span className=\"notice-category\">{n.category}</span>\n                        <span className=\"notice-date\">{new Date(n.publishedAt).toLocaleString()}</span>\n                        <span className=\"notice-author\">By: {n.createdBy}</span>\n                        <div className=\"notice-actions\">\n                          <button\n                            className=\"btn-primary notice-download\"\n                            onClick={() => downloadNoticeAsPDF(n.title, n.notice)}\n                          >Download Notice as PDF</button>\n                          {(userType?.toLowerCase() === 'admin' || userType?.toLowerCase() === 'teacher') && (\n                            <>\n                              <button\n                                className=\"btn-update\"\n                                onClick={() => handleUpdateNotice(n)}\n                              >Update</button>\n                              <button\n                                className=\"btn-delete\"\n                                onClick={() => handleDeleteNotice(n._id)}\n                              >Delete</button>\n                            </>\n                          )}\n                        </div>\n                      </>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n            )}\n          </div>\n        </div>\n      </div>\n      {deleteId && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-card\">\n            <h3>Confirm Delete</h3>\n            <p>Are you sure you want to delete this notice? This action cannot be undone.</p>\n            <p style={{ color: '#d32f2f', fontWeight: 500, marginTop: 8 }}>\n              If there is an attached file, it will also be deleted.\n            </p>\n            <div style={{ display: 'flex', gap: '16px', justifyContent: 'center', marginTop: '18px' }}>\n              <button className=\"btn-primary\" onClick={confirmDelete}>Delete</button>\n              <button className=\"btn-primary\" style={{ background: '#bbb', color: '#222' }} onClick={() => setDeleteId(null)}>Cancel</button>\n            </div>\n          </div>\n          <div className=\"modal-backdrop\" style={{ pointerEvents: 'none' }}></div>\n        </div>\n      )}\n    </>\n  );\n};\n\n// Helper to get file name from attachment path or object\nfunction getFileName(attachment) {\n  if (!attachment) return '';\n  \n  // If attachment is an object with filename property\n  if (typeof attachment === 'object' && attachment.filename) {\n    return attachment.filename;\n  }\n  \n  // If attachment is a string path\n  const pathStr = typeof attachment === 'string' ? attachment : attachment.path || '';\n  if (!pathStr) return '';\n  return pathStr.split('/').pop().split('\\\\').pop();\n}\n\n// Helper to download notice as PDF with clean formatting\nfunction downloadNoticeAsPDF(title, notice, publishedAt, createdBy) {\n  // Use jsPDF for PDF generation\n  const script = document.createElement('script');\n  script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js';\n  script.onload = () => {\n    const { jsPDF } = window.jspdf;\n    const doc = new jsPDF();\n    \n    const pageWidth = doc.internal.pageSize.getWidth();\n    const pageHeight = doc.internal.pageSize.getHeight();\n    const margin = 20;\n    const maxWidth = pageWidth - (margin * 2);\n    let yPosition = margin;\n    \n    // Helper function to add text with word wrap\n    const addWrappedText = (text, x, y, maxWidth, fontSize, isBold = false) => {\n      doc.setFontSize(fontSize);\n      const lines = doc.splitTextToSize(text, maxWidth);\n      lines.forEach((line, index) => {\n        if (y + (index * fontSize * 0.5) > pageHeight - margin) {\n          doc.addPage();\n          y = margin;\n        }\n        doc.text(line, x, y + (index * fontSize * 0.5));\n      });\n      return y + (lines.length * fontSize * 0.5);\n    };\n    \n    // Header - School Name\n    doc.setFontSize(20);\n    doc.setFont(undefined, 'bold');\n    doc.setTextColor(22, 119, 210);\n    doc.text('WEBSTER INTERNATIONAL SCHOOL', pageWidth / 2, yPosition, { align: 'center' });\n    yPosition += 10;\n    \n    // Divider line\n    doc.setDrawColor(22, 119, 210);\n    doc.setLineWidth(0.5);\n    doc.line(margin, yPosition, pageWidth - margin, yPosition);\n    yPosition += 10;\n    \n    // Publisher and Date info\n    doc.setFontSize(10);\n    doc.setFont(undefined, 'normal');\n    doc.setTextColor(100, 100, 100);\n    const dateStr = publishedAt ? new Date(publishedAt).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    }) : '';\n    doc.text(`Published by: ${createdBy || 'Unknown'}`, margin, yPosition);\n    yPosition += 6;\n    doc.text(`Date: ${dateStr}`, margin, yPosition);\n    yPosition += 15;\n    \n    // Title\n    doc.setFontSize(16);\n    doc.setFont(undefined, 'bold');\n    doc.setTextColor(0, 0, 0);\n    yPosition = addWrappedText(title, margin, yPosition, maxWidth, 16);\n    yPosition += 10;\n    \n    // Divider line\n    doc.setDrawColor(200, 200, 200);\n    doc.setLineWidth(0.3);\n    doc.line(margin, yPosition, pageWidth - margin, yPosition);\n    yPosition += 10;\n    \n    // Notice content with proper line breaks\n    doc.setFontSize(11);\n    doc.setFont(undefined, 'normal');\n    doc.setTextColor(50, 50, 50);\n    \n    // Split notice by paragraphs (double line breaks or single line breaks)\n    const paragraphs = notice.split(/\\n\\n|\\n/).filter(p => p.trim());\n    \n    paragraphs.forEach((paragraph, index) => {\n      if (yPosition > pageHeight - margin - 20) {\n        doc.addPage();\n        yPosition = margin;\n      }\n      \n      yPosition = addWrappedText(paragraph.trim(), margin, yPosition, maxWidth, 11);\n      yPosition += 8; // Space between paragraphs\n    });\n    \n    // Footer\n    const footerY = pageHeight - 15;\n    doc.setFontSize(8);\n    doc.setTextColor(150, 150, 150);\n    doc.text('Generated from Smart Alert System', pageWidth / 2, footerY, { align: 'center' });\n    doc.text(`Page ${doc.internal.getNumberOfPages()}`, pageWidth - margin, footerY, { align: 'right' });\n    \n    // Save with clean filename\n    const cleanTitle = title.replace(/[^a-z0-9]/gi, '_').substring(0, 50);\n    doc.save(`${cleanTitle}_notice.pdf`);\n  };\n  document.body.appendChild(script);\n}\n\nexport default DisplayNotices;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AAC1D,SAASC,WAAW,EAAEC,WAAW,QAAQ,kBAAkB;AAC3D,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,mBAAmB,QAAQ,4BAA4B;AAChE,OAAO,qCAAqC;AAC5C,SAASC,GAAG,QAAQ,iBAAiB;AACrC,OAAO,sBAAsB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE9B,MAAMC,cAAc,GAAGA,CAAC;EAAEC,QAAQ,EAAEC,YAAY;EAAEC,OAAO,EAAEC;AAAY,CAAC,KAAK;EAAAC,EAAA;EAC3E,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGlB,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACmB,cAAc,EAAEC,iBAAiB,CAAC,GAAGpB,QAAQ,CAAC,EAAE,CAAC;EACxD,MAAM,CAACY,QAAQ,EAAES,WAAW,CAAC,GAAGrB,QAAQ,CAACa,YAAY,IAAI,IAAI,CAAC;EAC9D,MAAM,CAACC,OAAO,EAAEQ,UAAU,CAAC,GAAGtB,QAAQ,CAACe,WAAW,IAAI,IAAI,CAAC;EAC3D,MAAM,CAACQ,QAAQ,EAAEC,WAAW,CAAC,GAAGxB,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAACyB,MAAM,EAAEC,SAAS,CAAC,GAAG1B,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAAC2B,SAAS,EAAEC,YAAY,CAAC,GAAG5B,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAAC6B,UAAU,EAAEC,aAAa,CAAC,GAAG9B,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAAC+B,YAAY,EAAEC,eAAe,CAAC,GAAGhC,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACiC,cAAc,EAAEC,iBAAiB,CAAC,GAAGlC,QAAQ,CAAC,IAAI,CAAC;EAC1D,MAAM,CAACmC,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGpC,QAAQ,CAAC,EAAE,CAAC;EAC9D,MAAMqC,WAAW,GAAGpC,MAAM,CAAC,IAAI,CAAC;EAEhC,MAAMqC,QAAQ,GAAGpC,WAAW,CAAC,CAAC;EAC9B,MAAMqC,QAAQ,GAAGpC,WAAW,CAAC,CAAC;;EAE9B;EACA,MAAMqC,YAAY,GAAG,IAAIC,eAAe,CAACF,QAAQ,CAACG,MAAM,CAAC;EACzD,MAAMC,UAAU,GAAGH,YAAY,CAACI,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC;;EAE/C;EACA7C,SAAS,CAAC,MAAM;IACd,MAAM8C,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChC,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMxC,GAAG,CAAC,UAAU,CAAC;QACtC,MAAMyC,IAAI,GAAG,CAAAD,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEC,IAAI,KAAID,QAAQ;QACvC,MAAME,gBAAgB,GAAG,CAAAD,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEnC,QAAQ,MAAImC,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEE,IAAI;QACrDC,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEH,gBAAgB,CAAC;QAC5D3B,WAAW,CAAC2B,gBAAgB,CAAC;QAC7B1B,UAAU,CAACyB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEjC,OAAO,CAAC;MAC3B,CAAC,CAAC,OAAOsC,GAAG,EAAE;QACZF,OAAO,CAACG,KAAK,CAAC,2BAA2B,EAAED,GAAG,CAAC;MACjD;IACF,CAAC;;IAED;IACA,IAAI,CAACvC,YAAY,EAAE;MACjBgC,aAAa,CAAC,CAAC;IACjB;EACF,CAAC,EAAE,CAAChC,YAAY,CAAC,CAAC;;EAElB;EACAd,SAAS,CAAC,MAAM;IACd,MAAMuD,eAAe,GAAIC,CAAC,IAAK;MAC7B;MACA,MAAMC,MAAM,GAAGD,CAAC,CAACC,MAAM;MACvB,MAAMC,SAAS,GAAGD,MAAM,CAACE,OAAO,KAAK,OAAO,IAC3BF,MAAM,CAACE,OAAO,KAAK,UAAU,IAC7BF,MAAM,CAACE,OAAO,KAAK,QAAQ,IAC3BF,MAAM,CAACG,iBAAiB;MAEzC,IAAIJ,CAAC,CAACK,GAAG,KAAK,WAAW,IAAI,CAACH,SAAS,EAAE;QACvCF,CAAC,CAACM,cAAc,CAAC,CAAC;QAClBvB,QAAQ,CAAC,CAAC,CAAC,CAAC;MACd;IACF,CAAC;IACDwB,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAET,eAAe,CAAC;IACnD,OAAO,MAAMQ,MAAM,CAACE,mBAAmB,CAAC,SAAS,EAAEV,eAAe,CAAC;EACrE,CAAC,EAAE,CAAChB,QAAQ,CAAC,CAAC;EAEd,MAAM2B,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI;MACF,MAAMC,GAAG,GAAG,MAAM9D,KAAK,CAACwC,GAAG,CAAC,UAAU,CAAC;MACvC,MAAMuB,cAAc,GAAGD,GAAG,CAACE,IAAI,CAACnD,OAAO,IAAI,EAAE;MAC7CiC,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEgB,cAAc,CAAC;MAC/C;MACA,IAAIA,cAAc,CAACE,MAAM,GAAG,CAAC,IAAIF,cAAc,CAAC,CAAC,CAAC,CAACG,UAAU,EAAE;QAC7DpB,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEgB,cAAc,CAAC,CAAC,CAAC,CAACG,UAAU,CAAC;MACvE;MACApD,UAAU,CAACiD,cAAc,CAAC;IAC5B,CAAC,CAAC,OAAOf,GAAG,EAAE;MACZF,OAAO,CAACG,KAAK,CAAC,yBAAyB,EAAED,GAAG,CAAC;IAC/C;EACF,CAAC;EAEDrD,SAAS,CAAC,MAAM;IACdkE,YAAY,CAAC,CAAC;EAChB,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMM,aAAa,GAAGtD,OAAO,CAACuD,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,SAAS,IAAID,CAAC,CAACC,SAAS,CAACC,WAAW,CAAC,CAAC,KAAK,OAAO,CAAC;EAC/F;EACA,MAAMC,YAAY,GAAG3D,OAAO,CAACuD,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,SAAS,IAAID,CAAC,CAACC,SAAS,CAACC,WAAW,CAAC,CAAC,KAAK,OAAO,IAAIF,CAAC,CAAC3D,OAAO,KAAKA,OAAO,CAAC;EACvH;EACA,MAAM+D,qBAAqB,GAAGN,aAAa,CAACC,MAAM,CAACC,CAAC,IAAI,CAACtD,cAAc,IAAIsD,CAAC,CAACK,QAAQ,KAAK3D,cAAc,CAAC;EACzG,MAAM4D,oBAAoB,GAAGH,YAAY,CAACJ,MAAM,CAACC,CAAC,IAAI,CAACtD,cAAc,IAAIsD,CAAC,CAACK,QAAQ,KAAK3D,cAAc,CAAC;;EAEvG;EACA,SAAS6D,kBAAkBA,CAACV,UAAU,EAAE;IACtC,IAAI,CAACA,UAAU,EAAE,OAAO,KAAK;IAC7B,IAAI,OAAOA,UAAU,KAAK,QAAQ,EAAE;MAClC,MAAMW,IAAI,GAAGC,MAAM,CAACD,IAAI,CAACX,UAAU,CAAC;MACpC,IAAIW,IAAI,CAACZ,MAAM,KAAK,CAAC,EAAE,OAAO,KAAK;MACnC,OAAO,CAAC,EAAEC,UAAU,CAACa,GAAG,IAAIb,UAAU,CAACc,IAAI,CAAC;IAC9C;IACA,IAAI,OAAOd,UAAU,KAAK,QAAQ,IAAIA,UAAU,CAACD,MAAM,GAAG,CAAC,EAAE;MAC3D,OAAO,IAAI;IACb;IACA,OAAO,KAAK;EACd;;EAEA;EACA,SAASgB,iBAAiBA,CAACf,UAAU,EAAEgB,QAAQ,EAAE;IAC/C,IAAI,CAAChB,UAAU,EAAE,OAAO,EAAE;IAE1BpB,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAE;MAAEmB,UAAU;MAAEgB,QAAQ;MAAEC,cAAc,EAAE,OAAOjB,UAAU;MAAEkB,cAAc,EAAE,OAAOlB,UAAU,KAAK,QAAQ,GAAGY,MAAM,CAACD,IAAI,CAACX,UAAU,CAAC,GAAG;IAAM,CAAC,CAAC;;IAE5L;IACA,IAAI,OAAOA,UAAU,KAAK,QAAQ,EAAE;MAClC;MACA,MAAMW,IAAI,GAAGC,MAAM,CAACD,IAAI,CAACX,UAAU,CAAC;MACpC,IAAIW,IAAI,CAACZ,MAAM,KAAK,CAAC,EAAE;QACrBnB,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAC;QAChD,OAAO,EAAE;MACX;;MAEA;MACA,IAAImB,UAAU,CAACa,GAAG,EAAE;QAClBjC,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEmB,UAAU,CAACa,GAAG,CAAC;QACpD,OAAOb,UAAU,CAACa,GAAG;MACvB;MACA;MACA,IAAIb,UAAU,CAACc,IAAI,EAAE;QACnB,MAAMK,cAAc,GAAG,wBAAwBnB,UAAU,CAACc,IAAI,GAAG;QACjElC,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEsC,cAAc,CAAC;QACzD,OAAOA,cAAc;MACvB;IACF;;IAEA;IACA,IAAI,OAAOnB,UAAU,KAAK,QAAQ,EAAE;MAClC;MACA,IAAIA,UAAU,CAACoB,UAAU,CAAC,MAAM,CAAC,EAAE;QACjCxC,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEmB,UAAU,CAAC;QAC5C,OAAOA,UAAU;MACnB;MACA;MACA,IAAIA,UAAU,CAACD,MAAM,GAAG,EAAE,IAAI,CAACC,UAAU,CAACqB,QAAQ,CAAC,GAAG,CAAC,EAAE;QACvD,MAAMF,cAAc,GAAG,wBAAwBnB,UAAU,GAAG;QAC5DpB,OAAO,CAACC,GAAG,CAAC,mCAAmC,EAAEsC,cAAc,CAAC;QAChE,OAAOA,cAAc;MACvB;IACF;IAEAvC,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;IAC7C,OAAO,EAAE;EACX;;EAEA;EACA,MAAMyC,wBAAwB,GAAG,MAAAA,CAAOtB,UAAU,EAAEgB,QAAQ,EAAEO,QAAQ,KAAK;IACzE,IAAI;MACF,MAAMV,GAAG,GAAGE,iBAAiB,CAACf,UAAU,EAAEgB,QAAQ,CAAC;MACnD,IAAI,CAACH,GAAG,EAAE;;MAEV;MACA,IAAIA,GAAG,CAACQ,QAAQ,CAAC,cAAc,CAAC,EAAE;QAChC7B,MAAM,CAACgC,IAAI,CAACX,GAAG,EAAE,QAAQ,CAAC;QAC1B;MACF;;MAEA;MACA,MAAMY,QAAQ,GAAG,MAAMC,KAAK,CAACb,GAAG,CAAC;MACjC,MAAMc,IAAI,GAAG,MAAMF,QAAQ,CAACE,IAAI,CAAC,CAAC;MAClC,MAAMC,WAAW,GAAGpC,MAAM,CAACqC,GAAG,CAACC,eAAe,CAACH,IAAI,CAAC;MACpD,MAAMI,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;MACxCF,IAAI,CAACG,IAAI,GAAGN,WAAW;MACvBG,IAAI,CAACI,QAAQ,GAAGZ,QAAQ,IAAI,YAAY;MACxCS,QAAQ,CAACI,IAAI,CAACC,WAAW,CAACN,IAAI,CAAC;MAC/BA,IAAI,CAACO,KAAK,CAAC,CAAC;MACZN,QAAQ,CAACI,IAAI,CAACG,WAAW,CAACR,IAAI,CAAC;MAC/BvC,MAAM,CAACqC,GAAG,CAACW,eAAe,CAACZ,WAAW,CAAC;IACzC,CAAC,CAAC,OAAO9C,GAAG,EAAE;MACZF,OAAO,CAACG,KAAK,CAAC,gCAAgC,EAAED,GAAG,CAAC;MACpD2D,KAAK,CAAC,kDAAkD,CAAC;IAC3D;EACF,CAAC;;EAED;EACA,MAAMC,kBAAkB,GAAIC,MAAM,IAAK;IACrCvF,SAAS,CAACuF,MAAM,CAACC,GAAG,CAAC;IACrBtF,YAAY,CAACqF,MAAM,CAACE,KAAK,CAAC;IAC1BrF,aAAa,CAACmF,MAAM,CAACA,MAAM,CAAC;IAC5BjF,eAAe,CAACiF,MAAM,CAACnC,QAAQ,IAAI,SAAS,CAAC;IAC7C;IACA,IAAImC,MAAM,CAAC3C,UAAU,IAAI2C,MAAM,CAAC3C,UAAU,CAACa,GAAG,EAAE;MAC9CjD,iBAAiB,CAAC+E,MAAM,CAAC3C,UAAU,CAAC;MACpClC,oBAAoB,CAAC6E,MAAM,CAAC3C,UAAU,CAACa,GAAG,CAAC;IAC7C,CAAC,MAAM;MACLjD,iBAAiB,CAAC,IAAI,CAAC;MACvBE,oBAAoB,CAAC,EAAE,CAAC;IAC1B;IACA;IACAgF,UAAU,CAAC,MAAM;MACf,MAAMC,OAAO,GAAGf,QAAQ,CAACgB,cAAc,CAAC,aAAaL,MAAM,CAACC,GAAG,EAAE,CAAC;MAClE,IAAIG,OAAO,EAAE;QACXA,OAAO,CAACE,cAAc,CAAC;UAAEC,QAAQ,EAAE,QAAQ;UAAEC,KAAK,EAAE;QAAS,CAAC,CAAC;MACjE;IACF,CAAC,EAAE,GAAG,CAAC;EACT,CAAC;;EAED;EACA,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;IAC7BhG,SAAS,CAAC,IAAI,CAAC;IACfE,YAAY,CAAC,EAAE,CAAC;IAChBE,aAAa,CAAC,EAAE,CAAC;IACjBE,eAAe,CAAC,EAAE,CAAC;IACnBE,iBAAiB,CAAC,IAAI,CAAC;IACvBE,oBAAoB,CAAC,EAAE,CAAC;EAC1B,CAAC;;EAED;EACA,MAAMuF,sBAAsB,GAAGA,CAAA,KAAM;IACnCzF,iBAAiB,CAAC,IAAI,CAAC;IACvBE,oBAAoB,CAAC,EAAE,CAAC;EAC1B,CAAC;;EAED;EACA,MAAMwF,mBAAmB,GAAIC,IAAI,IAAK;IACpC,IAAIA,IAAI,IAAIA,IAAI,CAACC,MAAM,EAAE;MACvB,MAAMC,cAAc,GAAG;QACrB5C,GAAG,EAAE0C,IAAI,CAACC,MAAM;QAChB1C,IAAI,EAAEyC,IAAI,CAACzC,IAAI;QACf4C,WAAW,EAAEH,IAAI,CAACI,QAAQ;QAC1BpC,QAAQ,EAAEgC,IAAI,CAACK,IAAI;QACnBC,IAAI,EAAEN,IAAI,CAACM;MACb,CAAC;MACDjG,iBAAiB,CAAC6F,cAAc,CAAC;MACjC3F,oBAAoB,CAACyF,IAAI,CAACC,MAAM,CAAC;MACjC5E,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAE4E,cAAc,CAAC;IAC7D;EACF,CAAC;;EAED;EACA,MAAMK,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,IAAI;MACF,MAAMC,UAAU,GAAG;QACjBlB,KAAK,EAAExF,SAAS;QAChBsF,MAAM,EAAEpF,UAAU;QAClBiD,QAAQ,EAAE/C,YAAY;QACtBuC,UAAU,EAAEnC,iBAAiB,KAAK,EAAE,GAAG,IAAI,GAAIF,cAAc,IAAI,MAAO;QACxEqG,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;MACpC,CAAC;MACD,MAAMpI,KAAK,CAACqI,GAAG,CAAC,YAAYhH,MAAM,EAAE,EAAE4G,UAAU,EAAE;QAChDK,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB;MAChD,CAAC,CAAC;MACFhB,gBAAgB,CAAC,CAAC;MAClBzD,YAAY,CAAC,CAAC;IAChB,CAAC,CAAC,OAAOb,GAAG,EAAE;MACZF,OAAO,CAACG,KAAK,CAAC,wBAAwB,EAAED,GAAG,CAAC;MAC5C2D,KAAK,CAAC,4CAA4C,CAAC;IACrD;EACF,CAAC;;EAED;EACA,MAAM4B,kBAAkB,GAAIrD,QAAQ,IAAK;IACvC9D,WAAW,CAAC8D,QAAQ,CAAC;EACvB,CAAC;;EAED;EACA,MAAMsD,aAAa,GAAG,MAAAA,CAAA,KAAY;IAChC,IAAI;MACF,MAAMxI,KAAK,CAACyI,MAAM,CAAC,YAAYtH,QAAQ,EAAE,CAAC;MAC1CC,WAAW,CAAC,IAAI,CAAC;MACjByC,YAAY,CAAC,CAAC;IAChB,CAAC,CAAC,OAAOb,GAAG,EAAE;MACZF,OAAO,CAACG,KAAK,CAAC,0BAA0B,EAAED,GAAG,CAAC;MAC9C2D,KAAK,CAAC,4CAA4C,CAAC;MACnDvF,WAAW,CAAC,IAAI,CAAC;IACnB;EACF,CAAC;EAGD,oBACEhB,OAAA,CAAAE,SAAA;IAAAoI,QAAA,gBACEtI,OAAA;MAAKuI,SAAS,EAAC,eAAe;MAAAD,QAAA,eAC5BtI,OAAA;QAAAsI,QAAA,EAAI;MAAO;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACb,CAAC,eACN3I,OAAA;MAAKuI,SAAS,EAAC,2BAA2B;MAAAD,QAAA,eACxCtI,OAAA;QAAKuI,SAAS,EAAC,qBAAqB;QAAAD,QAAA,gBAClCtI,OAAA;UAAKuI,SAAS,EAAC,oBAAoB;UAAAD,QAAA,gBACjCtI,OAAA;YAAO4I,OAAO,EAAC,gBAAgB;YAAAN,QAAA,EAAC;UAAmB;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eAC3D3I,OAAA;YAAQ6I,EAAE,EAAC,gBAAgB;YAACC,KAAK,EAAEnI,cAAe;YAACoI,QAAQ,EAAEhG,CAAC,IAAInC,iBAAiB,CAACmC,CAAC,CAACC,MAAM,CAAC8F,KAAK,CAAE;YAAAR,QAAA,gBAClGtI,OAAA;cAAQ8I,KAAK,EAAC,EAAE;cAAAR,QAAA,EAAC;YAAG;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAC7B3I,OAAA;cAAQ8I,KAAK,EAAC,SAAS;cAAAR,QAAA,EAAC;YAAO;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACxC3I,OAAA;cAAQ8I,KAAK,EAAC,MAAM;cAAAR,QAAA,EAAC;YAAI;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAClC3I,OAAA;cAAQ8I,KAAK,EAAC,SAAS;cAAAR,QAAA,EAAC;YAAO;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACxC3I,OAAA;cAAQ8I,KAAK,EAAC,OAAO;cAAAR,QAAA,EAAC;YAAK;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACpC3I,OAAA;cAAQ8I,KAAK,EAAC,OAAO;cAAAR,QAAA,EAAC;YAAK;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC9B,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,eACN3I,OAAA;UAAKuI,SAAS,EAAC,mBAAmB;UAAAD,QAAA,GAC/B,CAAC,CAACnG,UAAU,IAAIA,UAAU,KAAK,QAAQ,kBACxCnC,OAAA;YAAKuI,SAAS,EAAC,kBAAkB;YAAAD,QAAA,gBAC/BtI,OAAA;cAAAsI,QAAA,EAAI;YAAc;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACvB3I,OAAA;cAAKuI,SAAS,EAAC,iBAAiB;cAAAD,QAAA,EAC7BjE,qBAAqB,CAACR,MAAM,KAAK,CAAC,gBAAG7D,OAAA;gBAAAsI,QAAA,EAAG;cAAkB;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC,GAAGtE,qBAAqB,CAAC2E,GAAG,CAAC/E,CAAC,iBAC3FjE,OAAA;gBAAKuI,SAAS,EAAC,aAAa;gBAAaM,EAAE,EAAE,UAAU5E,CAAC,CAACyC,GAAG,EAAG;gBAAA4B,QAAA,EAC5DrH,MAAM,KAAKgD,CAAC,CAACyC,GAAG,gBACf1G,OAAA;kBAAKuI,SAAS,EAAC,WAAW;kBAACM,EAAE,EAAE,aAAa5E,CAAC,CAACyC,GAAG,EAAG;kBAAA4B,QAAA,gBAClDtI,OAAA;oBACEiJ,IAAI,EAAC,MAAM;oBACXH,KAAK,EAAE3H,SAAU;oBACjB4H,QAAQ,EAAEhG,CAAC,IAAI3B,YAAY,CAAC2B,CAAC,CAACC,MAAM,CAAC8F,KAAK,CAAE;oBAC5CI,WAAW,EAAC,OAAO;oBACnBX,SAAS,EAAC;kBAAY;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACvB,CAAC,eACF3I,OAAA;oBACE8I,KAAK,EAAEzH,UAAW;oBAClB0H,QAAQ,EAAEhG,CAAC,IAAIzB,aAAa,CAACyB,CAAC,CAACC,MAAM,CAAC8F,KAAK,CAAE;oBAC7CI,WAAW,EAAC,QAAQ;oBACpBX,SAAS,EAAC,eAAe;oBACzBY,IAAI,EAAC;kBAAG;oBAAAX,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACT,CAAC,eACF3I,OAAA;oBACE8I,KAAK,EAAEvH,YAAa;oBACpBwH,QAAQ,EAAEhG,CAAC,IAAIvB,eAAe,CAACuB,CAAC,CAACC,MAAM,CAAC8F,KAAK,CAAE;oBAC/CP,SAAS,EAAC,aAAa;oBAAAD,QAAA,gBAEvBtI,OAAA;sBAAQ8I,KAAK,EAAC,SAAS;sBAAAR,QAAA,EAAC;oBAAO;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,eACxC3I,OAAA;sBAAQ8I,KAAK,EAAC,MAAM;sBAAAR,QAAA,EAAC;oBAAI;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,eAClC3I,OAAA;sBAAQ8I,KAAK,EAAC,SAAS;sBAAAR,QAAA,EAAC;oBAAO;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,eACxC3I,OAAA;sBAAQ8I,KAAK,EAAC,OAAO;sBAAAR,QAAA,EAAC;oBAAK;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,eACpC3I,OAAA;sBAAQ8I,KAAK,EAAC,OAAO;sBAAAR,QAAA,EAAC;oBAAK;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC9B,CAAC,EACRhH,iBAAiB,iBAChB3B,OAAA;oBAAKuI,SAAS,EAAC,oBAAoB;oBAAAD,QAAA,gBACjCtI,OAAA;sBAAAsI,QAAA,GAAG,WAAS,EAAC,CAAA7G,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAE4D,QAAQ,KAAI,YAAY;oBAAA;sBAAAmD,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAI,CAAC,eAC1D3I,OAAA;sBAAGgG,IAAI,EAAErE,iBAAkB;sBAACqB,MAAM,EAAC,QAAQ;sBAACoG,GAAG,EAAC,qBAAqB;sBAAAd,QAAA,EAAC;oBAAI;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAG,CAAC,eAC9E3I,OAAA;sBAAQiJ,IAAI,EAAC,QAAQ;sBAACV,SAAS,EAAC,YAAY;sBAACc,OAAO,EAAElC,sBAAuB;sBAAAmB,QAAA,EAAC;oBAAM;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC1F,CACN,eACD3I,OAAA;oBAAOuI,SAAS,EAAC,cAAc;oBAAAD,QAAA,EAAC;kBAAgC;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eACxE3I,OAAA,CAACH,mBAAmB;oBAClByJ,GAAG,EAAEzH,WAAY;oBACjB0H,MAAM,EAAC,sBAAsB;oBAC7BC,qBAAqB,EAAE,QAAS;oBAChCC,QAAQ,EAAE,KAAM;oBAChBC,UAAU,EAAC,6BAA6B;oBACxCC,iBAAiB,EAAC,UAAU;oBAC5BC,mBAAmB,EAAExC;kBAAoB;oBAAAoB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC1C,CAAC,eACF3I,OAAA;oBAAKuI,SAAS,EAAC,cAAc;oBAAAD,QAAA,gBAC3BtI,OAAA;sBAAQuI,SAAS,EAAC,UAAU;sBAACc,OAAO,EAAEzB,cAAe;sBAAAU,QAAA,EAAC;oBAAI;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,eACnE3I,OAAA;sBAAQuI,SAAS,EAAC,YAAY;sBAACc,OAAO,EAAEnC,gBAAiB;sBAAAoB,QAAA,EAAC;oBAAM;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACtE,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CAAC,gBAEN3I,OAAA,CAAAE,SAAA;kBAAAoI,QAAA,gBACEtI,OAAA;oBAAAsI,QAAA,EAAKrE,CAAC,CAAC0C;kBAAK;oBAAA6B,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC,eAClB3I,OAAA;oBAAAsI,QAAA,EAAIrE,CAAC,CAACwC;kBAAM;oBAAA+B,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC,EAChBnE,kBAAkB,CAACP,CAAC,CAACH,UAAU,CAAC,iBAC/B9D,OAAA;oBAAKuI,SAAS,EAAC,mBAAmB;oBAAAD,QAAA,eAChCtI,OAAA;sBACEqJ,OAAO,EAAEA,CAAA,KAAMjE,wBAAwB,CAACnB,CAAC,CAACH,UAAU,EAAEG,CAAC,CAACyC,GAAG,EAAEmD,WAAW,CAAC5F,CAAC,CAACH,UAAU,CAAC,CAAE;sBACxFgG,KAAK,EAAE;wBAAEC,OAAO,EAAE,MAAM;wBAAEC,UAAU,EAAE,QAAQ;wBAAEC,cAAc,EAAE,MAAM;wBAAEC,KAAK,EAAE,MAAM;wBAAEC,UAAU,EAAE,MAAM;wBAAEC,MAAM,EAAE,MAAM;wBAAEC,MAAM,EAAE,SAAS;wBAAEC,OAAO,EAAE;sBAAE,CAAE;sBAAAhC,QAAA,gBAE3JtI,OAAA;wBAAKuK,GAAG,EAAC,0DAA0D;wBAACC,GAAG,EAAC,KAAK;wBAACV,KAAK,EAAE;0BAAEW,KAAK,EAAE,EAAE;0BAAEC,MAAM,EAAE,EAAE;0BAAEC,WAAW,EAAE;wBAAE;sBAAE;wBAAAnC,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAE,CAAC,eAClI3I,OAAA;wBAAAsI,QAAA,EAAOuB,WAAW,CAAC5F,CAAC,CAACH,UAAU;sBAAC;wBAAA0E,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAO,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAClC;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACN,CACN,eACD3I,OAAA;oBAAMuI,SAAS,EAAC,iBAAiB;oBAAAD,QAAA,EAAErE,CAAC,CAACK;kBAAQ;oBAAAkE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eACrD3I,OAAA;oBAAMuI,SAAS,EAAC,aAAa;oBAAAD,QAAA,EAAE,IAAIP,IAAI,CAAC9D,CAAC,CAAC2G,WAAW,CAAC,CAACC,cAAc,CAAC;kBAAC;oBAAArC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eAC/E3I,OAAA;oBAAMuI,SAAS,EAAC,eAAe;oBAAAD,QAAA,GAAC,MAAI,EAACrE,CAAC,CAACC,SAAS;kBAAA;oBAAAsE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eACxD3I,OAAA;oBAAKuI,SAAS,EAAC,gBAAgB;oBAAAD,QAAA,gBAC7BtI,OAAA;sBACEuI,SAAS,EAAC,6BAA6B;sBACvCc,OAAO,EAAEA,CAAA,KAAMyB,mBAAmB,CAAC7G,CAAC,CAAC0C,KAAK,EAAE1C,CAAC,CAACwC,MAAM,EAAExC,CAAC,CAAC2G,WAAW,EAAE3G,CAAC,CAACC,SAAS,CAAE;sBAAAoE,QAAA,EACnF;oBAAsB;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,EAC9B,CAAAvI,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAE+D,WAAW,CAAC,CAAC,MAAK,OAAO,iBACnCnE,OAAA,CAAAE,SAAA;sBAAAoI,QAAA,gBACEtI,OAAA;wBACEuI,SAAS,EAAC,YAAY;wBACtBc,OAAO,EAAEA,CAAA,KAAM7C,kBAAkB,CAACvC,CAAC,CAAE;wBAAAqE,QAAA,EACtC;sBAAM;wBAAAE,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAQ,CAAC,eAChB3I,OAAA;wBACEuI,SAAS,EAAC,YAAY;wBACtBc,OAAO,EAAEA,CAAA,KAAMlB,kBAAkB,CAAClE,CAAC,CAACyC,GAAG,CAAE;wBAAA4B,QAAA,EAC1C;sBAAM;wBAAAE,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAQ,CAAC;oBAAA,eAChB,CACH;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACE,CAAC;gBAAA,eACN;cACH,GAvF+B1E,CAAC,CAACyC,GAAG;gBAAA8B,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAwFlC,CACN;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CACJ,EACA,CAAC,CAACxG,UAAU,IAAIA,UAAU,KAAK,OAAO,kBACvCnC,OAAA;YAAKuI,SAAS,EAAC,kBAAkB;YAAAD,QAAA,gBAC/BtI,OAAA;cAAAsI,QAAA,EAAI;YAAa;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACtB3I,OAAA;cAAKuI,SAAS,EAAC,iBAAiB;cAAAD,QAAA,EAC7B/D,oBAAoB,CAACV,MAAM,KAAK,CAAC,gBAAG7D,OAAA;gBAAAsI,QAAA,EAAG;cAAiB;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC,GAAGpE,oBAAoB,CAACyE,GAAG,CAAC/E,CAAC,iBACxFjE,OAAA;gBAAKuI,SAAS,EAAC,aAAa;gBAAaM,EAAE,EAAE,UAAU5E,CAAC,CAACyC,GAAG,EAAG;gBAAA4B,QAAA,EAC5DrH,MAAM,KAAKgD,CAAC,CAACyC,GAAG,gBACf1G,OAAA;kBAAKuI,SAAS,EAAC,WAAW;kBAACM,EAAE,EAAE,aAAa5E,CAAC,CAACyC,GAAG,EAAG;kBAAA4B,QAAA,gBAClDtI,OAAA;oBACEiJ,IAAI,EAAC,MAAM;oBACXH,KAAK,EAAE3H,SAAU;oBACjB4H,QAAQ,EAAEhG,CAAC,IAAI3B,YAAY,CAAC2B,CAAC,CAACC,MAAM,CAAC8F,KAAK,CAAE;oBAC5CI,WAAW,EAAC,OAAO;oBACnBX,SAAS,EAAC;kBAAY;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACvB,CAAC,eACF3I,OAAA;oBACE8I,KAAK,EAAEzH,UAAW;oBAClB0H,QAAQ,EAAEhG,CAAC,IAAIzB,aAAa,CAACyB,CAAC,CAACC,MAAM,CAAC8F,KAAK,CAAE;oBAC7CI,WAAW,EAAC,QAAQ;oBACpBX,SAAS,EAAC,eAAe;oBACzBY,IAAI,EAAC;kBAAG;oBAAAX,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACT,CAAC,eACF3I,OAAA;oBACE8I,KAAK,EAAEvH,YAAa;oBACpBwH,QAAQ,EAAEhG,CAAC,IAAIvB,eAAe,CAACuB,CAAC,CAACC,MAAM,CAAC8F,KAAK,CAAE;oBAC/CP,SAAS,EAAC,aAAa;oBAAAD,QAAA,gBAEvBtI,OAAA;sBAAQ8I,KAAK,EAAC,SAAS;sBAAAR,QAAA,EAAC;oBAAO;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,eACxC3I,OAAA;sBAAQ8I,KAAK,EAAC,MAAM;sBAAAR,QAAA,EAAC;oBAAI;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,eAClC3I,OAAA;sBAAQ8I,KAAK,EAAC,SAAS;sBAAAR,QAAA,EAAC;oBAAO;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,eACxC3I,OAAA;sBAAQ8I,KAAK,EAAC,OAAO;sBAAAR,QAAA,EAAC;oBAAK;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,eACpC3I,OAAA;sBAAQ8I,KAAK,EAAC,OAAO;sBAAAR,QAAA,EAAC;oBAAK;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC9B,CAAC,EACRhH,iBAAiB,iBAChB3B,OAAA;oBAAKuI,SAAS,EAAC,oBAAoB;oBAAAD,QAAA,gBACjCtI,OAAA;sBAAAsI,QAAA,GAAG,WAAS,EAAC,CAAA7G,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAE4D,QAAQ,KAAI,YAAY;oBAAA;sBAAAmD,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAI,CAAC,eAC1D3I,OAAA;sBAAGgG,IAAI,EAAErE,iBAAkB;sBAACqB,MAAM,EAAC,QAAQ;sBAACoG,GAAG,EAAC,qBAAqB;sBAAAd,QAAA,EAAC;oBAAI;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAG,CAAC,eAC9E3I,OAAA;sBAAQiJ,IAAI,EAAC,QAAQ;sBAACV,SAAS,EAAC,YAAY;sBAACc,OAAO,EAAElC,sBAAuB;sBAAAmB,QAAA,EAAC;oBAAM;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC1F,CACN,eACD3I,OAAA;oBAAOuI,SAAS,EAAC,cAAc;oBAAAD,QAAA,EAAC;kBAAgC;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eACxE3I,OAAA,CAACH,mBAAmB;oBAClByJ,GAAG,EAAEzH,WAAY;oBACjB0H,MAAM,EAAC,sBAAsB;oBAC7BC,qBAAqB,EAAE,QAAS;oBAChCC,QAAQ,EAAE,KAAM;oBAChBC,UAAU,EAAC,6BAA6B;oBACxCC,iBAAiB,EAAC,UAAU;oBAC5BC,mBAAmB,EAAExC;kBAAoB;oBAAAoB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC1C,CAAC,eACF3I,OAAA;oBAAKuI,SAAS,EAAC,cAAc;oBAAAD,QAAA,gBAC3BtI,OAAA;sBAAQuI,SAAS,EAAC,UAAU;sBAACc,OAAO,EAAEzB,cAAe;sBAAAU,QAAA,EAAC;oBAAI;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,eACnE3I,OAAA;sBAAQuI,SAAS,EAAC,YAAY;sBAACc,OAAO,EAAEnC,gBAAiB;sBAAAoB,QAAA,EAAC;oBAAM;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACtE,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CAAC,gBAEN3I,OAAA,CAAAE,SAAA;kBAAAoI,QAAA,gBACEtI,OAAA;oBAAAsI,QAAA,EAAKrE,CAAC,CAAC0C;kBAAK;oBAAA6B,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC,eAClB3I,OAAA;oBAAAsI,QAAA,EAAIrE,CAAC,CAACwC;kBAAM;oBAAA+B,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC,EAChBnE,kBAAkB,CAACP,CAAC,CAACH,UAAU,CAAC,iBAC/B9D,OAAA;oBAAKuI,SAAS,EAAC,mBAAmB;oBAAAD,QAAA,eAChCtI,OAAA;sBACEqJ,OAAO,EAAEA,CAAA,KAAMjE,wBAAwB,CAACnB,CAAC,CAACH,UAAU,EAAEG,CAAC,CAACyC,GAAG,EAAEmD,WAAW,CAAC5F,CAAC,CAACH,UAAU,CAAC,CAAE;sBACxFgG,KAAK,EAAE;wBAAEC,OAAO,EAAE,MAAM;wBAAEC,UAAU,EAAE,QAAQ;wBAAEC,cAAc,EAAE,MAAM;wBAAEC,KAAK,EAAE,MAAM;wBAAEC,UAAU,EAAE,MAAM;wBAAEC,MAAM,EAAE,MAAM;wBAAEC,MAAM,EAAE,SAAS;wBAAEC,OAAO,EAAE;sBAAE,CAAE;sBAAAhC,QAAA,gBAE3JtI,OAAA;wBAAKuK,GAAG,EAAC,0DAA0D;wBAACC,GAAG,EAAC,KAAK;wBAACV,KAAK,EAAE;0BAAEW,KAAK,EAAE,EAAE;0BAAEC,MAAM,EAAE,EAAE;0BAAEC,WAAW,EAAE;wBAAE;sBAAE;wBAAAnC,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAE,CAAC,eAClI3I,OAAA;wBAAAsI,QAAA,EAAOuB,WAAW,CAAC5F,CAAC,CAACH,UAAU;sBAAC;wBAAA0E,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAO,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAClC;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACN,CACN,eACD3I,OAAA;oBAAMuI,SAAS,EAAC,iBAAiB;oBAAAD,QAAA,EAAErE,CAAC,CAACK;kBAAQ;oBAAAkE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eACrD3I,OAAA;oBAAMuI,SAAS,EAAC,aAAa;oBAAAD,QAAA,EAAE,IAAIP,IAAI,CAAC9D,CAAC,CAAC2G,WAAW,CAAC,CAACC,cAAc,CAAC;kBAAC;oBAAArC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eAC/E3I,OAAA;oBAAMuI,SAAS,EAAC,eAAe;oBAAAD,QAAA,GAAC,MAAI,EAACrE,CAAC,CAACC,SAAS;kBAAA;oBAAAsE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eACxD3I,OAAA;oBAAKuI,SAAS,EAAC,gBAAgB;oBAAAD,QAAA,gBAC7BtI,OAAA;sBACEuI,SAAS,EAAC,6BAA6B;sBACvCc,OAAO,EAAEA,CAAA,KAAMyB,mBAAmB,CAAC7G,CAAC,CAAC0C,KAAK,EAAE1C,CAAC,CAACwC,MAAM,CAAE;sBAAA6B,QAAA,EACvD;oBAAsB;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,EAC/B,CAAC,CAAAvI,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAE+D,WAAW,CAAC,CAAC,MAAK,OAAO,IAAI,CAAA/D,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAE+D,WAAW,CAAC,CAAC,MAAK,SAAS,kBAC5EnE,OAAA,CAAAE,SAAA;sBAAAoI,QAAA,gBACEtI,OAAA;wBACEuI,SAAS,EAAC,YAAY;wBACtBc,OAAO,EAAEA,CAAA,KAAM7C,kBAAkB,CAACvC,CAAC,CAAE;wBAAAqE,QAAA,EACtC;sBAAM;wBAAAE,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAQ,CAAC,eAChB3I,OAAA;wBACEuI,SAAS,EAAC,YAAY;wBACtBc,OAAO,EAAEA,CAAA,KAAMlB,kBAAkB,CAAClE,CAAC,CAACyC,GAAG,CAAE;wBAAA4B,QAAA,EAC1C;sBAAM;wBAAAE,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAQ,CAAC;oBAAA,eAChB,CACH;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACE,CAAC;gBAAA,eACN;cACH,GAvF+B1E,CAAC,CAACyC,GAAG;gBAAA8B,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAwFlC,CACN;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CACJ;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,EACL5H,QAAQ,iBACPf,OAAA;MAAKuI,SAAS,EAAC,eAAe;MAAAD,QAAA,gBAC5BtI,OAAA;QAAKuI,SAAS,EAAC,YAAY;QAAAD,QAAA,gBACzBtI,OAAA;UAAAsI,QAAA,EAAI;QAAc;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACvB3I,OAAA;UAAAsI,QAAA,EAAG;QAA0E;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,eACjF3I,OAAA;UAAG8J,KAAK,EAAE;YAAEI,KAAK,EAAE,SAAS;YAAEa,UAAU,EAAE,GAAG;YAAEC,SAAS,EAAE;UAAE,CAAE;UAAA1C,QAAA,EAAC;QAE/D;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,eACJ3I,OAAA;UAAK8J,KAAK,EAAE;YAAEC,OAAO,EAAE,MAAM;YAAEkB,GAAG,EAAE,MAAM;YAAEC,cAAc,EAAE,QAAQ;YAAEF,SAAS,EAAE;UAAO,CAAE;UAAA1C,QAAA,gBACxFtI,OAAA;YAAQuI,SAAS,EAAC,aAAa;YAACc,OAAO,EAAEjB,aAAc;YAAAE,QAAA,EAAC;UAAM;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACvE3I,OAAA;YAAQuI,SAAS,EAAC,aAAa;YAACuB,KAAK,EAAE;cAAEK,UAAU,EAAE,MAAM;cAAED,KAAK,EAAE;YAAO,CAAE;YAACb,OAAO,EAAEA,CAAA,KAAMrI,WAAW,CAAC,IAAI,CAAE;YAAAsH,QAAA,EAAC;UAAM;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5H,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eACN3I,OAAA;QAAKuI,SAAS,EAAC,gBAAgB;QAACuB,KAAK,EAAE;UAAEqB,aAAa,EAAE;QAAO;MAAE;QAAA3C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACrE,CACN;EAAA,eACD,CAAC;AAEP,CAAC;;AAED;AAAAnI,EAAA,CA/fML,cAAc;EAAA,QAcDT,WAAW,EACXC,WAAW;AAAA;AAAAyL,EAAA,GAfxBjL,cAAc;AAggBpB,SAAS0J,WAAWA,CAAC/F,UAAU,EAAE;EAC/B,IAAI,CAACA,UAAU,EAAE,OAAO,EAAE;;EAE1B;EACA,IAAI,OAAOA,UAAU,KAAK,QAAQ,IAAIA,UAAU,CAACuB,QAAQ,EAAE;IACzD,OAAOvB,UAAU,CAACuB,QAAQ;EAC5B;;EAEA;EACA,MAAMgG,OAAO,GAAG,OAAOvH,UAAU,KAAK,QAAQ,GAAGA,UAAU,GAAGA,UAAU,CAACwH,IAAI,IAAI,EAAE;EACnF,IAAI,CAACD,OAAO,EAAE,OAAO,EAAE;EACvB,OAAOA,OAAO,CAACE,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC,CAAC,CAACD,KAAK,CAAC,IAAI,CAAC,CAACC,GAAG,CAAC,CAAC;AACnD;;AAEA;AACA,SAASV,mBAAmBA,CAACnE,KAAK,EAAEF,MAAM,EAAEmE,WAAW,EAAE1G,SAAS,EAAE;EAClE;EACA,MAAMuH,MAAM,GAAG3F,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;EAC/C0F,MAAM,CAAClB,GAAG,GAAG,qEAAqE;EAClFkB,MAAM,CAACC,MAAM,GAAG,MAAM;IACpB,MAAM;MAAEC;IAAM,CAAC,GAAGrI,MAAM,CAACsI,KAAK;IAC9B,MAAMC,GAAG,GAAG,IAAIF,KAAK,CAAC,CAAC;IAEvB,MAAMG,SAAS,GAAGD,GAAG,CAACE,QAAQ,CAACC,QAAQ,CAACC,QAAQ,CAAC,CAAC;IAClD,MAAMC,UAAU,GAAGL,GAAG,CAACE,QAAQ,CAACC,QAAQ,CAACG,SAAS,CAAC,CAAC;IACpD,MAAMC,MAAM,GAAG,EAAE;IACjB,MAAMC,QAAQ,GAAGP,SAAS,GAAIM,MAAM,GAAG,CAAE;IACzC,IAAIE,SAAS,GAAGF,MAAM;;IAEtB;IACA,MAAMG,cAAc,GAAGA,CAACC,IAAI,EAAEC,CAAC,EAAEC,CAAC,EAAEL,QAAQ,EAAEM,QAAQ,EAAEC,MAAM,GAAG,KAAK,KAAK;MACzEf,GAAG,CAACgB,WAAW,CAACF,QAAQ,CAAC;MACzB,MAAMG,KAAK,GAAGjB,GAAG,CAACkB,eAAe,CAACP,IAAI,EAAEH,QAAQ,CAAC;MACjDS,KAAK,CAACE,OAAO,CAAC,CAACC,IAAI,EAAEC,KAAK,KAAK;QAC7B,IAAIR,CAAC,GAAIQ,KAAK,GAAGP,QAAQ,GAAG,GAAI,GAAGT,UAAU,GAAGE,MAAM,EAAE;UACtDP,GAAG,CAACsB,OAAO,CAAC,CAAC;UACbT,CAAC,GAAGN,MAAM;QACZ;QACAP,GAAG,CAACW,IAAI,CAACS,IAAI,EAAER,CAAC,EAAEC,CAAC,GAAIQ,KAAK,GAAGP,QAAQ,GAAG,GAAI,CAAC;MACjD,CAAC,CAAC;MACF,OAAOD,CAAC,GAAII,KAAK,CAACjJ,MAAM,GAAG8I,QAAQ,GAAG,GAAI;IAC5C,CAAC;;IAED;IACAd,GAAG,CAACgB,WAAW,CAAC,EAAE,CAAC;IACnBhB,GAAG,CAACuB,OAAO,CAACC,SAAS,EAAE,MAAM,CAAC;IAC9BxB,GAAG,CAACyB,YAAY,CAAC,EAAE,EAAE,GAAG,EAAE,GAAG,CAAC;IAC9BzB,GAAG,CAACW,IAAI,CAAC,8BAA8B,EAAEV,SAAS,GAAG,CAAC,EAAEQ,SAAS,EAAE;MAAEiB,KAAK,EAAE;IAAS,CAAC,CAAC;IACvFjB,SAAS,IAAI,EAAE;;IAEf;IACAT,GAAG,CAAC2B,YAAY,CAAC,EAAE,EAAE,GAAG,EAAE,GAAG,CAAC;IAC9B3B,GAAG,CAAC4B,YAAY,CAAC,GAAG,CAAC;IACrB5B,GAAG,CAACoB,IAAI,CAACb,MAAM,EAAEE,SAAS,EAAER,SAAS,GAAGM,MAAM,EAAEE,SAAS,CAAC;IAC1DA,SAAS,IAAI,EAAE;;IAEf;IACAT,GAAG,CAACgB,WAAW,CAAC,EAAE,CAAC;IACnBhB,GAAG,CAACuB,OAAO,CAACC,SAAS,EAAE,QAAQ,CAAC;IAChCxB,GAAG,CAACyB,YAAY,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;IAC/B,MAAMI,OAAO,GAAG9C,WAAW,GAAG,IAAI7C,IAAI,CAAC6C,WAAW,CAAC,CAAC+C,kBAAkB,CAAC,OAAO,EAAE;MAC9EC,IAAI,EAAE,SAAS;MACfC,KAAK,EAAE,MAAM;MACbC,GAAG,EAAE,SAAS;MACdC,IAAI,EAAE,SAAS;MACfC,MAAM,EAAE;IACV,CAAC,CAAC,GAAG,EAAE;IACPnC,GAAG,CAACW,IAAI,CAAC,iBAAiBtI,SAAS,IAAI,SAAS,EAAE,EAAEkI,MAAM,EAAEE,SAAS,CAAC;IACtEA,SAAS,IAAI,CAAC;IACdT,GAAG,CAACW,IAAI,CAAC,SAASkB,OAAO,EAAE,EAAEtB,MAAM,EAAEE,SAAS,CAAC;IAC/CA,SAAS,IAAI,EAAE;;IAEf;IACAT,GAAG,CAACgB,WAAW,CAAC,EAAE,CAAC;IACnBhB,GAAG,CAACuB,OAAO,CAACC,SAAS,EAAE,MAAM,CAAC;IAC9BxB,GAAG,CAACyB,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IACzBhB,SAAS,GAAGC,cAAc,CAAC5F,KAAK,EAAEyF,MAAM,EAAEE,SAAS,EAAED,QAAQ,EAAE,EAAE,CAAC;IAClEC,SAAS,IAAI,EAAE;;IAEf;IACAT,GAAG,CAAC2B,YAAY,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;IAC/B3B,GAAG,CAAC4B,YAAY,CAAC,GAAG,CAAC;IACrB5B,GAAG,CAACoB,IAAI,CAACb,MAAM,EAAEE,SAAS,EAAER,SAAS,GAAGM,MAAM,EAAEE,SAAS,CAAC;IAC1DA,SAAS,IAAI,EAAE;;IAEf;IACAT,GAAG,CAACgB,WAAW,CAAC,EAAE,CAAC;IACnBhB,GAAG,CAACuB,OAAO,CAACC,SAAS,EAAE,QAAQ,CAAC;IAChCxB,GAAG,CAACyB,YAAY,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;;IAE5B;IACA,MAAMW,UAAU,GAAGxH,MAAM,CAAC8E,KAAK,CAAC,SAAS,CAAC,CAACvH,MAAM,CAACkK,CAAC,IAAIA,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC;IAEhEF,UAAU,CAACjB,OAAO,CAAC,CAACoB,SAAS,EAAElB,KAAK,KAAK;MACvC,IAAIZ,SAAS,GAAGJ,UAAU,GAAGE,MAAM,GAAG,EAAE,EAAE;QACxCP,GAAG,CAACsB,OAAO,CAAC,CAAC;QACbb,SAAS,GAAGF,MAAM;MACpB;MAEAE,SAAS,GAAGC,cAAc,CAAC6B,SAAS,CAACD,IAAI,CAAC,CAAC,EAAE/B,MAAM,EAAEE,SAAS,EAAED,QAAQ,EAAE,EAAE,CAAC;MAC7EC,SAAS,IAAI,CAAC,CAAC,CAAC;IAClB,CAAC,CAAC;;IAEF;IACA,MAAM+B,OAAO,GAAGnC,UAAU,GAAG,EAAE;IAC/BL,GAAG,CAACgB,WAAW,CAAC,CAAC,CAAC;IAClBhB,GAAG,CAACyB,YAAY,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;IAC/BzB,GAAG,CAACW,IAAI,CAAC,mCAAmC,EAAEV,SAAS,GAAG,CAAC,EAAEuC,OAAO,EAAE;MAAEd,KAAK,EAAE;IAAS,CAAC,CAAC;IAC1F1B,GAAG,CAACW,IAAI,CAAC,QAAQX,GAAG,CAACE,QAAQ,CAACuC,gBAAgB,CAAC,CAAC,EAAE,EAAExC,SAAS,GAAGM,MAAM,EAAEiC,OAAO,EAAE;MAAEd,KAAK,EAAE;IAAQ,CAAC,CAAC;;IAEpG;IACA,MAAMgB,UAAU,GAAG5H,KAAK,CAAC6H,OAAO,CAAC,aAAa,EAAE,GAAG,CAAC,CAACC,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC;IACrE5C,GAAG,CAAC6C,IAAI,CAAC,GAAGH,UAAU,aAAa,CAAC;EACtC,CAAC;EACDzI,QAAQ,CAACI,IAAI,CAACC,WAAW,CAACsF,MAAM,CAAC;AACnC;AAEA,eAAetL,cAAc;AAAC,IAAAiL,EAAA;AAAAuD,YAAA,CAAAvD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}