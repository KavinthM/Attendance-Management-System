{"ast":null,"code":"// @ts-check\nimport { browserInfo } from './browser-info.js';\nimport { stringToArray } from './stringToArray.js';\nexport const BASIC_IMAGE_WILDCARD = 'image/*';\nexport const BASIC_VIDEO_WILDCARD = 'video/*';\nexport const HEIC_IMAGE_MIME_LIST = ['image/heif', 'image/heif-sequence', 'image/heic', 'image/heic-sequence', 'image/avif', 'image/avif-sequence', '.heif', '.heifs', '.heic', '.heics', '.avif', '.avifs'];\nexport const calcImageAcceptList = () => {\n  // Desktop Safari allows selecting HEIC images with simple image/* wildcard\n  // But if we provide a more specific HEIC types - safari starts to convert any images to HEIC\n  if (browserInfo.safariDesktop) {\n    return [BASIC_IMAGE_WILDCARD];\n  }\n  // Other browsers allows to select HEIC images with more specific HEIC types only\n  // Mobile Safari will allow to select HEIC images even with simple image/* wildcard and it will convert them to JPEG by default (behaviour could be changed in file picker UI)\n  // Hope it will be fixed in the future so we'll add specific types so that Mobile Safari will know that we're supporting HEIC images\n  return [BASIC_IMAGE_WILDCARD, ...HEIC_IMAGE_MIME_LIST];\n};\nexport const IMAGE_ACCEPT_LIST = calcImageAcceptList();\n\n/**\n * @param {string[]} [fileTypes]\n * @returns {string[]}\n */\nexport const mergeFileTypes = fileTypes => {\n  if (!fileTypes) {\n    return [];\n  }\n  return fileTypes.filter(item => typeof item === 'string').map(str => stringToArray(str)).flat();\n};\n\n/**\n * @param {String} mimeType\n * @param {String[]} allowedFileTypes\n * @returns {Boolean}\n */\nexport const matchMimeType = (mimeType, allowedFileTypes) => {\n  return allowedFileTypes.some(type => {\n    if (type.endsWith('*')) {\n      type = type.replace('*', '');\n      return mimeType.startsWith(type);\n    }\n    return mimeType === type;\n  });\n};\n\n/**\n * @param {String} fileName\n * @param {String[]} allowedFileTypes\n * @returns {Boolean}\n */\nexport const matchExtension = (fileName, allowedFileTypes) => {\n  return allowedFileTypes.some(type => {\n    if (!type.startsWith('.')) {\n      return false;\n    }\n    return fileName.toLowerCase().endsWith(type.toLowerCase());\n  });\n};\n\n/**\n * @param {File | Blob} file\n * @returns {Boolean}\n */\nexport const fileIsImage = file => {\n  let type = file?.type;\n  if (!type) {\n    return false;\n  }\n  return matchMimeType(type, IMAGE_ACCEPT_LIST);\n};\n\n/**\n * Checks if the given data is a Blob.\n *\n * @param {unknown} data - The data to check.\n * @returns {boolean} - True if the data is a Blob, false otherwise.\n */\nexport const isBlob = data => {\n  return typeof Blob !== 'undefined' && data instanceof Blob;\n};\n\n/**\n * Checks if the given data is a File.\n *\n * @param {unknown} data - The data to check.\n * @returns {boolean} - True if the data is a File, false otherwise.\n */\nexport const isFile = data => {\n  return typeof File !== 'undefined' && data instanceof File;\n};","map":{"version":3,"names":["browserInfo","stringToArray","BASIC_IMAGE_WILDCARD","BASIC_VIDEO_WILDCARD","HEIC_IMAGE_MIME_LIST","calcImageAcceptList","safariDesktop","IMAGE_ACCEPT_LIST","mergeFileTypes","fileTypes","filter","item","map","str","flat","matchMimeType","mimeType","allowedFileTypes","some","type","endsWith","replace","startsWith","matchExtension","fileName","toLowerCase","fileIsImage","file","isBlob","data","Blob","isFile","File"],"sources":["/Users/kavinth/Documents/GitHub/Smart-Alert/Smart-Alert-new/frontend/node_modules/@uploadcare/file-uploader/utils/fileTypes.js"],"sourcesContent":["// @ts-check\nimport { browserInfo } from './browser-info.js';\nimport { stringToArray } from './stringToArray.js';\n\nexport const BASIC_IMAGE_WILDCARD = 'image/*';\nexport const BASIC_VIDEO_WILDCARD = 'video/*';\nexport const HEIC_IMAGE_MIME_LIST = [\n  'image/heif',\n  'image/heif-sequence',\n  'image/heic',\n  'image/heic-sequence',\n  'image/avif',\n  'image/avif-sequence',\n  '.heif',\n  '.heifs',\n  '.heic',\n  '.heics',\n  '.avif',\n  '.avifs',\n];\n\nexport const calcImageAcceptList = () => {\n  // Desktop Safari allows selecting HEIC images with simple image/* wildcard\n  // But if we provide a more specific HEIC types - safari starts to convert any images to HEIC\n  if (browserInfo.safariDesktop) {\n    return [BASIC_IMAGE_WILDCARD];\n  }\n  // Other browsers allows to select HEIC images with more specific HEIC types only\n  // Mobile Safari will allow to select HEIC images even with simple image/* wildcard and it will convert them to JPEG by default (behaviour could be changed in file picker UI)\n  // Hope it will be fixed in the future so we'll add specific types so that Mobile Safari will know that we're supporting HEIC images\n  return [BASIC_IMAGE_WILDCARD, ...HEIC_IMAGE_MIME_LIST];\n};\n\nexport const IMAGE_ACCEPT_LIST = calcImageAcceptList();\n\n/**\n * @param {string[]} [fileTypes]\n * @returns {string[]}\n */\nexport const mergeFileTypes = (fileTypes) => {\n  if (!fileTypes) {\n    return [];\n  }\n  return fileTypes\n    .filter((item) => typeof item === 'string')\n    .map((str) => stringToArray(str))\n    .flat();\n};\n\n/**\n * @param {String} mimeType\n * @param {String[]} allowedFileTypes\n * @returns {Boolean}\n */\nexport const matchMimeType = (mimeType, allowedFileTypes) => {\n  return allowedFileTypes.some((type) => {\n    if (type.endsWith('*')) {\n      type = type.replace('*', '');\n      return mimeType.startsWith(type);\n    }\n\n    return mimeType === type;\n  });\n};\n\n/**\n * @param {String} fileName\n * @param {String[]} allowedFileTypes\n * @returns {Boolean}\n */\nexport const matchExtension = (fileName, allowedFileTypes) => {\n  return allowedFileTypes.some((type) => {\n    if (!type.startsWith('.')) {\n      return false;\n    }\n\n    return fileName.toLowerCase().endsWith(type.toLowerCase());\n  });\n};\n\n/**\n * @param {File | Blob} file\n * @returns {Boolean}\n */\nexport const fileIsImage = (file) => {\n  let type = file?.type;\n  if (!type) {\n    return false;\n  }\n  return matchMimeType(type, IMAGE_ACCEPT_LIST);\n};\n\n/**\n * Checks if the given data is a Blob.\n *\n * @param {unknown} data - The data to check.\n * @returns {boolean} - True if the data is a Blob, false otherwise.\n */\nexport const isBlob = (data) => {\n  return typeof Blob !== 'undefined' && data instanceof Blob;\n};\n\n/**\n * Checks if the given data is a File.\n *\n * @param {unknown} data - The data to check.\n * @returns {boolean} - True if the data is a File, false otherwise.\n */\nexport const isFile = (data) => {\n  return typeof File !== 'undefined' && data instanceof File;\n};\n"],"mappings":"AAAA;AACA,SAASA,WAAW,QAAQ,mBAAmB;AAC/C,SAASC,aAAa,QAAQ,oBAAoB;AAElD,OAAO,MAAMC,oBAAoB,GAAG,SAAS;AAC7C,OAAO,MAAMC,oBAAoB,GAAG,SAAS;AAC7C,OAAO,MAAMC,oBAAoB,GAAG,CAClC,YAAY,EACZ,qBAAqB,EACrB,YAAY,EACZ,qBAAqB,EACrB,YAAY,EACZ,qBAAqB,EACrB,OAAO,EACP,QAAQ,EACR,OAAO,EACP,QAAQ,EACR,OAAO,EACP,QAAQ,CACT;AAED,OAAO,MAAMC,mBAAmB,GAAGA,CAAA,KAAM;EACvC;EACA;EACA,IAAIL,WAAW,CAACM,aAAa,EAAE;IAC7B,OAAO,CAACJ,oBAAoB,CAAC;EAC/B;EACA;EACA;EACA;EACA,OAAO,CAACA,oBAAoB,EAAE,GAAGE,oBAAoB,CAAC;AACxD,CAAC;AAED,OAAO,MAAMG,iBAAiB,GAAGF,mBAAmB,CAAC,CAAC;;AAEtD;AACA;AACA;AACA;AACA,OAAO,MAAMG,cAAc,GAAIC,SAAS,IAAK;EAC3C,IAAI,CAACA,SAAS,EAAE;IACd,OAAO,EAAE;EACX;EACA,OAAOA,SAAS,CACbC,MAAM,CAAEC,IAAI,IAAK,OAAOA,IAAI,KAAK,QAAQ,CAAC,CAC1CC,GAAG,CAAEC,GAAG,IAAKZ,aAAa,CAACY,GAAG,CAAC,CAAC,CAChCC,IAAI,CAAC,CAAC;AACX,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,aAAa,GAAGA,CAACC,QAAQ,EAAEC,gBAAgB,KAAK;EAC3D,OAAOA,gBAAgB,CAACC,IAAI,CAAEC,IAAI,IAAK;IACrC,IAAIA,IAAI,CAACC,QAAQ,CAAC,GAAG,CAAC,EAAE;MACtBD,IAAI,GAAGA,IAAI,CAACE,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC;MAC5B,OAAOL,QAAQ,CAACM,UAAU,CAACH,IAAI,CAAC;IAClC;IAEA,OAAOH,QAAQ,KAAKG,IAAI;EAC1B,CAAC,CAAC;AACJ,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMI,cAAc,GAAGA,CAACC,QAAQ,EAAEP,gBAAgB,KAAK;EAC5D,OAAOA,gBAAgB,CAACC,IAAI,CAAEC,IAAI,IAAK;IACrC,IAAI,CAACA,IAAI,CAACG,UAAU,CAAC,GAAG,CAAC,EAAE;MACzB,OAAO,KAAK;IACd;IAEA,OAAOE,QAAQ,CAACC,WAAW,CAAC,CAAC,CAACL,QAAQ,CAACD,IAAI,CAACM,WAAW,CAAC,CAAC,CAAC;EAC5D,CAAC,CAAC;AACJ,CAAC;;AAED;AACA;AACA;AACA;AACA,OAAO,MAAMC,WAAW,GAAIC,IAAI,IAAK;EACnC,IAAIR,IAAI,GAAGQ,IAAI,EAAER,IAAI;EACrB,IAAI,CAACA,IAAI,EAAE;IACT,OAAO,KAAK;EACd;EACA,OAAOJ,aAAa,CAACI,IAAI,EAAEZ,iBAAiB,CAAC;AAC/C,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMqB,MAAM,GAAIC,IAAI,IAAK;EAC9B,OAAO,OAAOC,IAAI,KAAK,WAAW,IAAID,IAAI,YAAYC,IAAI;AAC5D,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,MAAM,GAAIF,IAAI,IAAK;EAC9B,OAAO,OAAOG,IAAI,KAAK,WAAW,IAAIH,IAAI,YAAYG,IAAI;AAC5D,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}