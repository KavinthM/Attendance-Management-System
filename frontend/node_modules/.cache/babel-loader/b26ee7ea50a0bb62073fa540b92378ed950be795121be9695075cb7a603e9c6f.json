{"ast":null,"code":"// @ts-check\n\nimport { create } from '@symbiotejs/symbiote';\nimport { ActivityBlock } from '../../abstract/ActivityBlock.js';\nimport { UploaderBlock } from '../../abstract/UploaderBlock.js';\nimport { stringToArray } from '../../utils/stringToArray.js';\nimport { wildcardRegexp } from '../../utils/wildcardRegexp.js';\nimport { buildThemeDefinition } from './buildThemeDefinition.js';\nimport { MessageBridge } from './MessageBridge.js';\nimport { queryString } from './query-string.js';\nimport { getTopLevelOrigin } from '../../utils/get-top-level-origin.js';\nimport { ExternalUploadSource } from '../utils/UploadSource.js';\n\n/** @type {Record<string, string>} */\nconst SOCIAL_SOURCE_MAPPING = {\n  [ExternalUploadSource.GDRIVE]: 'ngdrive'\n};\n\n/** @typedef {{ externalSourceType: string }} ActivityParams */\n\nexport class ExternalSource extends UploaderBlock {\n  couldBeCtxOwner = true;\n  activityType = ActivityBlock.activities.EXTERNAL;\n  constructor() {\n    super();\n    this.init$ = {\n      ...this.init$,\n      activityIcon: '',\n      activityCaption: '',\n      /** @type {import('./types.js').InputMessageMap['selected-files-change']['selectedFiles']} */\n      selectedList: [],\n      total: 0,\n      isSelectionReady: false,\n      isDoneBtnEnabled: false,\n      couldSelectAll: false,\n      couldDeselectAll: false,\n      showSelectionStatus: false,\n      counterText: '',\n      doneBtnTextClass: 'uc-hidden',\n      toolbarVisible: true,\n      onDone: () => {\n        for (const message of this.$.selectedList) {\n          const url = this.extractUrlFromSelectedFile(message);\n          const {\n            filename\n          } = message;\n          const {\n            externalSourceType\n          } = this.activityParams;\n          this.api.addFileFromUrl(url, {\n            fileName: filename,\n            source: externalSourceType\n          });\n        }\n        this.$['*currentActivity'] = ActivityBlock.activities.UPLOAD_LIST;\n        this.modalManager.open(ActivityBlock.activities.UPLOAD_LIST);\n      },\n      onCancel: () => {\n        this.historyBack();\n      },\n      onSelectAll: () => {\n        this._messageBridge?.send({\n          type: 'select-all'\n        });\n      },\n      onDeselectAll: () => {\n        this._messageBridge?.send({\n          type: 'deselect-all'\n        });\n      }\n    };\n  }\n\n  /** @type {ActivityParams} */\n  get activityParams() {\n    const params = super.activityParams;\n    if ('externalSourceType' in params) {\n      return params;\n    }\n    throw new Error(`External Source activity params not found`);\n  }\n  initCallback() {\n    super.initCallback();\n    this.registerActivity(this.activityType, {\n      onActivate: () => {\n        let {\n          externalSourceType\n        } = /** @type {ActivityParams} */this.activityParams;\n        if (!externalSourceType) {\n          this.modalManager.close(this.$['*currentActivity']);\n          this.$['*currentActivity'] = null;\n          console.error(`Param \"externalSourceType\" is required for activity \"${this.activityType}\"`);\n          return;\n        }\n        this.set$({\n          activityCaption: `${externalSourceType?.[0].toUpperCase()}${externalSourceType?.slice(1)}`,\n          activityIcon: externalSourceType\n        });\n        this.mountIframe();\n      }\n    });\n    this.sub('*currentActivityParams', val => {\n      if (!this.isActivityActive) {\n        return;\n      }\n      this.unmountIframe();\n      this.mountIframe();\n    });\n    this.sub('*currentActivity', val => {\n      if (val !== this.activityType) {\n        this.unmountIframe();\n      }\n    });\n    this.subConfigValue('multiple', multiple => {\n      this.$.showSelectionStatus = multiple;\n    });\n    this.subConfigValue('localeName', val => {\n      this.setupL10n();\n    });\n    this.subConfigValue('externalSourcesEmbedCss', embedCss => {\n      this.applyEmbedCss(embedCss);\n    });\n  }\n\n  /**\n   * @private\n   * @param {NonNullable<import('./types.js').InputMessageMap['selected-files-change']['selectedFiles']>[number]} selectedFile\n   */\n  extractUrlFromSelectedFile(selectedFile) {\n    if (selectedFile.alternatives) {\n      const preferredTypes = stringToArray(this.cfg.externalSourcesPreferredTypes);\n      for (const preferredType of preferredTypes) {\n        const regexp = wildcardRegexp(preferredType);\n        for (const [type, typeUrl] of Object.entries(selectedFile.alternatives)) {\n          if (regexp.test(type)) {\n            return typeUrl;\n          }\n        }\n      }\n    }\n    return selectedFile.url;\n  }\n\n  /**\n   * @private\n   * @param {import('./types.js').InputMessageMap['toolbar-state-change']} message\n   */\n  handleToolbarStateChange(message) {\n    this.set$({\n      toolbarVisible: message.isVisible\n    });\n  }\n\n  /**\n   * @private\n   * @param {import('./types.js').InputMessageMap['selected-files-change']} message\n   */\n  async handleSelectedFilesChange(message) {\n    if (this.cfg.multiple !== message.isMultipleMode) {\n      console.error('Multiple mode mismatch');\n      return;\n    }\n    this.bindL10n('counterText', () => this.l10n('selected-count', {\n      count: message.selectedCount,\n      total: message.total\n    }));\n    this.set$({\n      doneBtnTextClass: message.isReady ? '' : 'uc-hidden',\n      isSelectionReady: message.isReady,\n      isDoneBtnEnabled: message.isReady && message.selectedFiles.length > 0,\n      showSelectionStatus: message.isMultipleMode && message.total > 0,\n      couldSelectAll: message.selectedCount < message.total,\n      couldDeselectAll: message.selectedCount === message.total,\n      selectedList: message.selectedFiles\n    });\n  }\n\n  /** @private */\n  handleIframeLoad() {\n    this.applyEmbedCss(this.cfg.externalSourcesEmbedCss);\n    this.applyTheme();\n    this.setupL10n();\n  }\n\n  /** @private */\n  applyTheme() {\n    this._messageBridge?.send({\n      type: 'set-theme-definition',\n      theme: buildThemeDefinition(this)\n    });\n  }\n\n  /**\n   * @private\n   * @param {string} css\n   */\n  applyEmbedCss(css) {\n    this._messageBridge?.send({\n      type: 'set-embed-css',\n      css\n    });\n  }\n\n  /** @private */\n  setupL10n() {\n    this._messageBridge?.send({\n      type: 'set-locale-definition',\n      localeDefinition: this.cfg.localeName\n    });\n  }\n\n  /** @private */\n  remoteUrl() {\n    const {\n      pubkey,\n      remoteTabSessionKey,\n      socialBaseUrl,\n      multiple\n    } = this.cfg;\n    const {\n      externalSourceType\n    } = this.activityParams;\n    const sourceName = SOCIAL_SOURCE_MAPPING[externalSourceType] ?? externalSourceType;\n    const lang = this.l10n('social-source-lang')?.split('-')?.[0] || 'en';\n    const params = {\n      lang,\n      public_key: pubkey,\n      images_only: false.toString(),\n      session_key: remoteTabSessionKey,\n      wait_for_theme: true,\n      multiple: multiple.toString(),\n      origin: this.cfg.topLevelOrigin || getTopLevelOrigin(),\n      debug: this.cfg.debug\n    };\n    const url = new URL(`/window4/${sourceName}`, socialBaseUrl);\n    url.search = queryString(params);\n    return url.toString();\n  }\n\n  /** @private */\n  mountIframe() {\n    /** @type {HTMLIFrameElement} */\n    // @ts-ignore\n    let iframe = create({\n      tag: 'iframe',\n      attributes: {\n        src: this.remoteUrl(),\n        marginheight: 0,\n        marginwidth: 0,\n        frameborder: 0,\n        allowTransparency: true\n      }\n    });\n    iframe.addEventListener('load', this.handleIframeLoad.bind(this));\n    this.ref.iframeWrapper.innerHTML = '';\n    this.ref.iframeWrapper.appendChild(iframe);\n    if (!iframe.contentWindow) {\n      return;\n    }\n    this._messageBridge?.destroy();\n\n    /** @private */\n    this._messageBridge = new MessageBridge(iframe.contentWindow);\n    this._messageBridge.on('selected-files-change', this.handleSelectedFilesChange.bind(this));\n    this._messageBridge.on('toolbar-state-change', this.handleToolbarStateChange.bind(this));\n    this.resetSelectionStatus();\n  }\n\n  /** @private */\n  unmountIframe() {\n    this._messageBridge?.destroy();\n    this._messageBridge = undefined;\n    this.ref.iframeWrapper.innerHTML = '';\n    this.resetSelectionStatus();\n  }\n\n  /** @private */\n  resetSelectionStatus() {\n    this.set$({\n      selectedList: [],\n      total: 0,\n      isDoneBtnEnabled: false,\n      couldSelectAll: false,\n      couldDeselectAll: false,\n      showSelectionStatus: false\n    });\n  }\n}\nExternalSource.template = /* HTML */`\n  <uc-activity-header>\n    <button\n      type=\"button\"\n      class=\"uc-mini-btn uc-close-btn\"\n      set=\"onclick: *historyBack\"\n      l10n=\"@title:a11y-activity-header-button-close;@aria-label:a11y-activity-header-button-close\"\n    >\n      <uc-icon name=\"close\"></uc-icon>\n    </button>\n  </uc-activity-header>\n  <div class=\"uc-content\">\n    <div ref=\"iframeWrapper\" class=\"uc-iframe-wrapper\"></div>\n    <div class=\"uc-toolbar\" set=\"@hidden: !toolbarVisible\">\n      <button type=\"button\" class=\"uc-cancel-btn uc-secondary-btn\" set=\"onclick: onCancel\" l10n=\"cancel\"></button>\n      <div set=\"@hidden: !showSelectionStatus\" class=\"uc-selection-status-box\">\n        <span>{{counterText}}</span>\n        <button type=\"button\" set=\"onclick: onSelectAll; @hidden: !couldSelectAll\" l10n=\"select-all\"></button>\n        <button type=\"button\" set=\"onclick: onDeselectAll; @hidden: !couldDeselectAll\" l10n=\"deselect-all\"></button>\n      </div>\n      <button type=\"button\" class=\"uc-done-btn uc-primary-btn\" set=\"onclick: onDone; @disabled: !isDoneBtnEnabled;\">\n        <uc-spinner set=\"@hidden: isSelectionReady\"></uc-spinner>\n        <span l10n=\"done\" set=\"@class: doneBtnTextClass\"></span>\n      </button>\n    </div>\n  </div>\n`;","map":{"version":3,"names":["create","ActivityBlock","UploaderBlock","stringToArray","wildcardRegexp","buildThemeDefinition","MessageBridge","queryString","getTopLevelOrigin","ExternalUploadSource","SOCIAL_SOURCE_MAPPING","GDRIVE","ExternalSource","couldBeCtxOwner","activityType","activities","EXTERNAL","constructor","init$","activityIcon","activityCaption","selectedList","total","isSelectionReady","isDoneBtnEnabled","couldSelectAll","couldDeselectAll","showSelectionStatus","counterText","doneBtnTextClass","toolbarVisible","onDone","message","$","url","extractUrlFromSelectedFile","filename","externalSourceType","activityParams","api","addFileFromUrl","fileName","source","UPLOAD_LIST","modalManager","open","onCancel","historyBack","onSelectAll","_messageBridge","send","type","onDeselectAll","params","Error","initCallback","registerActivity","onActivate","close","console","error","set$","toUpperCase","slice","mountIframe","sub","val","isActivityActive","unmountIframe","subConfigValue","multiple","setupL10n","embedCss","applyEmbedCss","selectedFile","alternatives","preferredTypes","cfg","externalSourcesPreferredTypes","preferredType","regexp","typeUrl","Object","entries","test","handleToolbarStateChange","isVisible","handleSelectedFilesChange","isMultipleMode","bindL10n","l10n","count","selectedCount","isReady","selectedFiles","length","handleIframeLoad","externalSourcesEmbedCss","applyTheme","theme","css","localeDefinition","localeName","remoteUrl","pubkey","remoteTabSessionKey","socialBaseUrl","sourceName","lang","split","public_key","images_only","toString","session_key","wait_for_theme","origin","topLevelOrigin","debug","URL","search","iframe","tag","attributes","src","marginheight","marginwidth","frameborder","allowTransparency","addEventListener","bind","ref","iframeWrapper","innerHTML","appendChild","contentWindow","destroy","on","resetSelectionStatus","undefined","template"],"sources":["/Users/kavinth/Documents/GitHub/Smart-Alert/Smart-Alert-new/frontend/node_modules/@uploadcare/file-uploader/blocks/ExternalSource/ExternalSource.js"],"sourcesContent":["// @ts-check\n\nimport { create } from '@symbiotejs/symbiote';\nimport { ActivityBlock } from '../../abstract/ActivityBlock.js';\nimport { UploaderBlock } from '../../abstract/UploaderBlock.js';\nimport { stringToArray } from '../../utils/stringToArray.js';\nimport { wildcardRegexp } from '../../utils/wildcardRegexp.js';\nimport { buildThemeDefinition } from './buildThemeDefinition.js';\nimport { MessageBridge } from './MessageBridge.js';\nimport { queryString } from './query-string.js';\nimport { getTopLevelOrigin } from '../../utils/get-top-level-origin.js';\nimport { ExternalUploadSource } from '../utils/UploadSource.js';\n\n/** @type {Record<string, string>} */\nconst SOCIAL_SOURCE_MAPPING = {\n  [ExternalUploadSource.GDRIVE]: 'ngdrive',\n};\n\n/** @typedef {{ externalSourceType: string }} ActivityParams */\n\nexport class ExternalSource extends UploaderBlock {\n  couldBeCtxOwner = true;\n  activityType = ActivityBlock.activities.EXTERNAL;\n\n  constructor() {\n    super();\n\n    this.init$ = {\n      ...this.init$,\n      activityIcon: '',\n      activityCaption: '',\n\n      /** @type {import('./types.js').InputMessageMap['selected-files-change']['selectedFiles']} */\n      selectedList: [],\n      total: 0,\n\n      isSelectionReady: false,\n      isDoneBtnEnabled: false,\n      couldSelectAll: false,\n      couldDeselectAll: false,\n      showSelectionStatus: false,\n      counterText: '',\n      doneBtnTextClass: 'uc-hidden',\n      toolbarVisible: true,\n\n      onDone: () => {\n        for (const message of this.$.selectedList) {\n          const url = this.extractUrlFromSelectedFile(message);\n          const { filename } = message;\n          const { externalSourceType } = this.activityParams;\n          this.api.addFileFromUrl(url, { fileName: filename, source: externalSourceType });\n        }\n\n        this.$['*currentActivity'] = ActivityBlock.activities.UPLOAD_LIST;\n        this.modalManager.open(ActivityBlock.activities.UPLOAD_LIST);\n      },\n      onCancel: () => {\n        this.historyBack();\n      },\n\n      onSelectAll: () => {\n        this._messageBridge?.send({ type: 'select-all' });\n      },\n\n      onDeselectAll: () => {\n        this._messageBridge?.send({ type: 'deselect-all' });\n      },\n    };\n  }\n\n  /** @type {ActivityParams} */\n  get activityParams() {\n    const params = super.activityParams;\n    if ('externalSourceType' in params) {\n      return params;\n    }\n    throw new Error(`External Source activity params not found`);\n  }\n\n  initCallback() {\n    super.initCallback();\n    this.registerActivity(this.activityType, {\n      onActivate: () => {\n        let { externalSourceType } = /** @type {ActivityParams} */ (this.activityParams);\n\n        if (!externalSourceType) {\n          this.modalManager.close(this.$['*currentActivity']);\n          this.$['*currentActivity'] = null;\n          console.error(`Param \"externalSourceType\" is required for activity \"${this.activityType}\"`);\n          return;\n        }\n\n        this.set$({\n          activityCaption: `${externalSourceType?.[0].toUpperCase()}${externalSourceType?.slice(1)}`,\n          activityIcon: externalSourceType,\n        });\n\n        this.mountIframe();\n      },\n    });\n    this.sub('*currentActivityParams', (val) => {\n      if (!this.isActivityActive) {\n        return;\n      }\n      this.unmountIframe();\n      this.mountIframe();\n    });\n    this.sub('*currentActivity', (val) => {\n      if (val !== this.activityType) {\n        this.unmountIframe();\n      }\n    });\n    this.subConfigValue('multiple', (multiple) => {\n      this.$.showSelectionStatus = multiple;\n    });\n\n    this.subConfigValue('localeName', (val) => {\n      this.setupL10n();\n    });\n\n    this.subConfigValue('externalSourcesEmbedCss', (embedCss) => {\n      this.applyEmbedCss(embedCss);\n    });\n  }\n\n  /**\n   * @private\n   * @param {NonNullable<import('./types.js').InputMessageMap['selected-files-change']['selectedFiles']>[number]} selectedFile\n   */\n  extractUrlFromSelectedFile(selectedFile) {\n    if (selectedFile.alternatives) {\n      const preferredTypes = stringToArray(this.cfg.externalSourcesPreferredTypes);\n      for (const preferredType of preferredTypes) {\n        const regexp = wildcardRegexp(preferredType);\n        for (const [type, typeUrl] of Object.entries(selectedFile.alternatives)) {\n          if (regexp.test(type)) {\n            return typeUrl;\n          }\n        }\n      }\n    }\n\n    return selectedFile.url;\n  }\n\n  /**\n   * @private\n   * @param {import('./types.js').InputMessageMap['toolbar-state-change']} message\n   */\n  handleToolbarStateChange(message) {\n    this.set$({\n      toolbarVisible: message.isVisible,\n    });\n  }\n\n  /**\n   * @private\n   * @param {import('./types.js').InputMessageMap['selected-files-change']} message\n   */\n  async handleSelectedFilesChange(message) {\n    if (this.cfg.multiple !== message.isMultipleMode) {\n      console.error('Multiple mode mismatch');\n      return;\n    }\n\n    this.bindL10n('counterText', () =>\n      this.l10n('selected-count', {\n        count: message.selectedCount,\n        total: message.total,\n      }),\n    );\n\n    this.set$({\n      doneBtnTextClass: message.isReady ? '' : 'uc-hidden',\n      isSelectionReady: message.isReady,\n      isDoneBtnEnabled: message.isReady && message.selectedFiles.length > 0,\n      showSelectionStatus: message.isMultipleMode && message.total > 0,\n      couldSelectAll: message.selectedCount < message.total,\n      couldDeselectAll: message.selectedCount === message.total,\n      selectedList: message.selectedFiles,\n    });\n  }\n\n  /** @private */\n  handleIframeLoad() {\n    this.applyEmbedCss(this.cfg.externalSourcesEmbedCss);\n    this.applyTheme();\n    this.setupL10n();\n  }\n\n  /** @private */\n  applyTheme() {\n    this._messageBridge?.send({\n      type: 'set-theme-definition',\n      theme: buildThemeDefinition(this),\n    });\n  }\n\n  /**\n   * @private\n   * @param {string} css\n   */\n  applyEmbedCss(css) {\n    this._messageBridge?.send({\n      type: 'set-embed-css',\n      css,\n    });\n  }\n\n  /** @private */\n  setupL10n() {\n    this._messageBridge?.send({\n      type: 'set-locale-definition',\n      localeDefinition: this.cfg.localeName,\n    });\n  }\n\n  /** @private */\n  remoteUrl() {\n    const { pubkey, remoteTabSessionKey, socialBaseUrl, multiple } = this.cfg;\n    const { externalSourceType } = this.activityParams;\n    const sourceName = SOCIAL_SOURCE_MAPPING[externalSourceType] ?? externalSourceType;\n    const lang = this.l10n('social-source-lang')?.split('-')?.[0] || 'en';\n    const params = {\n      lang,\n      public_key: pubkey,\n      images_only: false.toString(),\n      session_key: remoteTabSessionKey,\n      wait_for_theme: true,\n      multiple: multiple.toString(),\n      origin: this.cfg.topLevelOrigin || getTopLevelOrigin(),\n      debug: this.cfg.debug,\n    };\n    const url = new URL(`/window4/${sourceName}`, socialBaseUrl);\n    url.search = queryString(params);\n    return url.toString();\n  }\n\n  /** @private */\n  mountIframe() {\n    /** @type {HTMLIFrameElement} */\n    // @ts-ignore\n    let iframe = create({\n      tag: 'iframe',\n      attributes: {\n        src: this.remoteUrl(),\n        marginheight: 0,\n        marginwidth: 0,\n        frameborder: 0,\n        allowTransparency: true,\n      },\n    });\n    iframe.addEventListener('load', this.handleIframeLoad.bind(this));\n\n    this.ref.iframeWrapper.innerHTML = '';\n    this.ref.iframeWrapper.appendChild(iframe);\n\n    if (!iframe.contentWindow) {\n      return;\n    }\n\n    this._messageBridge?.destroy();\n\n    /** @private */\n    this._messageBridge = new MessageBridge(iframe.contentWindow);\n    this._messageBridge.on('selected-files-change', this.handleSelectedFilesChange.bind(this));\n    this._messageBridge.on('toolbar-state-change', this.handleToolbarStateChange.bind(this));\n\n    this.resetSelectionStatus();\n  }\n\n  /** @private */\n  unmountIframe() {\n    this._messageBridge?.destroy();\n    this._messageBridge = undefined;\n    this.ref.iframeWrapper.innerHTML = '';\n\n    this.resetSelectionStatus();\n  }\n\n  /** @private */\n  resetSelectionStatus() {\n    this.set$({\n      selectedList: [],\n      total: 0,\n      isDoneBtnEnabled: false,\n      couldSelectAll: false,\n      couldDeselectAll: false,\n      showSelectionStatus: false,\n    });\n  }\n}\n\nExternalSource.template = /* HTML */ `\n  <uc-activity-header>\n    <button\n      type=\"button\"\n      class=\"uc-mini-btn uc-close-btn\"\n      set=\"onclick: *historyBack\"\n      l10n=\"@title:a11y-activity-header-button-close;@aria-label:a11y-activity-header-button-close\"\n    >\n      <uc-icon name=\"close\"></uc-icon>\n    </button>\n  </uc-activity-header>\n  <div class=\"uc-content\">\n    <div ref=\"iframeWrapper\" class=\"uc-iframe-wrapper\"></div>\n    <div class=\"uc-toolbar\" set=\"@hidden: !toolbarVisible\">\n      <button type=\"button\" class=\"uc-cancel-btn uc-secondary-btn\" set=\"onclick: onCancel\" l10n=\"cancel\"></button>\n      <div set=\"@hidden: !showSelectionStatus\" class=\"uc-selection-status-box\">\n        <span>{{counterText}}</span>\n        <button type=\"button\" set=\"onclick: onSelectAll; @hidden: !couldSelectAll\" l10n=\"select-all\"></button>\n        <button type=\"button\" set=\"onclick: onDeselectAll; @hidden: !couldDeselectAll\" l10n=\"deselect-all\"></button>\n      </div>\n      <button type=\"button\" class=\"uc-done-btn uc-primary-btn\" set=\"onclick: onDone; @disabled: !isDoneBtnEnabled;\">\n        <uc-spinner set=\"@hidden: isSelectionReady\"></uc-spinner>\n        <span l10n=\"done\" set=\"@class: doneBtnTextClass\"></span>\n      </button>\n    </div>\n  </div>\n`;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}